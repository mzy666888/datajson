/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/util/graphic.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),pathTool=require("zrender/lib/tool/path"),colorTool=require("zrender/lib/tool/color"),matrix=require("zrender/lib/core/matrix"),vector=require("zrender/lib/core/vector"),Path=require("zrender/lib/graphic/Path"),Transformable=require("zrender/lib/mixin/Transformable"),ZImage=require("zrender/lib/graphic/Image");exports.Image=ZImage;var Group=require("zrender/lib/container/Group");exports.Group=Group;var Text=require("zrender/lib/graphic/Text");exports.Text=Text;var Circle=require("zrender/lib/graphic/shape/Circle");exports.Circle=Circle;var Sector=require("zrender/lib/graphic/shape/Sector");exports.Sector=Sector;var Ring=require("zrender/lib/graphic/shape/Ring");exports.Ring=Ring;var Polygon=require("zrender/lib/graphic/shape/Polygon");exports.Polygon=Polygon;var Polyline=require("zrender/lib/graphic/shape/Polyline");exports.Polyline=Polyline;var Rect=require("zrender/lib/graphic/shape/Rect");exports.Rect=Rect;var Line=require("zrender/lib/graphic/shape/Line");exports.Line=Line;var BezierCurve=require("zrender/lib/graphic/shape/BezierCurve");exports.BezierCurve=BezierCurve;var Arc=require("zrender/lib/graphic/shape/Arc");exports.Arc=Arc;var CompoundPath=require("zrender/lib/graphic/CompoundPath");exports.CompoundPath=CompoundPath;var LinearGradient=require("zrender/lib/graphic/LinearGradient");exports.LinearGradient=LinearGradient;var RadialGradient=require("zrender/lib/graphic/RadialGradient");exports.RadialGradient=RadialGradient;var BoundingRect=require("zrender/lib/core/BoundingRect");exports.BoundingRect=BoundingRect;var IncrementalDisplayable=require("zrender/lib/graphic/IncrementalDisplayable");exports.IncrementalDisplayable=IncrementalDisplayable;var subPixelOptimizeUtil=require("zrender/lib/graphic/helper/subPixelOptimize"),mathMax=Math.max,mathMin=Math.min,EMPTY_OBJ={},Z2_EMPHASIS_LIFT=1,CACHED_LABEL_STYLE_PROPERTIES={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},EMPHASIS="emphasis",NORMAL="normal",_highlightNextDigit=1,_highlightKeyMap={},_customShapeMap={};function extendShape(e){return Path.extend(e)}function extendPath(e,t){return pathTool.extendFromString(e,t)}function registerShape(e,t){_customShapeMap[e]=t}function getShapeClass(e){if(_customShapeMap.hasOwnProperty(e))return _customShapeMap[e]}function makePath(e,t,r,i){var o=pathTool.createFromString(e,t);return r&&("center"===i&&(r=centerGraphic(r,o.getBoundingRect())),resizePath(o,r)),o}function makeImage(e,t,r){var i=new ZImage({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(e){if("center"===r){var o={width:e.width,height:e.height};i.setStyle(centerGraphic(t,o))}}});return i}function centerGraphic(e,t){var r,i=t.width/t.height,o=e.height*i;return r=o<=e.width?e.height:(o=e.width)/i,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-r/2,width:o,height:r}}var mergePath=pathTool.mergePath;function resizePath(e,t){if(e.applyTransform){var r=e.getBoundingRect().calculateTransform(t);e.applyTransform(r)}}function subPixelOptimizeLine(e){return subPixelOptimizeUtil.subPixelOptimizeLine(e.shape,e.shape,e.style),e}function subPixelOptimizeRect(e){return subPixelOptimizeUtil.subPixelOptimizeRect(e.shape,e.shape,e.style),e}var subPixelOptimize=subPixelOptimizeUtil.subPixelOptimize;function hasFillOrStroke(e){return null!=e&&"none"!==e}var liftedColorMap=zrUtil.createHashMap(),liftedColorCount=0;function liftColor(e){if("string"!=typeof e)return e;var t=liftedColorMap.get(e);return t||(t=colorTool.lift(e,-.1),liftedColorCount<1e4&&(liftedColorMap.set(e,t),liftedColorCount++)),t}function cacheElementStl(e){if(e.__hoverStlDirty){e.__hoverStlDirty=!1;var t=e.__hoverStl;if(t){var r=e.__cachedNormalStl={};e.__cachedNormalZ2=e.z2;var i=e.style;for(var o in t)null!=t[o]&&(r[o]=i[o]);r.fill=i.fill,r.stroke=i.stroke}else e.__cachedNormalStl=e.__cachedNormalZ2=null}}function singleEnterEmphasis(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var r=e.__zr,i=e.useHoverLayer&&r&&"canvas"===r.painter.type;if(e.__highlighted=i?"layer":"plain",!(e.isGroup||!r&&e.useHoverLayer)){var o=e,l=e.style;i&&(l=(o=r.addHover(e)).style),rollbackDefaultTextStyle(l),i||cacheElementStl(o),l.extendFrom(t),setDefaultHoverFillStroke(l,t,"fill"),setDefaultHoverFillStroke(l,t,"stroke"),applyDefaultTextStyle(l),i||(e.dirty(!1),e.z2+=Z2_EMPHASIS_LIFT)}}}function setDefaultHoverFillStroke(e,t,r){!hasFillOrStroke(t[r])&&hasFillOrStroke(e[r])&&(e[r]=liftColor(e[r]))}function singleEnterNormal(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var r=e.style,i=e.__cachedNormalStl;i&&(rollbackDefaultTextStyle(r),e.setStyle(i),applyDefaultTextStyle(r));var o=e.__cachedNormalZ2;null!=o&&e.z2-o===Z2_EMPHASIS_LIFT&&(e.z2=o)}}function traverseUpdate(e,t,r){var i,o=NORMAL,l=NORMAL;e.__highlighted&&(o=EMPHASIS,i=!0),t(e,r),e.__highlighted&&(l=EMPHASIS,i=!0),e.isGroup&&e.traverse(function(e){!e.isGroup&&t(e,r)}),i&&e.__highDownOnUpdate&&e.__highDownOnUpdate(o,l)}function setElementHoverStyle(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,singleEnterNormal(e),singleEnterEmphasis(e))}function onElementMouseOver(e){!shouldSilent(this,e)&&!this.__highByOuter&&traverseUpdate(this,singleEnterEmphasis)}function onElementMouseOut(e){!shouldSilent(this,e)&&!this.__highByOuter&&traverseUpdate(this,singleEnterNormal)}function onElementEmphasisEvent(e){this.__highByOuter|=1<<(e||0),traverseUpdate(this,singleEnterEmphasis)}function onElementNormalEvent(e){!(this.__highByOuter&=~(1<<(e||0)))&&traverseUpdate(this,singleEnterNormal)}function shouldSilent(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function setHoverStyle(e,t){setAsHighDownDispatcher(e,!0),traverseUpdate(e,setElementHoverStyle,t)}function setAsHighDownDispatcher(e,t){var r=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!r||e.__highDownDispatcher){var i=r?"off":"on";e[i]("mouseover",onElementMouseOver)[i]("mouseout",onElementMouseOut),e[i]("emphasis",onElementEmphasisEvent)[i]("normal",onElementNormalEvent),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!r}}function isHighDownDispatcher(e){return!(!e||!e.__highDownDispatcher)}function getHighlightDigit(e){var t=_highlightKeyMap[e];return null==t&&_highlightNextDigit<=32&&(t=_highlightKeyMap[e]=_highlightNextDigit++),t}function setLabelStyle(e,t,r,i,o,l,a){var n,h=(o=o||EMPTY_OBJ).labelFetcher,s=o.labelDataIndex,u=o.labelDimIndex,p=r.getShallow("show"),c=i.getShallow("show");(p||c)&&(h&&(n=h.getFormattedLabel(s,"normal",null,u)),null==n&&(n=zrUtil.isFunction(o.defaultText)?o.defaultText(s,o):o.defaultText));var g=p?n:null,x=c?zrUtil.retrieve2(h?h.getFormattedLabel(s,"emphasis",null,u):null,n):null;null==g&&null==x||(setTextStyle(e,r,l,o),setTextStyle(t,i,a,o,!0)),e.text=g,t.text=x}function modifyLabelStyle(e,t,r){var i=e.style;t&&(rollbackDefaultTextStyle(i),e.setStyle(t),applyDefaultTextStyle(i)),i=e.__hoverStl,r&&i&&(rollbackDefaultTextStyle(i),zrUtil.extend(i,r),applyDefaultTextStyle(i))}function setTextStyle(e,t,r,i,o){return setTextStyleCommon(e,t,i,o),r&&zrUtil.extend(e,r),e}function setText(e,t,r){var i,o={isRectText:!0};!1===r?i=!0:o.autoColor=r,setTextStyleCommon(e,t,o,i)}function setTextStyleCommon(e,t,r,i){if((r=r||EMPTY_OBJ).isRectText){var o;r.getTextPosition?o=r.getTextPosition(t,i):"outside"===(o=t.getShallow("position")||(i?null:"inside"))&&(o="top"),e.textPosition=o,e.textOffset=t.getShallow("offset");var l=t.getShallow("rotate");null!=l&&(l*=Math.PI/180),e.textRotation=l,e.textDistance=zrUtil.retrieve2(t.getShallow("distance"),i?null:5)}var a,n=t.ecModel,h=n&&n.option.textStyle,s=getRichItemNames(t);if(s)for(var u in a={},s)if(s.hasOwnProperty(u)){var p=t.getModel(["rich",u]);setTokenTextStyle(a[u]={},p,h,r,i)}return e.rich=a,setTokenTextStyle(e,t,h,r,i,!0),r.forceRich&&!r.textStyle&&(r.textStyle={}),e}function getRichItemNames(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||EMPTY_OBJ).rich;if(r)for(var i in t=t||{},r)r.hasOwnProperty(i)&&(t[i]=1);e=e.parentModel}return t}function setTokenTextStyle(e,t,r,i,o,l){r=!o&&r||EMPTY_OBJ,e.textFill=getAutoColor(t.getShallow("color"),i)||r.color,e.textStroke=getAutoColor(t.getShallow("textBorderColor"),i)||r.textBorderColor,e.textStrokeWidth=zrUtil.retrieve2(t.getShallow("textBorderWidth"),r.textBorderWidth),o||(l&&(e.insideRollbackOpt=i,applyDefaultTextStyle(e)),null==e.textFill&&(e.textFill=i.autoColor)),e.fontStyle=t.getShallow("fontStyle")||r.fontStyle,e.fontWeight=t.getShallow("fontWeight")||r.fontWeight,e.fontSize=t.getShallow("fontSize")||r.fontSize,e.fontFamily=t.getShallow("fontFamily")||r.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),l&&i.disableBox||(e.textBackgroundColor=getAutoColor(t.getShallow("backgroundColor"),i),e.textPadding=t.getShallow("padding"),e.textBorderColor=getAutoColor(t.getShallow("borderColor"),i),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||r.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||r.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||r.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||r.textShadowOffsetY}function getAutoColor(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function applyDefaultTextStyle(e){var t,r=e.textPosition,i=e.insideRollbackOpt;if(i&&null==e.textFill){var o=i.autoColor,l=i.isRectText,a=i.useInsideStyle,n=!1!==a&&(!0===a||l&&r&&"string"==typeof r&&r.indexOf("inside")>=0),h=!n&&null!=o;(n||h)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),n&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=o,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),h&&(e.textFill=o)}e.insideRollback=t}function rollbackDefaultTextStyle(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function getFont(e,t){var r=t||t.getModel("textStyle");return zrUtil.trim([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}function animateOrSetProps(e,t,r,i,o,l){if("function"==typeof o&&(l=o,o=null),i&&i.isAnimationEnabled()){var a=e?"Update":"",n=i.getShallow("animationDuration"+a),h=i.getShallow("animationEasing"+a),s=i.getShallow("animationDelay"+a);"function"==typeof s&&(s=s(o,i.getAnimationDelayParams?i.getAnimationDelayParams(t,o):null)),"function"==typeof n&&(n=n(o)),n>0?t.animateTo(r,n,s||0,h,l,!!l):(t.stopAnimation(),t.attr(r),l&&l())}else t.stopAnimation(),t.attr(r),l&&l()}function updateProps(e,t,r,i,o){animateOrSetProps(!0,e,t,r,i,o)}function initProps(e,t,r,i,o){animateOrSetProps(!1,e,t,r,i,o)}function getTransform(e,t){for(var r=matrix.identity([]);e&&e!==t;)matrix.mul(r,e.getLocalTransform(),r),e=e.parent;return r}function applyTransform(e,t,r){return t&&!zrUtil.isArrayLike(t)&&(t=Transformable.getLocalTransform(t)),r&&(t=matrix.invert([],t)),vector.applyTransform([],e,t)}function transformDirection(e,t,r){var i=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),l=["left"===e?-i:"right"===e?i:0,"top"===e?-o:"bottom"===e?o:0];return l=applyTransform(l,t,r),Math.abs(l[0])>Math.abs(l[1])?l[0]>0?"right":"left":l[1]>0?"bottom":"top"}function groupTransition(e,t,r,i){if(e&&t){var o,l=(o={},e.traverse(function(e){!e.isGroup&&e.anid&&(o[e.anid]=e)}),o);t.traverse(function(e){if(!e.isGroup&&e.anid){var t=l[e.anid];if(t){var i=a(e);e.attr(a(t)),updateProps(e,i,r,e.dataIndex)}}})}function a(e){var t={position:vector.clone(e.position),rotation:e.rotation};return e.shape&&(t.shape=zrUtil.extend({},e.shape)),t}}function clipPointsByRect(e,t){return zrUtil.map(e,function(e){var r=e[0];r=mathMax(r,t.x),r=mathMin(r,t.x+t.width);var i=e[1];return i=mathMax(i,t.y),[r,i=mathMin(i,t.y+t.height)]})}function clipRectByRect(e,t){var r=mathMax(e.x,t.x),i=mathMin(e.x+e.width,t.x+t.width),o=mathMax(e.y,t.y),l=mathMin(e.y+e.height,t.y+t.height);if(i>=r&&l>=o)return{x:r,y:o,width:i-r,height:l-o}}function createIcon(e,t,r){var i=(t=zrUtil.extend({rectHover:!0},t)).style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(i.image=e.slice(8),zrUtil.defaults(i,r),new ZImage(t)):makePath(e.replace("path://",""),t,r,"center")}function linePolygonIntersect(e,t,r,i,o){for(var l=0,a=o[o.length-1];l<o.length;l++){var n=o[l];if(lineLineIntersect(e,t,r,i,n[0],n[1],a[0],a[1]))return!0;a=n}}function lineLineIntersect(e,t,r,i,o,l,a,n){var h=r-e,s=i-t,u=a-o,p=n-l,c=crossProduct2d(u,p,h,s);if(nearZero(c))return!1;var g=e-o,x=t-l,d=crossProduct2d(g,x,h,s)/c;if(d<0||d>1)return!1;var S=crossProduct2d(g,x,u,p)/c;return!(S<0||S>1)}function crossProduct2d(e,t,r,i){return e*i-r*t}function nearZero(e){return e<=1e-6&&e>=-1e-6}registerShape("circle",Circle),registerShape("sector",Sector),registerShape("ring",Ring),registerShape("polygon",Polygon),registerShape("polyline",Polyline),registerShape("rect",Rect),registerShape("line",Line),registerShape("bezierCurve",BezierCurve),registerShape("arc",Arc),exports.Z2_EMPHASIS_LIFT=Z2_EMPHASIS_LIFT,exports.CACHED_LABEL_STYLE_PROPERTIES=CACHED_LABEL_STYLE_PROPERTIES,exports.extendShape=extendShape,exports.extendPath=extendPath,exports.registerShape=registerShape,exports.getShapeClass=getShapeClass,exports.makePath=makePath,exports.makeImage=makeImage,exports.mergePath=mergePath,exports.resizePath=resizePath,exports.subPixelOptimizeLine=subPixelOptimizeLine,exports.subPixelOptimizeRect=subPixelOptimizeRect,exports.subPixelOptimize=subPixelOptimize,exports.setElementHoverStyle=setElementHoverStyle,exports.setHoverStyle=setHoverStyle,exports.setAsHighDownDispatcher=setAsHighDownDispatcher,exports.isHighDownDispatcher=isHighDownDispatcher,exports.getHighlightDigit=getHighlightDigit,exports.setLabelStyle=setLabelStyle,exports.modifyLabelStyle=modifyLabelStyle,exports.setTextStyle=setTextStyle,exports.setText=setText,exports.getFont=getFont,exports.updateProps=updateProps,exports.initProps=initProps,exports.getTransform=getTransform,exports.applyTransform=applyTransform,exports.transformDirection=transformDirection,exports.groupTransition=groupTransition,exports.clipPointsByRect=clipPointsByRect,exports.clipRectByRect=clipRectByRect,exports.createIcon=createIcon,exports.linePolygonIntersect=linePolygonIntersect,exports.lineLineIntersect=lineLineIntersect;
//# sourceMappingURL=/sm/5413c8afe62050afd2739947746dbd7b8bcd202720499e3582326c3d7c323963.map