/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/sunburst/SunburstView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),ChartView=require("../../view/Chart"),SunburstPiece=require("./SunburstPiece"),DataDiffer=require("../../data/DataDiffer"),ROOT_TO_NODE_ACTION="sunburstRootToNode",SunburstView=ChartView.extend({type:"sunburst",init:function(){},render:function(e,i,t,r){var n=this;this.seriesModel=e,this.api=t,this.ecModel=i;var o=e.getData(),c=o.tree.root,l=e.getViewRoot(),a=this.group,u=e.get("renderLabelForZeroData"),h=[];l.eachNode(function(e){h.push(e)});var s=this._oldChildren||[];if(function(t,r){if(0===t.length&&0===r.length)return;function n(e){return e.getId()}function l(n,l){var h=null==n?null:t[n],s=null==l?null:r[l];!function(t,r){u||!t||t.getValue()||(t=null);if(t!==c&&r!==c)if(r&&r.piece)t?(r.piece.updateData(!1,t,"normal",e,i),o.setItemGraphicEl(t.dataIndex,r.piece)):function(e){if(!e)return;e.piece&&(a.remove(e.piece),e.piece=null)}(r);else if(t){var n=new SunburstPiece(t,e,i);a.add(n),o.setItemGraphicEl(t.dataIndex,n)}}(h,s)}new DataDiffer(r,t,n,n).add(l).update(l).remove(zrUtil.curry(l,null)).execute()}(h,s),function(t,r){if(r.depth>0){n.virtualPiece?n.virtualPiece.updateData(!1,t,"normal",e,i):(n.virtualPiece=new SunburstPiece(t,e,i),a.add(n.virtualPiece)),r.piece._onclickEvent&&r.piece.off("click",r.piece._onclickEvent);var o=function(e){n._rootToNode(r.parentNode)};r.piece._onclickEvent=o,n.virtualPiece.on("click",o)}else n.virtualPiece&&(a.remove(n.virtualPiece),n.virtualPiece=null)}(c,l),r&&r.highlight&&r.highlight.piece){var d=e.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(d)}else if(r&&r.unhighlight){var f=this.virtualPiece;!f&&c.children.length&&(f=c.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=h},dispose:function(){},_initEvents:function(){var e=this,i=function(i){var t=!1;e.seriesModel.getViewRoot().eachNode(function(r){if(!t&&r.piece&&r.piece.childAt(0)===i.target){var n=r.getModel().get("nodeClick");if("rootToNode"===n)e._rootToNode(r);else if("link"===n){var o=r.getModel(),c=o.get("link");if(c){var l=o.get("target",!0)||"_blank";window.open(c,l)}}t=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",i),this.group._onclickEvent=i},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,i){var t=i.getData().getItemLayout(0);if(t){var r=e[0]-t.cx,n=e[1]-t.cy,o=Math.sqrt(r*r+n*n);return o<=t.r&&o>=t.r0}}}),_default=SunburstView;module.exports=_default;
//# sourceMappingURL=/sm/a3d9abd8824e1a4073bc9dffa16f9048db2ae4310a53a2ce636141be120f67f1.map