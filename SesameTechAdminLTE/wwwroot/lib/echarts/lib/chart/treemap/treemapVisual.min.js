/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/treemap/treemapVisual.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var VisualMapping=require("../../visual/VisualMapping"),zrColor=require("zrender/lib/tool/color"),zrUtil=require("zrender/lib/core/util"),isArray=zrUtil.isArray,ITEM_STYLE_NORMAL="itemStyle",_default={seriesType:"treemap",reset:function(e,l,r,a){var o=e.getData().tree,t=o.root,i=e.getModel(ITEM_STYLE_NORMAL);t.isRemoved()||travelTree(t,{},zrUtil.map(o.levelModels,function(e){return e?e.get(ITEM_STYLE_NORMAL):null}),i,e.getViewRoot().getAncestors(),e)}};function travelTree(e,l,r,a,o,t){var i=e.getModel(),n=e.getLayout();if(n&&!n.invisible&&n.isInView){var u,g=e.getModel(ITEM_STYLE_NORMAL),s=buildVisuals(g,l,r[e.depth],a),c=g.get("borderColor"),d=g.get("borderColorSaturation");null!=d&&(c=calculateBorderColor(d,u=calculateColor(s,e))),e.setVisual("borderColor",c);var p=e.viewChildren;if(p&&p.length){var v=buildVisualMapping(e,i,n,g,s,p);zrUtil.each(p,function(e,l){(e.depth>=o.length||e===o[e.depth])&&travelTree(e,mapVisual(i,s,e,l,v,t),r,a,o,t)})}else u=calculateColor(s,e),e.setVisual("color",u)}}function buildVisuals(e,l,r,a){var o=zrUtil.extend({},l);return zrUtil.each(["color","colorAlpha","colorSaturation"],function(t){var i=e.get(t,!0);null==i&&r&&(i=r[t]),null==i&&(i=l[t]),null==i&&(i=a.get(t)),null!=i&&(o[t]=i)}),o}function calculateColor(e){var l=getValueVisualDefine(e,"color");if(l){var r=getValueVisualDefine(e,"colorAlpha"),a=getValueVisualDefine(e,"colorSaturation");return a&&(l=zrColor.modifyHSL(l,null,null,a)),r&&(l=zrColor.modifyAlpha(l,r)),l}}function calculateBorderColor(e,l){return null!=l?zrColor.modifyHSL(l,null,null,e):null}function getValueVisualDefine(e,l){var r=e[l];if(null!=r&&"none"!==r)return r}function buildVisualMapping(e,l,r,a,o,t){if(t&&t.length){var i=getRangeVisual(l,"color")||null!=o.color&&"none"!==o.color&&(getRangeVisual(l,"colorAlpha")||getRangeVisual(l,"colorSaturation"));if(i){var n=l.get("visualMin"),u=l.get("visualMax"),g=r.dataExtent.slice();null!=n&&n<g[0]&&(g[0]=n),null!=u&&u>g[1]&&(g[1]=u);var s=l.get("colorMappingBy"),c={type:i.name,dataExtent:g,visual:i.range};"color"!==c.type||"index"!==s&&"id"!==s?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var d=new VisualMapping(c);return d.__drColorMappingBy=s,d}}}function getRangeVisual(e,l){var r=e.get(l);return isArray(r)&&r.length?{name:l,range:r}:null}function mapVisual(e,l,r,a,o,t){var i=zrUtil.extend({},l);if(o){var n=o.type,u="color"===n&&o.__drColorMappingBy,g="index"===u?a:"id"===u?t.mapIdToIndex(r.getId()):r.getValue(e.get("visualDimension"));i[n]=o.mapValueToVisual(g)}return i}module.exports=_default;
//# sourceMappingURL=/sm/dcc7e8d0fc00059f34eaeba7953cbef3f8b8f27045375313b9a80e70080acdb8.map