/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/funnel/funnelLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var layout=require("../../util/layout"),_number=require("../../util/number"),parsePercent=_number.parsePercent,linearMap=_number.linearMap;function getViewRect(e,t){return layout.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function getSortedIndices(e,t){for(var n=e.mapDimension("value"),i=e.mapArray(n,function(e){return e}),r=[],a="ascending"===t,o=0,l=e.count();o<l;o++)r[o]=o;return"function"==typeof t?r.sort(t):"none"!==t&&r.sort(function(e,t){return a?i[e]-i[t]:i[t]-i[e]}),r}function labelLayout(e){e.each(function(t){var n,i,r,a,o=e.getItemModel(t),l=o.getModel("label").get("position"),g=o.getModel("labelLine"),u=e.getItemLayout(t),c=u.points,s="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(s)"insideLeft"===l?(i=(c[0][0]+c[3][0])/2+5,r=(c[0][1]+c[3][1])/2,n="left"):"insideRight"===l?(i=(c[1][0]+c[2][0])/2-5,r=(c[1][1]+c[2][1])/2,n="right"):(i=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,r=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,n="center"),a=[[i,r],[i,r]];else{var h,d,f,m=g.get("length");"left"===l?(h=(c[3][0]+c[0][0])/2,d=(c[3][1]+c[0][1])/2,i=(f=h-m)-5,n="right"):"right"===l?(h=(c[1][0]+c[2][0])/2,d=(c[1][1]+c[2][1])/2,i=(f=h+m)+5,n="left"):"rightTop"===l?(h=c[1][0],d=c[1][1],i=(f=h+m)+5,n="top"):"rightBottom"===l?(h=c[2][0],d=c[2][1],i=(f=h+m)+5,n="bottom"):"leftTop"===l?(h=c[0][0],d=c[1][1],i=(f=h-m)-5,n="right"):"leftBottom"===l?(h=c[3][0],d=c[2][1],i=(f=h-m)-5,n="right"):(h=(c[1][0]+c[2][0])/2,d=(c[1][1]+c[2][1])/2,i=(f=h+m)+5,n="left");a=[[h,d],[f,d]],r=d}u.label={linePoints:a,x:i,y:r,verticalAlign:"middle",textAlign:n,inside:s}})}function _default(e,t,n){e.eachSeriesByType("funnel",function(e){var n=e.getData(),i=n.mapDimension("value"),r=e.get("sort"),a=getViewRect(e,t),o=getSortedIndices(n,r),l=[parsePercent(e.get("minSize"),a.width),parsePercent(e.get("maxSize"),a.width)],g=n.getDataExtent(i),u=e.get("min"),c=e.get("max");null==u&&(u=Math.min(g[0],0)),null==c&&(c=g[1]);var s=e.get("funnelAlign"),h=e.get("gap"),d=(a.height-h*(n.count()-1))/n.count(),f=a.y,m=function(e,t){var r,o=n.get(i,e)||0,g=linearMap(o,[u,c],l,!0);switch(s){case"left":r=a.x;break;case"center":r=a.x+(a.width-g)/2;break;case"right":r=a.x+a.width-g}return[[r,t],[r+g,t]]};"ascending"===r&&(d=-d,h=-h,f+=a.height,o=o.reverse());for(var p=0;p<o.length;p++){var y=o[p],v=o[p+1],b=n.getItemModel(y).get("itemStyle.height");null==b?b=d:(b=parsePercent(b,a.height),"ascending"===r&&(b=-b));var x=m(y,f),L=m(v,f+b);f+=b+h,n.setItemLayout(y,{points:x.concat(L.slice().reverse())})}labelLayout(n)})}module.exports=_default;
//# sourceMappingURL=/sm/ff7415b520bcc060551dc945ab04ac46084df3ec07f5ea7991e65bec927a141b.map