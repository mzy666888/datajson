/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/themeRiver/ThemeRiverView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var echarts=require("../../echarts"),_poly=require("../line/poly"),Polygon=_poly.Polygon,graphic=require("../../util/graphic"),_util=require("zrender/lib/core/util"),bind=_util.bind,extend=_util.extend,DataDiffer=require("../../data/DataDiffer"),_default=echarts.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,i){var a=e.getData(),r=this.group,o=e.getLayerSeries(),l=a.getLayout("layoutInfo"),n=l.rect,s=l.boundaryGap;function d(e){return e.name}r.attr("position",[0,n.y+s[0]]);var h=new DataDiffer(this._layersSeries||[],o,d,d),p={};function g(t,i,l){var n=this._layers;if("remove"!==t){for(var s,d,h,g=[],u=[],y=o[i].indices,c=0;c<y.length;c++){var m=a.getItemLayout(y[c]),f=m.x,v=m.y0,x=m.y;g.push([f,v]),u.push([f,v+x]),s=a.getItemVisual(y[c],"color")}var S=a.getItemLayout(y[0]),_=a.getItemModel(y[c-1]),w=_.getModel("label"),P=w.get("margin");if("add"===t){var b=p[i]=new graphic.Group;d=new Polygon({shape:{points:g,stackedOnPoints:u,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),h=new graphic.Text({style:{x:S.x-P,y:S.y0+S.y/2}}),b.add(d),b.add(h),r.add(b),d.setClipPath(createGridClipShape(d.getBoundingRect(),e,function(){d.removeClipPath()}))}else{b=n[l];d=b.childAt(0),h=b.childAt(1),r.add(b),p[i]=b,graphic.updateProps(d,{shape:{points:g,stackedOnPoints:u}},e),graphic.updateProps(h,{style:{x:S.x-P,y:S.y0+S.y/2}},e)}var D=_.getModel("emphasis.itemStyle"),I=_.getModel("itemStyle");graphic.setTextStyle(h.style,w,{text:w.get("show")?e.getFormattedLabel(y[c-1],"normal")||a.getName(y[c-1]):null,textVerticalAlign:"middle"}),d.setStyle(extend({fill:s},I.getItemStyle(["color"]))),graphic.setHoverStyle(d,D.getItemStyle())}else r.remove(n[i])}h.add(bind(g,this,"add")).update(bind(g,this,"update")).remove(bind(g,this,"remove")).execute(),this._layersSeries=o,this._layers=p},dispose:function(){}});function createGridClipShape(e,t,i){var a=new graphic.Rect({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return graphic.initProps(a,{shape:{width:e.width+20,height:e.height+20}},t,i),a}module.exports=_default;
//# sourceMappingURL=/sm/24f177117db5f37e792455ddf8095d16c70acea27bbc3a0ac6d64dd30ff5fd80.map