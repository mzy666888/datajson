/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/themeRiver/ThemeRiverSeries.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var SeriesModel=require("../../model/Series"),createDimensions=require("../../data/helper/createDimensions"),_dimensionHelper=require("../../data/helper/dimensionHelper"),getDimensionTypeByAxis=_dimensionHelper.getDimensionTypeByAxis,List=require("../../data/List"),zrUtil=require("zrender/lib/core/util"),_model=require("../../util/model"),groupData=_model.groupData,_format=require("../../util/format"),encodeHTML=_format.encodeHTML,DATA_NAME_INDEX=2,ThemeRiverSeries=SeriesModel.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){ThemeRiverSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(e){var i=e.length,t=groupData(e,function(e){return e[2]}),n=[];t.buckets.each(function(e,i){n.push({name:i,dataList:e})});for(var a=n.length,r=-1,s=-1,o=0;o<a;++o){var l=n[o].dataList.length;l>r&&(r=l,s=o)}for(var u=0;u<a;++u)if(u!==s)for(var d=n[u].name,m=0;m<r;++m){for(var g=n[s].dataList[m][0],p=n[u].dataList.length,f=-1,c=0;c<p;++c){if(n[u].dataList[c][0]===g){f=c;break}}-1===f&&(e[i]=[],e[i][0]=g,e[i][1]=0,e[i][2]=d,i++)}return e},getInitialData:function(e,i){for(var t=i.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),n=zrUtil.filter(e.data,function(e){return void 0!==e[2]}),a=this.fixData(n||[]),r=[],s=this.nameMap=zrUtil.createHashMap(),o=0,l=0;l<a.length;++l)r.push(a[l][DATA_NAME_INDEX]),s.get(a[l][DATA_NAME_INDEX])||(s.set(a[l][DATA_NAME_INDEX],o),o++);var u=createDimensions(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(t)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),d=new List(u,this);return d.initData(a),d},getLayerSeries:function(){for(var e=this.getData(),i=e.count(),t=[],n=0;n<i;++n)t[n]=n;var a=e.mapDimension("single"),r=groupData(t,function(i){return e.get("name",i)}),s=[];return r.buckets.each(function(i,t){i.sort(function(i,t){return e.get(a,i)-e.get(a,t)}),s.push({name:t,indices:i})}),s},getAxisTooltipData:function(e,i,t){zrUtil.isArray(e)||(e=e?[e]:[]);for(var n,a=this.getData(),r=this.getLayerSeries(),s=[],o=r.length,l=0;l<o;++l){for(var u=Number.MAX_VALUE,d=-1,m=r[l].indices.length,g=0;g<m;++g){var p=a.get(e[0],r[l].indices[g]),f=Math.abs(p-i);f<=u&&(n=p,u=f,d=r[l].indices[g])}s.push(d)}return{dataIndices:s,nestestValue:n}},formatTooltip:function(e){var i=this.getData(),t=i.getName(e),n=i.get(i.mapDimension("value"),e);return(isNaN(n)||null==n)&&(n="-"),encodeHTML(t+" : "+n)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}}),_default=ThemeRiverSeries;module.exports=_default;
//# sourceMappingURL=/sm/6211b05204db5559cdaff0156182a02f42d126db60651137ee9922e5c6c68d8c.map