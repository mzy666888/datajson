/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/themeRiver/themeRiverLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),numberUtil=require("../../util/number");function _default(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),r=e.coordinateSystem,i={},n=r.getRect();i.rect=n;var a=e.get("boundaryGap"),o=r.getAxis();(i.boundaryGap=a,"horizontal"===o.orient)?(a[0]=numberUtil.parsePercent(a[0],n.height),a[1]=numberUtil.parsePercent(a[1],n.height),themeRiverLayout(t,e,n.height-a[0]-a[1])):(a[0]=numberUtil.parsePercent(a[0],n.width),a[1]=numberUtil.parsePercent(a[1],n.width),themeRiverLayout(t,e,n.width-a[0]-a[1]));t.setLayout("layoutInfo",i)})}function themeRiverLayout(e,t,r){if(e.count())for(var i,n=t.coordinateSystem,a=t.getLayerSeries(),o=e.mapDimension("single"),u=e.mapDimension("value"),l=zrUtil.map(a,function(t){return zrUtil.map(t.indices,function(t){var r=n.dataToPoint(e.get(o,t));return r[1]=e.get(u,t),r})}),m=computeBaseline(l),c=m.y0,s=r/m.max,y=a.length,h=a[0].indices.length,d=0;d<h;++d){i=c[d]*s,e.setItemLayout(a[0].indices[d],{layerIndex:0,x:l[0][d][0],y0:i,y:l[0][d][1]*s});for(var f=1;f<y;++f)i+=l[f-1][d][1]*s,e.setItemLayout(a[f].indices[d],{layerIndex:f,x:l[f][d][0],y0:i,y:l[f][d][1]*s})}}function computeBaseline(e){for(var t=e.length,r=e[0].length,i=[],n=[],a=0,o={},u=0;u<r;++u){for(var l=0,m=0;l<t;++l)m+=e[l][u][1];m>a&&(a=m),i.push(m)}for(var c=0;c<r;++c)n[c]=(a-i[c])/2;a=0;for(var s=0;s<r;++s){var y=i[s]+n[s];y>a&&(a=y)}return o.y0=n,o.max=a,o}module.exports=_default;
//# sourceMappingURL=/sm/ad0ea6035c9f9cb43705779eae7b806d4c78d6948871d629f22fc8524eac4c58.map