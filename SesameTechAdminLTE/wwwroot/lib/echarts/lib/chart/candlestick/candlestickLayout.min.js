/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/candlestick/candlestickLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _graphic=require("../../util/graphic"),subPixelOptimize=_graphic.subPixelOptimize,createRenderPlanner=require("../helper/createRenderPlanner"),_number=require("../../util/number"),parsePercent=_number.parsePercent,_util=require("zrender/lib/core/util"),retrieve2=_util.retrieve2,LargeArr="undefined"!=typeof Float32Array?Float32Array:Array,_default={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),a=calculateCandleWidth(e,r),i=0,n=1,u=["x","y"],l=r.mapDimension(u[i]),s=r.mapDimension(u[n],!0),o=s[0],g=s[1],c=s[2],p=s[3];if(r.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),!(null==l||s.length<4))return{progress:e.pipelineContext.large?function(e,r){var a,u,s=new LargeArr(4*e.count),d=0,h=[],N=[];for(;null!=(u=e.next());){var m=r.get(l,u),x=r.get(o,u),P=r.get(g,u),f=r.get(c,u),b=r.get(p,u);isNaN(m)||isNaN(f)||isNaN(b)?(s[d++]=NaN,d+=3):(s[d++]=getSign(r,u,x,P,g),h[i]=m,h[n]=f,a=t.dataToPoint(h,null,N),s[d++]=a?a[0]:NaN,s[d++]=a?a[1]:NaN,h[n]=b,a=t.dataToPoint(h,null,N),s[d++]=a?a[1]:NaN)}r.setLayout("largePoints",s)}:function(e,r){var u;for(;null!=(u=e.next());){var s=r.get(l,u),d=r.get(o,u),h=r.get(g,u),N=r.get(c,u),m=r.get(p,u),x=Math.min(d,h),P=Math.max(d,h),f=M(x,s),b=M(P,s),v=M(N,s),y=M(m,s),_=[];W(_,b,0),W(_,f,1),_.push(A(y),A(b),A(v),A(f)),r.setItemLayout(u,{sign:getSign(r,u,d,h,g),initBaseline:d>h?b[n]:f[n],ends:_,brushRect:z(N,m,s)})}function M(e,r){var a=[];return a[i]=r,a[n]=e,isNaN(r)||isNaN(e)?[NaN,NaN]:t.dataToPoint(a)}function W(e,t,r){var n=t.slice(),u=t.slice();n[i]=subPixelOptimize(n[i]+a/2,1,!1),u[i]=subPixelOptimize(u[i]-a/2,1,!0),r?e.push(n,u):e.push(u,n)}function z(e,t,r){var u=M(e,r),l=M(t,r);return u[i]-=a/2,l[i]-=a/2,{x:u[0],y:u[1],width:n?a:l[0]-u[0],height:n?l[1]-u[1]:a}}function A(e){return e[i]=subPixelOptimize(e[i],1),e}}}}};function getSign(e,t,r,a,i){return r>a?-1:r<a?1:t>0?e.get(i,t-1)<=a?1:-1:1}function calculateCandleWidth(e,t){var r,a=e.getBaseAxis(),i="category"===a.type?a.getBandWidth():(r=a.getExtent(),Math.abs(r[1]-r[0])/t.count()),n=parsePercent(retrieve2(e.get("barMaxWidth"),i),i),u=parsePercent(retrieve2(e.get("barMinWidth"),1),i),l=e.get("barWidth");return null!=l?parsePercent(l,i):Math.max(Math.min(i/2,n),u)}module.exports=_default;
//# sourceMappingURL=/sm/860d53c9a5037b4def5d183636b0cefa98bfe621f7600c82505df1463d839e3d.map