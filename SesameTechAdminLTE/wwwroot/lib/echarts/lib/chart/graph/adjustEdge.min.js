/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/graph/adjustEdge.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var curveTool=require("zrender/lib/core/curve"),vec2=require("zrender/lib/core/vector"),_graphHelper=require("./graphHelper"),getSymbolSize=_graphHelper.getSymbolSize,v1=[],v2=[],v3=[],quadraticAt=curveTool.quadraticAt,v2DistSquare=vec2.distSquare,mathAbs=Math.abs;function intersectCurveCircle(e,r,c){for(var a,v=e[0],i=e[1],o=e[2],t=1/0,u=c*c,l=.1,n=.1;n<=.9;n+=.1){v1[0]=quadraticAt(v[0],i[0],o[0],n),v1[1]=quadraticAt(v[1],i[1],o[1],n),(S=mathAbs(v2DistSquare(v1,r)-u))<t&&(t=S,a=n)}for(var d=0;d<32;d++){var s=a+l;v2[0]=quadraticAt(v[0],i[0],o[0],a),v2[1]=quadraticAt(v[1],i[1],o[1],a),v3[0]=quadraticAt(v[0],i[0],o[0],s),v3[1]=quadraticAt(v[1],i[1],o[1],s);var S=v2DistSquare(v2,r)-u;if(mathAbs(S)<.01)break;var y=v2DistSquare(v3,r)-u;l/=2,S<0?y>=0?a+=l:a-=l:y>=0?a-=l:a+=l}return a}function _default(e,r){var c=[],a=curveTool.quadraticSubdivide,v=[[],[],[]],i=[[],[]],o=[];r/=2,e.eachEdge(function(e,t){var u=e.getLayout(),l=e.getVisual("fromSymbol"),n=e.getVisual("toSymbol");u.__original||(u.__original=[vec2.clone(u[0]),vec2.clone(u[1])],u[2]&&u.__original.push(vec2.clone(u[2])));var d=u.__original;if(null!=u[2]){if(vec2.copy(v[0],d[0]),vec2.copy(v[1],d[2]),vec2.copy(v[2],d[1]),l&&"none"!==l){var s=getSymbolSize(e.node1),S=intersectCurveCircle(v,d[0],s*r);a(v[0][0],v[1][0],v[2][0],S,c),v[0][0]=c[3],v[1][0]=c[4],a(v[0][1],v[1][1],v[2][1],S,c),v[0][1]=c[3],v[1][1]=c[4]}if(n&&"none"!==n){s=getSymbolSize(e.node2),S=intersectCurveCircle(v,d[1],s*r);a(v[0][0],v[1][0],v[2][0],S,c),v[1][0]=c[1],v[2][0]=c[2],a(v[0][1],v[1][1],v[2][1],S,c),v[1][1]=c[1],v[2][1]=c[2]}vec2.copy(u[0],v[0]),vec2.copy(u[1],v[2]),vec2.copy(u[2],v[1])}else{if(vec2.copy(i[0],d[0]),vec2.copy(i[1],d[1]),vec2.sub(o,i[1],i[0]),vec2.normalize(o,o),l&&"none"!==l){s=getSymbolSize(e.node1);vec2.scaleAndAdd(i[0],i[0],o,s*r)}if(n&&"none"!==n){s=getSymbolSize(e.node2);vec2.scaleAndAdd(i[1],i[1],o,-s*r)}vec2.copy(u[0],i[0]),vec2.copy(u[1],i[1])}})}module.exports=_default;
//# sourceMappingURL=/sm/04b97306df70f93c6db93f130c1eabd1dad4ad04e57fc0eaa82ed0a213c07665.map