/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/heatmap/HeatmapLayer.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),GRADIENT_LEVELS=256;function Heatmap(){var t=zrUtil.createCanvas();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Heatmap.prototype={update:function(t,a,i,e,r,h){var n=this._getBrush(),s=this._getGradient(t,r,"inRange"),l=this._getGradient(t,r,"outOfRange"),o=this.pointSize+this.blurSize,u=this.canvas,g=u.getContext("2d"),d=t.length;u.width=a,u.height=i;for(var p=0;p<d;++p){var v=t[p],c=v[0],f=v[1],_=e(v[2]);g.globalAlpha=_,g.drawImage(n,c-o,f-o)}if(!u.width||!u.height)return u;for(var m=g.getImageData(0,0,u.width,u.height),z=m.data,S=0,b=z.length,w=this.minOpacity,C=this.maxOpacity-w;S<b;){_=z[S+3]/256;var x=4*Math.floor(_*(GRADIENT_LEVELS-1));if(_>0){var y=h(_)?s:l;_>0&&(_=_*C+w),z[S++]=y[x],z[S++]=y[x+1],z[S++]=y[x+2],z[S++]=y[x+3]*_*256}else S+=4}return g.putImageData(m,0,0),u},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=zrUtil.createCanvas()),a=this.pointSize+this.blurSize,i=2*a;t.width=i,t.height=i;var e=t.getContext("2d");return e.clearRect(0,0,i,i),e.shadowOffsetX=i,e.shadowBlur=this.blurSize,e.shadowColor="#000",e.beginPath(),e.arc(-a,a,this.pointSize,0,2*Math.PI,!0),e.closePath(),e.fill(),t},_getGradient:function(t,a,i){for(var e=this._gradientPixels,r=e[i]||(e[i]=new Uint8ClampedArray(1024)),h=[0,0,0,0],n=0,s=0;s<256;s++)a[i](s/255,!0,h),r[n++]=h[0],r[n++]=h[1],r[n++]=h[2],r[n++]=h[3];return r}};var _default=Heatmap;module.exports=_default;
//# sourceMappingURL=/sm/4098a849a9419308ff25ecb435957f711a86c35f3f4b35b5c7529bf0e5f52b95.map