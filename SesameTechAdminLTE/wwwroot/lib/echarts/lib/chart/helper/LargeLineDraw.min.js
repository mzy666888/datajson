/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/chart/helper/LargeLineDraw.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var graphic=require("../../util/graphic"),IncrementalDisplayable=require("zrender/lib/graphic/IncrementalDisplayable"),lineContain=require("zrender/lib/contain/line"),quadraticContain=require("zrender/lib/contain/quadratic"),LargeLineShape=graphic.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,n){var r=n.segs,t=n.curveness;if(n.polyline)for(var a=0;a<r.length;){var i=r[a++];if(i>0){e.moveTo(r[a++],r[a++]);for(var l=1;l<i;l++)e.lineTo(r[a++],r[a++])}}else for(a=0;a<r.length;){var o=r[a++],s=r[a++],c=r[a++],u=r[a++];if(e.moveTo(o,s),t>0){var h=(o+c)/2-(s-u)*t,g=(s+u)/2-(c-o)*t;e.quadraticCurveTo(h,g,c,u)}else e.lineTo(c,u)}},findDataIndex:function(e,n){var r=this.shape,t=r.segs,a=r.curveness;if(r.polyline)for(var i=0,l=0;l<t.length;){var o=t[l++];if(o>0)for(var s=t[l++],c=t[l++],u=1;u<o;u++){var h=t[l++],g=t[l++];if(lineContain.containStroke(s,c,h,g))return i}i++}else for(i=0,l=0;l<t.length;){s=t[l++],c=t[l++],h=t[l++],g=t[l++];if(a>0){var d=(s+h)/2-(c-g)*a,p=(c+g)/2-(h-s)*a;if(quadraticContain.containStroke(s,c,d,p,h,g))return i}else if(lineContain.containStroke(s,c,h,g))return i;i++}return-1}});function LargeLineDraw(){this.group=new graphic.Group}var largeLineProto=LargeLineDraw.prototype;largeLineProto.isPersistent=function(){return!this._incremental},largeLineProto.updateData=function(e){this.group.removeAll();var n=new LargeLineShape({rectHover:!0,cursor:"default"});n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e),this.group.add(n),this._incremental=null},largeLineProto.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new IncrementalDisplayable({silent:!0})),this.group.add(this._incremental)):this._incremental=null},largeLineProto.incrementalUpdate=function(e,n){var r=new LargeLineShape;r.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(r,n,!!this._incremental),this._incremental?this._incremental.addDisplayable(r,!0):(r.rectHover=!0,r.cursor="default",r.__startIndex=e.start,this.group.add(r))},largeLineProto.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},largeLineProto._setCommon=function(e,n,r){var t=n.hostModel;e.setShape({polyline:t.get("polyline"),curveness:t.get("lineStyle.curveness")}),e.useStyle(t.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=n.getVisual("color");a&&e.setStyle("stroke",a),e.setStyle("fill"),r||(e.seriesIndex=t.seriesIndex,e.on("mousemove",function(n){e.dataIndex=null;var r=e.findDataIndex(n.offsetX,n.offsetY);r>0&&(e.dataIndex=r+e.__startIndex)}))},largeLineProto._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var _default=LargeLineDraw;module.exports=_default;
//# sourceMappingURL=/sm/f5b0bf3f9807ce6e2f2b93cb58665d559fb50812027d641e8703e160e232a61f.map