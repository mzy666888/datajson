/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/layout/barPolar.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),_number=require("../util/number"),parsePercent=_number.parsePercent,_dataStackHelper=require("../data/helper/dataStackHelper"),isDimensionStacked=_dataStackHelper.isDimensionStacked;function getSeriesStackId(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function getAxisKey(t,e){return e.dim+t.model.componentIndex}function barLayoutPolar(t,e,a){var i={},r=calRadialBar(zrUtil.filter(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),a=t.coordinateSystem,n=a.getBaseAxis(),d=getAxisKey(a,n),o=getSeriesStackId(t),s=r[d][o],c=s.offset,h=s.width,u=a.getOtherAxis(n),g=t.coordinateSystem.cx,l=t.coordinateSystem.cy,m=t.get("barMinHeight")||0,p=t.get("barMinAngle")||0;i[o]=i[o]||[];for(var y=e.mapDimension(u.dim),f=e.mapDimension(n.dim),S=isDimensionStacked(e,y),x="radius"!==n.dim||!t.get("roundCap",!0),v=u.getExtent()[0],b=0,W=e.count();b<W;b++){var k=e.get(y,b),w=e.get(f,b);if(!isNaN(k)){var M,A,P,_,z=k>=0?"p":"n",I=v;if(S&&(i[o][w]||(i[o][w]={p:v,n:v}),I=i[o][w][z]),"radius"===u.dim){var B=u.dataToRadius(k)-v,D=n.dataToAngle(w);Math.abs(B)<m&&(B=(B<0?-1:1)*m),M=I,A=I+B,_=(P=D-c)-h,S&&(i[o][w][z]=A)}else{var U=u.dataToAngle(k,x)-v,T=n.dataToRadius(w);Math.abs(U)<p&&(U=(U<0?-1:1)*p),A=(M=T+c)+h,P=I,_=I+U,S&&(i[o][w][z]=_)}e.setItemLayout(b,{cx:g,cy:l,r0:M,r:A,startAngle:-P*Math.PI/180,endAngle:-_*Math.PI/180})}}}},this)}function calRadialBar(t,e){var a={};zrUtil.each(t,function(t,e){var i=t.getData(),r=t.coordinateSystem,n=r.getBaseAxis(),d=getAxisKey(r,n),o=n.getExtent(),s="category"===n.type?n.getBandWidth():Math.abs(o[1]-o[0])/i.count(),c=a[d]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=c.stacks;a[d]=c;var u=getSeriesStackId(t);h[u]||c.autoWidthCount++,h[u]=h[u]||{width:0,maxWidth:0};var g=parsePercent(t.get("barWidth"),s),l=parsePercent(t.get("barMaxWidth"),s),m=t.get("barGap"),p=t.get("barCategoryGap");g&&!h[u].width&&(g=Math.min(c.remainedWidth,g),h[u].width=g,c.remainedWidth-=g),l&&(h[u].maxWidth=l),null!=m&&(c.gap=m),null!=p&&(c.categoryGap=p)});var i={};return zrUtil.each(a,function(t,e){i[e]={};var a=t.stacks,r=t.bandWidth,n=parsePercent(t.categoryGap,r),d=parsePercent(t.gap,1),o=t.remainedWidth,s=t.autoWidthCount,c=(o-n)/(s+(s-1)*d);c=Math.max(c,0),zrUtil.each(a,function(t,e){var a=t.maxWidth;a&&a<c&&(a=Math.min(a,o),t.width&&(a=Math.min(a,t.width)),o-=a,t.width=a,s--)}),c=(o-n)/(s+(s-1)*d),c=Math.max(c,0);var h,u=0;zrUtil.each(a,function(t,e){t.width||(t.width=c),h=t,u+=t.width*(1+d)}),h&&(u-=h.width*d);var g=-u/2;zrUtil.each(a,function(t,a){i[e][a]=i[e][a]||{offset:g,width:t.width},g+=t.width*(1+d)})}),i}var _default=barLayoutPolar;module.exports=_default;
//# sourceMappingURL=/sm/3736f8eeceeae8f7cec5e1ddac2b928284bc5f492a3513fd2382eef1beb1e84d.map