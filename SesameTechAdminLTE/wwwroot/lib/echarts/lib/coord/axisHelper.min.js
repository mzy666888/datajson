/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/coord/axisHelper.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../config"),__DEV__=_config.__DEV__,zrUtil=require("zrender/lib/core/util"),OrdinalScale=require("../scale/Ordinal"),IntervalScale=require("../scale/Interval"),Scale=require("../scale/Scale"),numberUtil=require("../util/number"),_barGrid=require("../layout/barGrid"),prepareLayoutBarSeries=_barGrid.prepareLayoutBarSeries,makeColumnLayout=_barGrid.makeColumnLayout,retrieveColumnLayout=_barGrid.retrieveColumnLayout,BoundingRect=require("zrender/lib/core/BoundingRect");function getScaleExtent(e,t){var a,r,n,l=e.type,i=t.getMin(),o=t.getMax(),u=null!=i,c=null!=o,s=e.getExtent();"ordinal"===l?a=t.getCategories().length:(r=t.get("boundaryGap"),zrUtil.isArray(r)||(r=[r||0,r||0]),"boolean"==typeof r[0]&&(r=[0,0]),r[0]=numberUtil.parsePercent(r[0],1),r[1]=numberUtil.parsePercent(r[1],1),n=s[1]-s[0]||Math.abs(s[0])),null==i&&(i="ordinal"===l?a?0:NaN:s[0]-r[0]*n),null==o&&(o="ordinal"===l?a?a-1:NaN:s[1]+r[1]*n),"dataMin"===i?i=s[0]:"function"==typeof i&&(i=i({min:s[0],max:s[1]})),"dataMax"===o?o=s[1]:"function"==typeof o&&(o=o({min:s[0],max:s[1]})),(null==i||!isFinite(i))&&(i=NaN),(null==o||!isFinite(o))&&(o=NaN),e.setBlank(zrUtil.eqNaN(i)||zrUtil.eqNaN(o)||"ordinal"===l&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(i>0&&o>0&&!u&&(i=0),i<0&&o<0&&!c&&(o=0));var g=t.ecModel;if(g&&"time"===l){var x,m=prepareLayoutBarSeries("bar",g);if(zrUtil.each(m,function(e){x|=e.getBaseAxis()===t.axis}),x){var f=makeColumnLayout(m),v=adjustScaleForOverflow(i,o,t,f);i=v.min,o=v.max}}return[i,o]}function adjustScaleForOverflow(e,t,a,r){var n=a.axis.getExtent(),l=n[1]-n[0],i=retrieveColumnLayout(r,a.axis);if(void 0===i)return{min:e,max:t};var o=1/0;zrUtil.each(i,function(e){o=Math.min(e.offset,o)});var u=-1/0;zrUtil.each(i,function(e){u=Math.max(e.offset+e.width,u)}),o=Math.abs(o),u=Math.abs(u);var c=o+u,s=t-e,g=s/(1-(o+u)/l)-s;return{min:e-=g*(o/c),max:t+=g*(u/c)}}function niceScaleExtent(e,t){var a=getScaleExtent(e,t),r=null!=t.getMin(),n=null!=t.getMax(),l=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var i=e.type;e.setExtent(a[0],a[1]),e.niceExtent({splitNumber:l,fixMin:r,fixMax:n,minInterval:"interval"===i||"time"===i?t.get("minInterval"):null,maxInterval:"interval"===i||"time"===i?t.get("maxInterval"):null});var o=t.get("interval");null!=o&&e.setInterval&&e.setInterval(o)}function createScaleByModel(e,t){if(t=t||e.get("type"))switch(t){case"category":return new OrdinalScale(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new IntervalScale;default:return(Scale.getClass(t)||IntervalScale).create(e)}}function ifAxisCrossZero(e){var t=e.scale.getExtent(),a=t[0],r=t[1];return!(a>0&&r>0||a<0&&r<0)}function makeLabelFormatter(e){var t,a=e.getLabelModel().get("formatter"),r="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof a?(t=a,a=function(a){return a=e.scale.getLabel(a),t.replace("{value}",null!=a?a:"")}):"function"==typeof a?function(t,n){return null!=r&&(n=t-r),a(getAxisRawValue(e,t),n)}:function(t){return e.scale.getLabel(t)}}function getAxisRawValue(e,t){return"category"===e.type?e.scale.getLabel(t):t}function estimateLabelUnionRect(e){var t=e.model,a=e.scale;if(t.get("axisLabel.show")&&!a.isBlank()){var r,n,l="category"===e.type,i=a.getExtent();n=l?a.count():(r=a.getTicks()).length;var o,u=e.getLabelModel(),c=makeLabelFormatter(e),s=1;n>40&&(s=Math.ceil(n/40));for(var g=0;g<n;g+=s){var x=c(r?r[g]:i[0]+g),m=rotateTextRect(u.getTextRect(x),u.get("rotate")||0);o?o.union(m):o=m}return o}}function rotateTextRect(e,t){var a=t*Math.PI/180,r=e.plain(),n=r.width,l=r.height,i=n*Math.cos(a)+l*Math.sin(a),o=n*Math.sin(a)+l*Math.cos(a);return new BoundingRect(r.x,r.y,i,o)}function getOptionCategoryInterval(e){var t=e.get("interval");return null==t?"auto":t}function shouldShowAllLabels(e){return"category"===e.type&&0===getOptionCategoryInterval(e.getLabelModel())}require("../scale/Time"),require("../scale/Log"),exports.getScaleExtent=getScaleExtent,exports.niceScaleExtent=niceScaleExtent,exports.createScaleByModel=createScaleByModel,exports.ifAxisCrossZero=ifAxisCrossZero,exports.makeLabelFormatter=makeLabelFormatter,exports.getAxisRawValue=getAxisRawValue,exports.estimateLabelUnionRect=estimateLabelUnionRect,exports.getOptionCategoryInterval=getOptionCategoryInterval,exports.shouldShowAllLabels=shouldShowAllLabels;
//# sourceMappingURL=/sm/486b319cc26f14e179400fd6c2b6233804249746ff95832d584e85a80d8a4db0.map