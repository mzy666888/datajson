/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/coord/geo/geoCreator.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../../config"),__DEV__=_config.__DEV__,echarts=require("../../echarts"),zrUtil=require("zrender/lib/core/util"),Geo=require("./Geo"),layout=require("../../util/layout"),numberUtil=require("../../util/number"),geoSourceManager=require("./geoSourceManager"),mapDataStorage=require("./mapDataStorage");function resizeGeo(e,t){var r=e.get("boundingCoords");if(null!=r){var i=r[0],a=r[1];isNaN(i[0])||isNaN(i[1])||isNaN(a[0])||isNaN(a[1])||this.setBoundingRect(i[0],i[1],a[0]-i[0],a[1]-i[1])}var o,n=this.getBoundingRect(),s=e.get("layoutCenter"),g=e.get("layoutSize"),c=t.getWidth(),u=t.getHeight(),l=n.width/n.height*this.aspectScale,h=!1;if(s&&g&&(s=[numberUtil.parsePercent(s[0],c),numberUtil.parsePercent(s[1],u)],g=numberUtil.parsePercent(g,Math.min(c,u)),isNaN(s[0])||isNaN(s[1])||isNaN(g)||(h=!0)),h){var m={};l>1?(m.width=g,m.height=g/l):(m.height=g,m.width=g*l),m.y=s[1]-m.height/2,m.x=s[0]-m.width/2}else(o=e.getBoxLayoutParams()).aspect=l,m=layout.getLayoutRect(o,{width:c,height:u});this.setViewRect(m.x,m.y,m.width,m.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function setGeoCoords(e,t){zrUtil.each(t.get("geoCoord"),function(t,r){e.addGeoCoord(r,t)})}var geoCreator={dimensions:Geo.prototype.dimensions,create:function(e,t){var r=[];e.eachComponent("geo",function(e,i){var a=e.get("map"),o=e.get("aspectScale"),n=!0,s=mapDataStorage.retrieveMap(a);s&&s[0]&&"svg"===s[0].type?(null==o&&(o=1),n=!1):null==o&&(o=.75);var g=new Geo(a+i,a,e.get("nameMap"),n);g.aspectScale=o,g.zoomLimit=e.get("scaleLimit"),r.push(g),setGeoCoords(g,e),e.coordinateSystem=g,g.model=e,g.resize=resizeGeo,g.resize(e,t)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=r[t]}});var i={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}}),zrUtil.each(i,function(e,i){var a=zrUtil.map(e,function(e){return e.get("nameMap")}),o=new Geo(i,i,zrUtil.mergeAll(a));o.zoomLimit=zrUtil.retrieve.apply(null,zrUtil.map(e,function(e){return e.get("scaleLimit")})),r.push(o),o.resize=resizeGeo,o.aspectScale=e[0].get("aspectScale"),o.resize(e[0],t),zrUtil.each(e,function(e){e.coordinateSystem=o,setGeoCoords(o,e)})}),r},getFilledRegions:function(e,t,r){for(var i=(e||[]).slice(),a=zrUtil.createHashMap(),o=0;o<i.length;o++)a.set(i[o].name,i[o]);var n=geoSourceManager.load(t,r);return zrUtil.each(n.regions,function(e){var t=e.name;!a.get(t)&&i.push({name:t})}),i}};echarts.registerCoordinateSystem("geo",geoCreator);var _default=geoCreator;module.exports=_default;
//# sourceMappingURL=/sm/3af532477d0ff4f70670a86be03c9c3e3ddc96bd7fd3a6bd3329a62ceb656ddb.map