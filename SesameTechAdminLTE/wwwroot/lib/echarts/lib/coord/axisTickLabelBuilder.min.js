/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/coord/axisTickLabelBuilder.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),textContain=require("zrender/lib/contain/text"),_model=require("../util/model"),makeInner=_model.makeInner,_axisHelper=require("./axisHelper"),makeLabelFormatter=_axisHelper.makeLabelFormatter,getOptionCategoryInterval=_axisHelper.getOptionCategoryInterval,shouldShowAllLabels=_axisHelper.shouldShowAllLabels,inner=makeInner();function createAxisLabels(e){return"category"===e.type?makeCategoryLabels(e):makeRealNumberLabels(e)}function createAxisTicks(e,a){return"category"===e.type?makeCategoryTicks(e,a):{ticks:e.scale.getTicks()}}function makeCategoryLabels(e){var a=e.getLabelModel(),t=makeCategoryLabelsActually(e,a);return!a.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function makeCategoryLabelsActually(e,a){var t,r=getListCache(e,"labels"),l=getOptionCategoryInterval(a),n=listCacheGet(r,l);return n||listCacheSet(r,l,{labels:zrUtil.isFunction(l)?makeLabelsByCustomizedCategoryInterval(e,l):makeLabelsByNumericCategoryInterval(e,t="auto"===l?makeAutoCategoryInterval(e):l),labelCategoryInterval:t})}function makeCategoryTicks(e,a){var t,r,l=getListCache(e,"ticks"),n=getOptionCategoryInterval(a),o=listCacheGet(l,n);if(o)return o;if(a.get("show")&&!e.scale.isBlank()||(t=[]),zrUtil.isFunction(n))t=makeLabelsByCustomizedCategoryInterval(e,n,!0);else if("auto"===n){var i=makeCategoryLabelsActually(e,e.getLabelModel());r=i.labelCategoryInterval,t=zrUtil.map(i.labels,function(e){return e.tickValue})}else t=makeLabelsByNumericCategoryInterval(e,r=n,!0);return listCacheSet(l,n,{ticks:t,tickCategoryInterval:r})}function makeRealNumberLabels(e){var a=e.scale.getTicks(),t=makeLabelFormatter(e);return{labels:zrUtil.map(a,function(a,r){return{formattedLabel:t(a,r),rawLabel:e.scale.getLabel(a),tickValue:a}})}}function getListCache(e,a){return inner(e)[a]||(inner(e)[a]=[])}function listCacheGet(e,a){for(var t=0;t<e.length;t++)if(e[t].key===a)return e[t].value}function listCacheSet(e,a,t){return e.push({key:a,value:t}),t}function makeAutoCategoryInterval(e){var a=inner(e).autoInterval;return null!=a?a:inner(e).autoInterval=e.calculateCategoryInterval()}function calculateCategoryInterval(e){var a=fetchAutoCategoryIntervalCalculationParams(e),t=makeLabelFormatter(e),r=(a.axisRotate-a.labelRotate)/180*Math.PI,l=e.scale,n=l.getExtent(),o=l.count();if(n[1]-n[0]<1)return 0;var i=1;o>40&&(i=Math.max(1,Math.floor(o/40)));for(var s=n[0],u=e.dataToCoord(s+1)-e.dataToCoord(s),c=Math.abs(u*Math.cos(r)),g=Math.abs(u*Math.sin(r)),b=0,m=0;s<=n[1];s+=i){var C,v,k=textContain.getBoundingRect(t(s),a.font,"center","top");C=1.3*k.width,v=1.3*k.height,b=Math.max(b,C,7),m=Math.max(m,v,7)}var h=b/c,y=m/g;isNaN(h)&&(h=1/0),isNaN(y)&&(y=1/0);var L=Math.max(0,Math.floor(Math.min(h,y))),x=inner(e.model),f=e.getExtent(),I=x.lastAutoInterval,d=x.lastTickCount;return null!=I&&null!=d&&Math.abs(I-L)<=1&&Math.abs(d-o)<=1&&I>L&&x.axisExtend0===f[0]&&x.axisExtend1===f[1]?L=I:(x.lastTickCount=o,x.lastAutoInterval=L,x.axisExtend0=f[0],x.axisExtend1=f[1]),L}function fetchAutoCategoryIntervalCalculationParams(e){var a=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:a.get("rotate")||0,font:a.getFont()}}function makeLabelsByNumericCategoryInterval(e,a,t){var r=makeLabelFormatter(e),l=e.scale,n=l.getExtent(),o=e.getLabelModel(),i=[],s=Math.max((a||0)+1,1),u=n[0],c=l.count();0!==u&&s>1&&c/s>2&&(u=Math.round(Math.ceil(u/s)*s));var g=shouldShowAllLabels(e),b=o.get("showMinLabel")||g,m=o.get("showMaxLabel")||g;b&&u!==n[0]&&v(n[0]);for(var C=u;C<=n[1];C+=s)v(C);function v(e){i.push(t?e:{formattedLabel:r(e),rawLabel:l.getLabel(e),tickValue:e})}return m&&C-s!==n[1]&&v(n[1]),i}function makeLabelsByCustomizedCategoryInterval(e,a,t){var r=e.scale,l=makeLabelFormatter(e),n=[];return zrUtil.each(r.getTicks(),function(e){var o=r.getLabel(e);a(e,o)&&n.push(t?e:{formattedLabel:l(e),rawLabel:o,tickValue:e})}),n}exports.createAxisLabels=createAxisLabels,exports.createAxisTicks=createAxisTicks,exports.calculateCategoryInterval=calculateCategoryInterval;
//# sourceMappingURL=/sm/718aa1c236fa598a8bb86b5a8c5f9c8a9c719b4383c3e713387307486f7387cc.map