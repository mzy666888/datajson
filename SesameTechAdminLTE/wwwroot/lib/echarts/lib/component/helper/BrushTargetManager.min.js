/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/helper/BrushTargetManager.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../../config"),__DEV__=_config.__DEV__,zrUtil=require("zrender/lib/core/util"),graphic=require("../../util/graphic"),modelUtil=require("../../util/model"),brushHelper=require("./brushHelper"),each=zrUtil.each,indexOf=zrUtil.indexOf,curry=zrUtil.curry,COORD_CONVERTS=["dataToPoint","pointToData"],INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function BrushTargetManager(e,r,t){var n=this._targetInfoList=[],o={},a=parseFinder(r,e);each(targetInfoBuilders,function(e,r){(!t||!t.include||indexOf(t.include,r)>=0)&&e(a,n,o)})}var proto=BrushTargetManager.prototype;function formatMinMax(e){return e[0]>e[1]&&e.reverse(),e}function parseFinder(e,r){return modelUtil.parseFinder(e,r,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}proto.setOutputRanges=function(e,r){this.matchOutputRanges(e,r,function(e,r,t){if((e.coordRanges||(e.coordRanges=[])).push(r),!e.coordRange){e.coordRange=r;var n=coordConvert[e.brushType](0,t,r);e.__rangeOffset={offset:diffProcessor[e.brushType](n.values,e.range,[1,1]),xyMinMax:n.xyMinMax}}})},proto.matchOutputRanges=function(e,r,t){each(e,function(e){var n=this.findTargetInfo(e,r);n&&!0!==n&&zrUtil.each(n.coordSyses,function(n){var o=coordConvert[e.brushType](1,n,e.range);t(e,o.values,n,r)})},this)},proto.setInputRanges=function(e,r){each(e,function(e){var t=this.findTargetInfo(e,r);if(e.range=e.range||[],t&&!0!==t){e.panelId=t.panelId;var n=coordConvert[e.brushType](0,t.coordSys,e.coordRange),o=e.__rangeOffset;e.range=o?diffProcessor[e.brushType](n.values,o.offset,getScales(n.xyMinMax,o.xyMinMax)):n.values}},this)},proto.makePanelOpts=function(e,r){return zrUtil.map(this._targetInfoList,function(t){var n=t.getPanelRect();return{panelId:t.panelId,defaultBrushType:r&&r(t),clipPath:brushHelper.makeRectPanelClipPath(n),isTargetByCursor:brushHelper.makeRectIsTargetByCursor(n,e,t.coordSysModel),getLinearBrushOtherExtent:brushHelper.makeLinearBrushOtherExtent(n)}})},proto.controlSeries=function(e,r,t){var n=this.findTargetInfo(e,t);return!0===n||n&&indexOf(n.coordSyses,r.coordinateSystem)>=0},proto.findTargetInfo=function(e,r){for(var t=this._targetInfoList,n=parseFinder(r,e),o=0;o<t.length;o++){var a=t[o],i=e.panelId;if(i){if(a.panelId===i)return a}else for(o=0;o<targetInfoMatchers.length;o++)if(targetInfoMatchers[o](n,a))return a}return!0};var targetInfoBuilders={grid:function(e,r){var t=e.xAxisModels,n=e.yAxisModels,o=e.gridModels,a=zrUtil.createHashMap(),i={},s={};(t||n||o)&&(each(t,function(e){var r=e.axis.grid.model;a.set(r.id,r),i[r.id]=!0}),each(n,function(e){var r=e.axis.grid.model;a.set(r.id,r),s[r.id]=!0}),each(o,function(e){a.set(e.id,e),i[e.id]=!0,s[e.id]=!0}),a.each(function(e){var o=e.coordinateSystem,a=[];each(o.getCartesians(),function(e,r){(indexOf(t,e.getAxis("x").model)>=0||indexOf(n,e.getAxis("y").model)>=0)&&a.push(e)}),r.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:panelRectBuilder.grid,xAxisDeclared:i[e.id],yAxisDeclared:s[e.id]})}))},geo:function(e,r){each(e.geoModels,function(e){var t=e.coordinateSystem;r.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:t,coordSyses:[t],getPanelRect:panelRectBuilder.geo})})}},targetInfoMatchers=[function(e,r){var t=e.xAxisModel,n=e.yAxisModel,o=e.gridModel;return!o&&t&&(o=t.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===r.gridModel},function(e,r){var t=e.geoModel;return t&&t===r.geoModel}],panelRectBuilder={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,r=e.getBoundingRect().clone();return r.applyTransform(graphic.getTransform(e)),r}},coordConvert={lineX:curry(axisConvert,0),lineY:curry(axisConvert,1),rect:function(e,r,t){var n=r[COORD_CONVERTS[e]]([t[0][0],t[1][0]]),o=r[COORD_CONVERTS[e]]([t[0][1],t[1][1]]),a=[formatMinMax([n[0],o[0]]),formatMinMax([n[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(e,r,t){var n=[[1/0,-1/0],[1/0,-1/0]];return{values:zrUtil.map(t,function(t){var o=r[COORD_CONVERTS[e]](t);return n[0][0]=Math.min(n[0][0],o[0]),n[1][0]=Math.min(n[1][0],o[1]),n[0][1]=Math.max(n[0][1],o[0]),n[1][1]=Math.max(n[1][1],o[1]),o}),xyMinMax:n}}};function axisConvert(e,r,t,n){var o=t.getAxis(["x","y"][e]),a=formatMinMax(zrUtil.map([0,1],function(e){return r?o.coordToData(o.toLocalCoord(n[e])):o.toGlobalCoord(o.dataToCoord(n[e]))})),i=[];return i[e]=a,i[1-e]=[NaN,NaN],{values:a,xyMinMax:i}}var diffProcessor={lineX:curry(axisDiffProcessor,0),lineY:curry(axisDiffProcessor,1),rect:function(e,r,t){return[[e[0][0]-t[0]*r[0][0],e[0][1]-t[0]*r[0][1]],[e[1][0]-t[1]*r[1][0],e[1][1]-t[1]*r[1][1]]]},polygon:function(e,r,t){return zrUtil.map(e,function(e,n){return[e[0]-t[0]*r[n][0],e[1]-t[1]*r[n][1]]})}};function axisDiffProcessor(e,r,t,n){return[r[0]-n[e]*t[0],r[1]-n[e]*t[1]]}function getScales(e,r){var t=getSize(e),n=getSize(r),o=[t[0]/n[0],t[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function getSize(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var _default=BrushTargetManager;module.exports=_default;
//# sourceMappingURL=/sm/825f7d6d8e805301f81132ace42355eef4422b4274ba95078faea024e7ba375e.map