/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/calendar/CalendarView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var echarts=require("../../echarts"),zrUtil=require("zrender/lib/core/util"),graphic=require("../../util/graphic"),formatUtil=require("../../util/format"),numberUtil=require("../../util/number"),MONTH_TEXT={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},WEEK_TEXT={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]},_default=echarts.extendComponentView({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,i){var r=this.group;r.removeAll();var n=t.coordinateSystem,a=n.getRangeInfo(),o=n.getOrient();this._renderDayRect(t,a,r),this._renderLines(t,a,o,r),this._renderYearText(t,a,o,r),this._renderMonthText(t,o,r),this._renderWeekText(t,a,o,r)},_renderDayRect:function(t,e,i){for(var r=t.coordinateSystem,n=t.getModel("itemStyle").getItemStyle(),a=r.getCellWidth(),o=r.getCellHeight(),l=e.start.time;l<=e.end.time;l=r.getNextNDay(l,1).time){var s=r.dataToRect([l],!1).tl,g=new graphic.Rect({shape:{x:s[0],y:s[1],width:a,height:o},cursor:"default",style:n});i.add(g)}},_renderLines:function(t,e,i,r){var n=this,a=t.coordinateSystem,o=t.getModel("splitLine.lineStyle").getLineStyle(),l=t.get("splitLine.show"),s=o.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=e.start,h=0;g.time<=e.end.time;h++){f(g.formatedDate),0===h&&(g=a.getDateInfo(e.start.y+"-"+e.start.m));var d=g.date;d.setMonth(d.getMonth()+1),g=a.getDateInfo(d)}function f(e){n._firstDayOfMonth.push(a.getDateInfo(e)),n._firstDayPoints.push(a.dataToRect([e],!1).tl);var s=n._getLinePointsOfOneWeek(t,e,i);n._tlpoints.push(s[0]),n._blpoints.push(s[s.length-1]),l&&n._drawSplitline(s,o,r)}f(a.getNextNDay(e.end.time,1).formatedDate),l&&this._drawSplitline(n._getEdgesPoints(n._tlpoints,s,i),o,r),l&&this._drawSplitline(n._getEdgesPoints(n._blpoints,s,i),o,r)},_getEdgesPoints:function(t,e,i){var r=[t[0].slice(),t[t.length-1].slice()],n="horizontal"===i?0:1;return r[0][n]=r[0][n]-e/2,r[1][n]=r[1][n]+e/2,r},_drawSplitline:function(t,e,i){var r=new graphic.Polyline({z2:20,shape:{points:t},style:e});i.add(r)},_getLinePointsOfOneWeek:function(t,e,i){var r=t.coordinateSystem;e=r.getDateInfo(e);for(var n=[],a=0;a<7;a++){var o=r.getNextNDay(e.time,a),l=r.dataToRect([o.time],!1);n[2*o.day]=l.tl,n[2*o.day+1]=l["horizontal"===i?"bl":"tr"]}return n},_formatterLabel:function(t,e){return"string"==typeof t&&t?formatUtil.formatTplSimple(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,i,r,n){e=e.slice();var a=["center","bottom"];"bottom"===r?(e[1]+=n,a=["center","top"]):"left"===r?e[0]-=n:"right"===r?(e[0]+=n,a=["center","top"]):e[1]-=n;var o=0;return"left"!==r&&"right"!==r||(o=Math.PI/2),{rotation:o,position:e,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(t,e,i,r){var n=t.getModel("yearLabel");if(n.get("show")){var a=n.get("margin"),o=n.get("position");o||(o="horizontal"!==i?"top":"left");var l=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],s=(l[0][0]+l[1][0])/2,g=(l[0][1]+l[1][1])/2,h="horizontal"===i?0:1,d={top:[s,l[h][1]],bottom:[s,l[1-h][1]],left:[l[1-h][0],g],right:[l[h][0],g]},f=e.start.y;+e.end.y>+e.start.y&&(f=f+"-"+e.end.y);var p=n.get("formatter"),y={start:e.start.y,end:e.end.y,nameMap:f},c=this._formatterLabel(p,y),m=new graphic.Text({z2:30});graphic.setTextStyle(m.style,n,{text:c}),m.attr(this._yearTextPositionControl(m,d[o],i,o,a)),r.add(m)}},_monthTextPositionControl:function(t,e,i,r,n){var a="left",o="top",l=t[0],s=t[1];return"horizontal"===i?(s+=n,e&&(a="center"),"start"===r&&(o="bottom")):(l+=n,e&&(o="middle"),"start"===r&&(a="right")),{x:l,y:s,textAlign:a,textVerticalAlign:o}},_renderMonthText:function(t,e,i){var r=t.getModel("monthLabel");if(r.get("show")){var n=r.get("nameMap"),a=r.get("margin"),o=r.get("position"),l=r.get("align"),s=[this._tlpoints,this._blpoints];zrUtil.isString(n)&&(n=MONTH_TEXT[n.toUpperCase()]||[]);var g="start"===o?0:1,h="horizontal"===e?0:1;a="start"===o?-a:a;for(var d="center"===l,f=0;f<s[g].length-1;f++){var p=s[g][f].slice(),y=this._firstDayOfMonth[f];if(d){var c=this._firstDayPoints[f];p[h]=(c[h]+s[0][f+1][h])/2}var m=r.get("formatter"),_=n[+y.m-1],u={yyyy:y.y,yy:(y.y+"").slice(2),MM:y.m,M:+y.m,nameMap:_},x=this._formatterLabel(m,u),v=new graphic.Text({z2:30});zrUtil.extend(graphic.setTextStyle(v.style,r,{text:x}),this._monthTextPositionControl(p,d,e,o,a)),i.add(v)}}},_weekTextPositionControl:function(t,e,i,r,n){var a="center",o="middle",l=t[0],s=t[1],g="start"===i;return"horizontal"===e?(l=l+r+(g?1:-1)*n[0]/2,a=g?"right":"left"):(s=s+r+(g?1:-1)*n[1]/2,o=g?"bottom":"top"),{x:l,y:s,textAlign:a,textVerticalAlign:o}},_renderWeekText:function(t,e,i,r){var n=t.getModel("dayLabel");if(n.get("show")){var a=t.coordinateSystem,o=n.get("position"),l=n.get("nameMap"),s=n.get("margin"),g=a.getFirstDayOfWeek();zrUtil.isString(l)&&(l=WEEK_TEXT[l.toUpperCase()]||[]);var h=a.getNextNDay(e.end.time,7-e.lweek).time,d=[a.getCellWidth(),a.getCellHeight()];s=numberUtil.parsePercent(s,d["horizontal"===i?0:1]),"start"===o&&(h=a.getNextNDay(e.start.time,-(7+e.fweek)).time,s=-s);for(var f=0;f<7;f++){var p,y=a.getNextNDay(h,f),c=a.dataToRect([y.time],!1).center;p=Math.abs((f+g)%7);var m=new graphic.Text({z2:30});zrUtil.extend(graphic.setTextStyle(m.style,n,{text:l[p]}),this._weekTextPositionControl(c,i,o,s,d)),r.add(m)}}}});module.exports=_default;
//# sourceMappingURL=/sm/e3563c3856623d58ae19b977306364fde5100e068841cb2c40ac7b3b4df04b59.map