/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/marker/MarkAreaView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),colorUtil=require("zrender/lib/tool/color"),List=require("../../data/List"),numberUtil=require("../../util/number"),graphic=require("../../util/graphic"),markerHelper=require("./markerHelper"),MarkerView=require("./MarkerView"),markAreaTransform=function(e,t,r,a){var i=markerHelper.dataTransform(e,a[0]),n=markerHelper.dataTransform(e,a[1]),o=zrUtil.retrieve,l=i.coord,s=n.coord;l[0]=o(l[0],-1/0),l[1]=o(l[1],-1/0),s[0]=o(s[0],1/0),s[1]=o(s[1],1/0);var u=zrUtil.mergeAll([{},i,n]);return u.coord=[i.coord,n.coord],u.x0=i.x,u.y0=i.y,u.x1=n.x,u.y1=n.y,u};function isInifinity(e){return!isNaN(e)&&!isFinite(e)}function ifMarkLineHasOnlyDim(e,t,r,a){var i=1-e;return isInifinity(t[i])&&isInifinity(r[i])}function markAreaFilter(e,t){var r=t.coord[0],a=t.coord[1];return!("cartesian2d"!==e.type||!r||!a||!ifMarkLineHasOnlyDim(1,r,a,e)&&!ifMarkLineHasOnlyDim(0,r,a,e))||(markerHelper.dataFilter(e,{coord:r,x:t.x0,y:t.y0})||markerHelper.dataFilter(e,{coord:a,x:t.x1,y:t.y1}))}function getSingleMarkerEndPoint(e,t,r,a,i){var n,o=a.coordinateSystem,l=e.getItemModel(t),s=numberUtil.parsePercent(l.get(r[0]),i.getWidth()),u=numberUtil.parsePercent(l.get(r[1]),i.getHeight());if(isNaN(s)||isNaN(u)){if(a.getMarkerPosition)n=a.getMarkerPosition(e.getValues(r,t));else{var m=[g=e.get(r[0],t),p=e.get(r[1],t)];o.clampData&&o.clampData(m,m),n=o.dataToPoint(m,!0)}if("cartesian2d"===o.type){var c=o.getAxis("x"),d=o.getAxis("y"),g=e.get(r[0],t),p=e.get(r[1],t);isInifinity(g)?n[0]=c.toGlobalCoord(c.getExtent()["x0"===r[0]?0:1]):isInifinity(p)&&(n[1]=d.toGlobalCoord(d.getExtent()["y0"===r[1]?0:1]))}isNaN(s)||(n[0]=s),isNaN(u)||(n[1]=u)}else n=[s,u];return n}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];function createList(e,t,r){var a,i;e?(a=zrUtil.map(e&&e.dimensions,function(e){var r=t.getData(),a=r.getDimensionInfo(r.mapDimension(e))||{};return zrUtil.defaults({name:e},a)}),i=new List(zrUtil.map(["x0","y0","x1","y1"],function(e,t){return{name:e,type:a[t%2].type}}),r)):i=new List(a=[{name:"value",type:"float"}],r);var n=zrUtil.map(r.get("data"),zrUtil.curry(markAreaTransform,t,e,r));e&&(n=zrUtil.filter(n,zrUtil.curry(markAreaFilter,e)));var o=e?function(e,t,r,a){return e.coord[Math.floor(a/2)][a%2]}:function(e){return e.value};return i.initData(n,null,o),i.hasItemOption=!0,i}MarkerView.extend({type:"markArea",updateTransform:function(e,t,r){t.eachSeries(function(e){var t=e.markAreaModel;if(t){var a=t.getData();a.each(function(t){var i=zrUtil.map(dimPermutations,function(i){return getSingleMarkerEndPoint(a,t,i,e,r)});a.setItemLayout(t,i),a.getItemGraphicEl(t).setShape("points",i)})}},this)},renderSeries:function(e,t,r,a){var i=e.coordinateSystem,n=e.id,o=e.getData(),l=this.markerGroupMap,s=l.get(n)||l.set(n,{group:new graphic.Group});this.group.add(s.group),s.__keep=!0;var u=createList(i,e,t);t.setData(u),u.each(function(t){u.setItemLayout(t,zrUtil.map(dimPermutations,function(r){return getSingleMarkerEndPoint(u,t,r,e,a)})),u.setItemVisual(t,{color:o.getVisual("color")})}),u.diff(s.__data).add(function(e){var t=new graphic.Polygon({shape:{points:u.getItemLayout(e)}});u.setItemGraphicEl(e,t),s.group.add(t)}).update(function(e,r){var a=s.__data.getItemGraphicEl(r);graphic.updateProps(a,{shape:{points:u.getItemLayout(e)}},t,e),s.group.add(a),u.setItemGraphicEl(e,a)}).remove(function(e){var t=s.__data.getItemGraphicEl(e);s.group.remove(t)}).execute(),u.eachItemGraphicEl(function(e,r){var a=u.getItemModel(r),i=a.getModel("label"),n=a.getModel("emphasis.label"),o=u.getItemVisual(r,"color");e.useStyle(zrUtil.defaults(a.getModel("itemStyle").getItemStyle(),{fill:colorUtil.modifyAlpha(o,.4),stroke:o})),e.hoverStyle=a.getModel("emphasis.itemStyle").getItemStyle(),graphic.setLabelStyle(e.style,e.hoverStyle,i,n,{labelFetcher:t,labelDataIndex:r,defaultText:u.getName(r)||"",isRectText:!0,autoColor:o}),graphic.setHoverStyle(e,{}),e.dataModel=t}),s.__data=u,s.group.silent=t.get("silent")||e.get("silent")}});
//# sourceMappingURL=/sm/0fe85c1a16f4ad1462c7b62cad5b9c87761611cea12402175991e219dd9effac.map