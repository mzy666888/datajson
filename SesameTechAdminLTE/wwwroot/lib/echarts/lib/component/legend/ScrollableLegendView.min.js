/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/legend/ScrollableLegendView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),graphic=require("../../util/graphic"),layoutUtil=require("../../util/layout"),LegendView=require("./LegendView"),Group=graphic.Group,WH=["width","height"],XY=["x","y"],ScrollableLegendView=LegendView.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){ScrollableLegendView.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group),this._showController},resetInner:function(){ScrollableLegendView.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,r,i,o,a){var l=this;ScrollableLegendView.superCall(this,"renderInner",e,t,n,r,i,o,a);var g=this._controllerGroup,u=t.get("pageIconSize",!0);zrUtil.isArray(u)||(u=[u,u]),c("pagePrev",0);var p=t.getModel("pageTextStyle");function c(e,n){var i=e+"DataIndex",o=graphic.createIcon(t.get("pageIcons",!0)[t.getOrient().name][n],{onclick:zrUtil.bind(l._pageGo,l,i,t,r)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});o.name=e,g.add(o)}g.add(new graphic.Text({name:"pageText",style:{textFill:p.getTextColor(),font:p.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),c("pageNext",1)},layoutInner:function(e,t,n,r,i,o){var a=this.getSelectorGroup(),l=e.getOrient().index,g=WH[l],u=XY[l],p=WH[1-l],c=XY[1-l];i&&layoutUtil.box("horizontal",a,e.get("selectorItemGap",!0));var d=e.get("selectorButtonGap",!0),s=a.getBoundingRect(),h=[-s.x,-s.y],x=zrUtil.clone(n);i&&(x[g]=n[g]-s[g]-d);var I=this._layoutContentAndController(e,r,x,l,g,p,c);if(i){if("end"===o)h[l]+=I[g]+d;else{var _=s[g]+d;h[l]-=_,I[u]-=_}I[g]+=s[g]+d,h[1-l]+=I[c]+I[p]/2-s[p]/2,I[p]=Math.max(I[p],s[p]),I[c]=Math.min(I[c],s[c]+h[1-l]),a.attr("position",h)}return I},_layoutContentAndController:function(e,t,n,r,i,o,a){var l=this.getContentGroup(),g=this._containerGroup,u=this._controllerGroup;layoutUtil.box(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),layoutUtil.box("horizontal",u,e.get("pageButtonItemGap",!0));var p=l.getBoundingRect(),c=u.getBoundingRect(),d=this._showController=p[i]>n[i],s=[-p.x,-p.y];t||(s[r]=l.position[r]);var h=[0,0],x=[-c.x,-c.y],I=zrUtil.retrieve2(e.get("pageButtonGap",!0),e.get("itemGap",!0));d&&("end"===e.get("pageButtonPosition",!0)?x[r]+=n[i]-c[i]:h[r]+=c[i]+I);x[1-r]+=p[o]/2-c[o]/2,l.attr("position",s),g.attr("position",h),u.attr("position",x);var _={x:0,y:0};if(_[i]=d?n[i]:p[i],_[o]=Math.max(p[o],c[o]),_[a]=Math.min(0,c[a]+x[1-r]),g.__rectSize=n[i],d){var f={x:0,y:0};f[i]=Math.max(n[i]-c[i]-I,0),f[o]=_[o],g.setClipPath(new graphic.Rect({shape:f})),g.__rectSize=f[i]}else u.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var v=this._getPageInfo(e);return null!=v.pageIndex&&graphic.updateProps(l,{position:v.contentPosition},!!d&&e),this._updatePageInfoView(e,v),_},_pageGo:function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;zrUtil.each(["pagePrev","pageNext"],function(r){var i=null!=t[r+"DataIndex"],o=n.childOfName(r);o&&(o.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),o.cursor=i?"pointer":"default")});var r=n.childOfName("pageText"),i=e.get("pageFormatter"),o=t.pageIndex,a=null!=o?o+1:0,l=t.pageCount;r&&i&&r.setStyle("text",zrUtil.isString(i)?i.replace("{current}",a).replace("{total}",l):i({current:a,total:l}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,o=WH[i],a=XY[i],l=this._findTargetItemIndex(t),g=n.children(),u=g[l],p=g.length,c=p?1:0,d={contentPosition:n.position.slice(),pageCount:c,pageIndex:c-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return d;var s=f(u);d.contentPosition[i]=-s.s;for(var h=l+1,x=s,I=s,_=null;h<=p;++h)(!(_=f(g[h]))&&I.e>x.s+r||_&&!v(_,x.s))&&(x=I.i>x.i?I:_)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=x.i),++d.pageCount),I=_;for(h=l-1,x=s,I=s,_=null;h>=-1;--h)(_=f(g[h]))&&v(I,_.s)||!(x.i<I.i)||(I=x,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=x.i),++d.pageCount,++d.pageIndex),x=_;return d;function f(e){if(e){var t=e.getBoundingRect(),n=t[a]+e.position[i];return{s:n,e:n+t[o],i:e.__legendDataIndex}}}function v(e,t){return e.e>=t&&e.s<=t+r}},_findTargetItemIndex:function(e){var t,n,r=this.getContentGroup();return this._showController&&r.eachChild(function(r,i){var o=r.__legendDataIndex;null==n&&null!=o&&(n=i),o===e&&(t=i)}),null!=t?t:n}}),_default=ScrollableLegendView;module.exports=_default;
//# sourceMappingURL=/sm/13ffed8d5134bb33225b0331f55ce505046a8fada96c6b1b2fdebe7415190d94.map