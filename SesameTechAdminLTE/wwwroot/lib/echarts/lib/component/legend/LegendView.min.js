/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/legend/LegendView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../../config"),__DEV__=_config.__DEV__,echarts=require("../../echarts"),zrUtil=require("zrender/lib/core/util"),_symbol=require("../../util/symbol"),createSymbol=_symbol.createSymbol,graphic=require("../../util/graphic"),_listComponent=require("../helper/listComponent"),makeBackground=_listComponent.makeBackground,layoutUtil=require("../../util/layout"),curry=zrUtil.curry,each=zrUtil.each,Group=graphic.Group,_default=echarts.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new Group),this._backgroundEl,this.group.add(this._selectorGroup=new Group),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,r){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),n=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===n?"right":"left");var l=e.get("selector",!0),a=e.get("selectorPosition",!0);!l||a&&"auto"!==a||(a="horizontal"===n?"end":"start"),this.renderInner(o,e,t,r,l,n,a);var c=e.getBoxLayoutParams(),s={width:r.getWidth(),height:r.getHeight()},g=e.get("padding"),u=layoutUtil.getLayoutRect(c,s,g),d=this.layoutInner(e,o,u,i,l,a),h=layoutUtil.getLayoutRect(zrUtil.defaults({width:d.width,height:d.height},c),s,g);this.group.attr("position",[h.x-d.x,h.y-d.y]),this.group.add(this._backgroundEl=makeBackground(d,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,r,i,o,n,l){var a=this.getContentGroup(),c=zrUtil.createHashMap(),s=t.get("selectedMode"),g=[];r.eachRawSeries(function(e){!e.get("legendHoverLink")&&g.push(e.id)}),each(t.getData(),function(o,n){var l=o.get("name");if(this.newlineDisabled||""!==l&&"\n"!==l){var u=r.getSeriesByName(l)[0];if(!c.get(l))if(u){var d=u.getData(),h=d.getVisual("color"),p=d.getVisual("borderColor");"function"==typeof h&&(h=h(u.getDataParams(0))),"function"==typeof p&&(p=p(u.getDataParams(0)));var y=d.getVisual("legendSymbol")||"roundRect",m=d.getVisual("symbol");this._createItem(l,n,o,t,y,m,e,h,p,s).on("click",curry(dispatchSelectAction,l,i)).on("mouseover",curry(dispatchHighlightAction,u.name,null,i,g)).on("mouseout",curry(dispatchDownplayAction,u.name,null,i,g)),c.set(l,!0)}else r.eachRawSeries(function(r){if(!c.get(l)&&r.legendDataProvider){var a=r.legendDataProvider(),u=a.indexOfName(l);if(u<0)return;var d=a.getItemVisual(u,"color"),h=a.getItemVisual(u,"borderColor");this._createItem(l,n,o,t,"roundRect",null,e,d,h,s).on("click",curry(dispatchSelectAction,l,i)).on("mouseover",curry(dispatchHighlightAction,null,l,i,g)).on("mouseout",curry(dispatchDownplayAction,null,l,i,g)),c.set(l,!0)}},this)}else a.add(new Group({newline:!0}))},this),o&&this._createSelector(o,t,i,n,l)},_createSelector:function(e,t,r,i,o){var n=this.getSelectorGroup();each(e,function(e){!function(e){var i=e.type,o=new graphic.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});n.add(o);var l=t.getModel("selectorLabel"),a=t.getModel("emphasis.selectorLabel");graphic.setLabelStyle(o.style,o.hoverStyle={},l,a,{defaultText:e.title,isRectText:!1}),graphic.setHoverStyle(o)}(e)})},_createItem:function(e,t,r,i,o,n,l,a,c,s){var g=i.get("itemWidth"),u=i.get("itemHeight"),d=i.get("inactiveColor"),h=i.get("inactiveBorderColor"),p=i.get("symbolKeepAspect"),y=i.getModel("itemStyle"),m=i.isSelected(e),f=new Group,v=r.getModel("textStyle"),S=r.get("icon"),_=r.getModel("tooltip"),x=_.parentModel,b=createSymbol(o=S||o,0,0,g,u,m?a:d,null==p||p);if(f.add(setSymbolStyle(b,o,y,c,h,m)),!S&&n&&(n!==o||"none"===n)){var w=.8*u;"none"===n&&(n="circle");var G=createSymbol(n,(g-w)/2,(u-w)/2,w,w,m?a:d,null==p||p);f.add(setSymbolStyle(G,n,y,c,h,m))}var A="left"===l?g+5:-5,I=l,C=i.get("formatter"),k=e;"string"==typeof C&&C?k=C.replace("{name}",null!=e?e:""):"function"==typeof C&&(k=C(e)),f.add(new graphic.Text({style:graphic.setTextStyle({},v,{text:k,x:A,y:u/2,textFill:m?v.getTextColor():d,textAlign:I,textVerticalAlign:"middle"})}));var D=new graphic.Rect({shape:f.getBoundingRect(),invisible:!0,tooltip:_.get("show")?zrUtil.extend({content:e,formatter:x.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},_.option):null});return f.add(D),f.eachChild(function(e){e.silent=!0}),D.silent=!s,this.getContentGroup().add(f),graphic.setHoverStyle(f),f.__legendDataIndex=t,f},layoutInner:function(e,t,r,i,o,n){var l=this.getContentGroup(),a=this.getSelectorGroup();layoutUtil.box(e.get("orient"),l,e.get("itemGap"),r.width,r.height);var c=l.getBoundingRect(),s=[-c.x,-c.y];if(o){layoutUtil.box("horizontal",a,e.get("selectorItemGap",!0));var g=a.getBoundingRect(),u=[-g.x,-g.y],d=e.get("selectorButtonGap",!0),h=e.getOrient().index,p=0===h?"width":"height",y=0===h?"height":"width",m=0===h?"y":"x";"end"===n?u[h]+=c[p]+d:s[h]+=g[p]+d,u[1-h]+=c[y]/2-g[y]/2,a.attr("position",u),l.attr("position",s);var f={x:0,y:0};return f[p]=c[p]+d+g[p],f[y]=Math.max(c[y],g[y]),f[m]=Math.min(0,g[m]+u[1-h]),f}return l.attr("position",s),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function setSymbolStyle(e,t,r,i,o,n){var l;return"line"!==t&&t.indexOf("empty")<0?(l=r.getItemStyle(),e.style.stroke=i,n||(l.stroke=o)):l=r.getItemStyle(["borderWidth","borderColor"]),e.setStyle(l)}function dispatchSelectAction(e,t){t.dispatchAction({type:"legendToggleSelect",name:e})}function dispatchHighlightAction(e,t,r,i){var o=r.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function dispatchDownplayAction(e,t,r,i){var o=r.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}module.exports=_default;
//# sourceMappingURL=/sm/df55578ce735a537d06b9a7f05b23c4e91f82c89d785c2122c159b2c3d81fd65.map