/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/toolbox/feature/DataZoom.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var echarts=require("../../../echarts"),zrUtil=require("zrender/lib/core/util"),BrushController=require("../../helper/BrushController"),BrushTargetManager=require("../../helper/BrushTargetManager"),history=require("../../dataZoom/history"),sliderMove=require("../../helper/sliderMove"),lang=require("../../../lang"),featureManager=require("../featureManager");require("../../dataZoomSelect");var dataZoomLang=lang.toolbox.dataZoom,each=zrUtil.each,DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";function DataZoom(e,t,o){(this._brushController=new BrushController(o.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount(),this._isZoomActive}DataZoom.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:zrUtil.clone(dataZoomLang.title)};var proto=DataZoom.prototype;proto.render=function(e,t,o,r){this.model=e,this.ecModel=t,this.api=o,updateZoomBtnStatus(e,t,this,r,o),updateBackBtnStatus(e,t)},proto.onclick=function(e,t,o){handlers[o].call(this)},proto.remove=function(e,t){this._brushController.unmount()},proto.dispose=function(e,t){this._brushController.dispose()};var handlers={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(history.pop(this.ecModel))}};function retrieveAxisSetting(e){var t={};return zrUtil.each(["xAxisIndex","yAxisIndex"],function(o){t[o]=e[o],null==t[o]&&(t[o]="all"),(!1===t[o]||"none"===t[o])&&(t[o]=[])}),t}function updateBackBtnStatus(e,t){e.setIconStatus("back",history.count(t)>1?"emphasis":"normal")}function updateZoomBtnStatus(e,t,o,r,a){var i=o._isZoomActive;r&&"takeGlobalCursor"===r.type&&(i="dataZoomSelect"===r.key&&r.dataZoomSelectActive),o._isZoomActive=i,e.setIconStatus("zoom",i?"emphasis":"normal");var n=new BrushTargetManager(retrieveAxisSetting(e.option),t,{include:["grid"]});o._brushController.setPanels(n.makePanelOpts(a,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"})).enableBrush(!!i&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}proto._onBrush=function(e,t){if(t.isEnd&&e.length){var o={},r=this.ecModel;this._brushController.updateCovers([]),new BrushTargetManager(retrieveAxisSetting(this.model.option),r,{include:["grid"]}).matchOutputRanges(e,r,function(e,t,o){if("cartesian2d"===o.type){var r=e.brushType;"rect"===r?(a("x",o,t[0]),a("y",o,t[1])):a({lineX:"x",lineY:"y"}[r],o,t)}}),history.push(r,o),this._dispatchZoomAction(o)}function a(e,t,a){var i=t.getAxis(e),n=i.model,l=function(e,t,o){var r;return o.eachComponent({mainType:"dataZoom",subType:"select"},function(o){o.getAxisModel(e,t.componentIndex)&&(r=o)}),r}(e,n,r),s=l.findRepresentativeAxisProxy(n).getMinMaxSpan();null==s.minValueSpan&&null==s.maxValueSpan||(a=sliderMove(0,a.slice(),i.scale.getExtent(),0,s.minValueSpan,s.maxValueSpan)),l&&(o[l.id]={dataZoomId:l.id,startValue:a[0],endValue:a[1]})}},proto._dispatchZoomAction=function(e){var t=[];each(e,function(e,o){t.push(zrUtil.clone(e))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},featureManager.register("dataZoom",DataZoom),echarts.registerPreprocessor(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);zrUtil.isArray(t)||(e.dataZoom=t=[t]);var o=e.toolbox;if(o&&(zrUtil.isArray(o)&&(o=o[0]),o&&o.feature)){var r=o.feature.dataZoom;a("xAxis",r),a("yAxis",r)}}function a(o,r){if(r){var a=o+"Index",i=r[a];null==i||"all"===i||zrUtil.isArray(i)||(i=!1===i||"none"===i?[]:[i]),function(t,o){var r=e[t];zrUtil.isArray(r)||(r=r?[r]:[]);each(r,o)}(o,function(e,n){if(null==i||"all"===i||-1!==zrUtil.indexOf(i,n)){var l={type:"select",$fromToolbox:!0,filterMode:r.filterMode||"filter",id:DATA_ZOOM_ID_BASE+o+n};l[a]=n,t.push(l)}})}}});var _default=DataZoom;module.exports=_default;
//# sourceMappingURL=/sm/02387c0fe3809e65b1d887e1cea5e47ea4d6927dfde3c3742b3971b35a70aee4.map