/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/visualMap/PiecewiseView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),VisualMapView=require("./VisualMapView"),graphic=require("../../util/graphic"),_symbol=require("../../util/symbol"),createSymbol=_symbol.createSymbol,layout=require("../../util/layout"),helper=require("./helper"),PiecewiseVisualMapView=VisualMapView.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,i=t.get("textGap"),l=t.textStyleModel,r=l.getFont(),a=l.getTextColor(),o=this._getItemAlign(),n=t.itemSize,s=this._getViewData(),d=s.endsText,u=zrUtil.retrieve(t.get("showLabel",!0),!d);d&&this._renderEndsText(e,d[0],n,u,o),zrUtil.each(s.viewPieceList,function(l){var s=l.piece,d=new graphic.Group;d.onclick=zrUtil.bind(this._onItemClick,this,s),this._enableHoverLink(d,l.indexInModelPieceList);var c=t.getRepresentValue(s);if(this._createItemSymbol(d,c,[0,0,n[0],n[1]]),u){var h=this.visualMapModel.getValueState(c);d.add(new graphic.Text({style:{x:"right"===o?-i:n[0]+i,y:n[1]/2,text:s.text,textVerticalAlign:"middle",textAlign:o,textFont:r,textFill:a,opacity:"outOfRange"===h?.5:1}}))}e.add(d)},this),d&&this._renderEndsText(e,d[1],n,u,o),layout.box(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function i(e){var i=this.visualMapModel;i.option.hoverLink&&this.api.dispatchAction({type:e,batch:helper.makeHighDownBatch(i.findTargetDataIndices(t),i)})}e.on("mouseover",zrUtil.bind(i,this,"highlight")).on("mouseout",zrUtil.bind(i,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return helper.getItemAlign(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},_renderEndsText:function(e,t,i,l,r){if(t){var a=new graphic.Group,o=this.visualMapModel.textStyleModel;a.add(new graphic.Text({style:{x:l?"right"===r?i[0]:0:i[0]/2,y:i[1]/2,textVerticalAlign:"middle",textAlign:l?r:"center",text:t,textFont:o.getFont(),textFill:o.getTextColor()}})),e.add(a)}},_getViewData:function(){var e=this.visualMapModel,t=zrUtil.map(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),i=e.get("text"),l=e.get("orient"),r=e.get("inverse");return("horizontal"===l?r:!r)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},_createItemSymbol:function(e,t,i){e.add(createSymbol(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,i=t.option,l=zrUtil.clone(i.selected),r=t.getSelectedMapKey(e);"single"===i.selectedMode?(l[r]=!0,zrUtil.each(l,function(e,t){l[t]=t===r})):l[r]=!l[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:l})}}),_default=PiecewiseVisualMapView;module.exports=_default;
//# sourceMappingURL=/sm/79735b6b942fce4dcd33744e7df5e00dd75f053bbe6b64b167e6efe0f9a37e04.map