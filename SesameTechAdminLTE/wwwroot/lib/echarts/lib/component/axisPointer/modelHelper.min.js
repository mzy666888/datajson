/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/component/axisPointer/modelHelper.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var zrUtil=require("zrender/lib/core/util"),Model=require("../../model/Model"),each=zrUtil.each,curry=zrUtil.curry;function collect(e,o){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(t,e,o),t.seriesInvolved&&collectSeriesInfo(t,e),t}function collectAxesInfo(e,o,t){var i=o.getComponent("tooltip"),n=o.getComponent("axisPointer"),r=n.get("link",!0)||[],s=[];each(t.getCoordinateSystems(),function(t){if(t.axisPointerEnabled){var a=makeKey(t.model),l=e.coordSysAxesInfo[a]={};e.coordSysMap[a]=t;var c=t.model.getModel("tooltip",i);if(each(t.getAxes(),curry(u,!1,null)),t.getTooltipAxes&&i&&c.get("show")){var x="axis"===c.get("trigger"),d="cross"===c.get("axisPointer.type"),g=t.getTooltipAxes(c.get("axisPointer.axis"));(x||d)&&each(g.baseAxes,curry(u,!d||"cross",x)),d&&each(g.otherAxes,curry(u,"cross",!1))}}function u(i,a,x){var d=x.model.getModel("axisPointer",n),g=d.get("show");if(g&&("auto"!==g||i||isHandleTrigger(d))){null==a&&(a=d.get("triggerTooltip"));var u=(d=i?makeAxisPointerModel(x,c,n,o,i,a):d).get("snap"),f=makeKey(x.model),p=a||u||"category"===x.type,y=e.axesInfo[f]={key:f,axis:x,coordSys:t,axisPointerModel:d,triggerTooltip:a,involveSeries:p,snap:u,useHandle:isHandleTrigger(d),seriesModels:[]};l[f]=y,e.seriesInvolved|=p;var v=getLinkGroupIndex(r,x);if(null!=v){var m=s[v]||(s[v]={axesInfo:{}});m.axesInfo[f]=y,m.mapper=r[v].mapper,y.linkGroup=m}}}})}function makeAxisPointerModel(e,o,t,i,n,r){var s=o.getModel("axisPointer"),a={};each(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){a[e]=zrUtil.clone(s.get(e))}),a.snap="category"!==e.type&&!!r,"cross"===s.get("type")&&(a.type="line");var l=a.label||(a.label={});if(null==l.show&&(l.show=!1),"cross"===n){var c=s.get("label.show");if(l.show=null==c||c,!r){var x=a.lineStyle=s.get("crossStyle");x&&zrUtil.defaults(l,x.textStyle)}}return e.model.getModel("axisPointer",new Model(a,t,i))}function collectSeriesInfo(e,o){o.eachSeries(function(o){var t=o.coordinateSystem,i=o.get("tooltip.trigger",!0),n=o.get("tooltip.show",!0);t&&"none"!==i&&!1!==i&&"item"!==i&&!1!==n&&!1!==o.get("axisPointer.show",!0)&&each(e.coordSysAxesInfo[makeKey(t.model)],function(e){var i=e.axis;t.getAxis(i.dim)===i&&(e.seriesModels.push(o),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=o.getData().count())})},this)}function getLinkGroupIndex(e,o){for(var t=o.model,i=o.dim,n=0;n<e.length;n++){var r=e[n]||{};if(checkPropInLink(r[i+"AxisId"],t.id)||checkPropInLink(r[i+"AxisIndex"],t.componentIndex)||checkPropInLink(r[i+"AxisName"],t.name))return n}}function checkPropInLink(e,o){return"all"===e||zrUtil.isArray(e)&&zrUtil.indexOf(e,o)>=0||e===o}function fixValue(e){var o=getAxisInfo(e);if(o){var t=o.axisPointerModel,i=o.axis.scale,n=t.option,r=t.get("status"),s=t.get("value");null!=s&&(s=i.parse(s));var a=isHandleTrigger(t);null==r&&(n.status=a?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==s||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),n.value=s,a&&(n.status=o.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo(e){var o=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return o&&o.axesInfo[makeKey(e)]}function getAxisPointerModel(e){var o=getAxisInfo(e);return o&&o.axisPointerModel}function isHandleTrigger(e){return!!e.get("handle.show")}function makeKey(e){return e.type+"||"+e.id}exports.collect=collect,exports.fixValue=fixValue,exports.getAxisInfo=getAxisInfo,exports.getAxisPointerModel=getAxisPointerModel,exports.makeKey=makeKey;
//# sourceMappingURL=/sm/638763564cbe12b59ed6d67f9144183a87f3b5927df9f1885f4473c0516c340d.map