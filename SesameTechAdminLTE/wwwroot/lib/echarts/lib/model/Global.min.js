/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/model/Global.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../config"),__DEV__=_config.__DEV__,_util=require("zrender/lib/core/util"),each=_util.each,filter=_util.filter,map=_util.map,isArray=_util.isArray,indexOf=_util.indexOf,isObject=_util.isObject,isString=_util.isString,createHashMap=_util.createHashMap,assert=_util.assert,clone=_util.clone,merge=_util.merge,extend=_util.extend,mixin=_util.mixin,modelUtil=require("../util/model"),Model=require("./Model"),ComponentModel=require("./Component"),globalDefault=require("./globalDefault"),colorPaletteMixin=require("./mixin/colorPalette"),_sourceHelper=require("../data/helper/sourceHelper"),resetSourceDefaulter=_sourceHelper.resetSourceDefaulter,OPTION_INNER_KEY="\0_ec_inner",GlobalModel=Model.extend({init:function(e,t,i,n){i=i||{},this.option=null,this._theme=new Model(i),this._optionManager=n},setOption:function(e,t){assert(!(OPTION_INNER_KEY in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,i=this._optionManager;if(!e||"recreate"===e){var n=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(n)):initBase.call(this,n),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var r=i.getTimelineOption(this);r&&(this.mergeOption(r),t=!0)}if(!e||"recreate"===e||"media"===e){var s=i.getMediaOption(this,this._api);s.length&&each(s,function(e){this.mergeOption(e,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,i=this._componentsMap,n=[];resetSourceDefaulter(this),each(e,function(e,i){null!=e&&(ComponentModel.hasClass(i)?i&&n.push(i):t[i]=null==t[i]?clone(e):merge(t[i],e,!0))}),ComponentModel.topologicalTravel(n,ComponentModel.getAllClassMainTypes(),function(n,r){var s=modelUtil.normalizeToArray(e[n]),o=modelUtil.mappingToExists(i.get(n),s);modelUtil.makeIdAndName(o),each(o,function(e,t){var i=e.option;isObject(i)&&(e.keyInfo.mainType=n,e.keyInfo.subType=determineSubType(n,i,e.exist))});var a=getComponentsByTypes(i,r);t[n]=[],i.set(n,[]),each(o,function(e,r){var s=e.exist,o=e.option;if(assert(isObject(o)||s,"Empty component definition"),o){var l=ComponentModel.getClass(n,e.keyInfo.subType,!0);if(s&&s.constructor===l)s.name=e.keyInfo.name,s.mergeOption(o,this),s.optionUpdated(o,!1);else{var c=extend({dependentModels:a,componentIndex:r},e.keyInfo);s=new l(o,this,this,c),extend(s,c),s.init(o,this,this,c),s.optionUpdated(null,!0)}}else s.mergeOption({},this),s.optionUpdated({},!1);i.get(n)[r]=s,t[n][r]=s.option},this),"series"===n&&createSeriesIndices(this,i.get("series"))},this),this._seriesIndicesMap=createHashMap(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=clone(this.option);return each(e,function(t,i){if(ComponentModel.hasClass(i)){for(var n=(t=modelUtil.normalizeToArray(t)).length-1;n>=0;n--)modelUtil.isIdInner(t[n])&&t.splice(n,1);e[i]=t}}),delete e[OPTION_INNER_KEY],e},getTheme:function(){return this._theme},getComponent:function(e,t){var i=this._componentsMap.get(e);if(i)return i[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var i,n=e.index,r=e.id,s=e.name,o=this._componentsMap.get(t);if(!o||!o.length)return[];if(null!=n)isArray(n)||(n=[n]),i=filter(map(n,function(e){return o[e]}),function(e){return!!e});else if(null!=r){var a=isArray(r);i=filter(o,function(e){return a&&indexOf(r,e.id)>=0||!a&&e.id===r})}else if(null!=s){var l=isArray(s);i=filter(o,function(e){return l&&indexOf(s,e.name)>=0||!l&&e.name===s})}else i=o.slice();return filterBySubType(i,e)},findComponents:function(e){var t,i,n,r,s,o=e.query,a=e.mainType,l=(i=a+"Index",n=a+"Id",r=a+"Name",!(t=o)||null==t[i]&&null==t[n]&&null==t[r]?null:{mainType:a,index:t[i],id:t[n],name:t[r]}),c=l?this.queryComponents(l):this._componentsMap.get(a);return s=filterBySubType(c,e),e.filter?filter(s,e.filter):s},eachComponent:function(e,t,i){var n=this._componentsMap;if("function"==typeof e)i=t,t=e,n.each(function(e,n){each(e,function(e,r){t.call(i,n,e,r)})});else if(isString(e))each(n.get(e),t,i);else if(isObject(e)){var r=this.findComponents(e);each(r,t,i)}},getSeriesByName:function(e){var t=this._componentsMap.get("series");return filter(t,function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){var t=this._componentsMap.get("series");return filter(t,function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){assertSeriesInitialized(this),each(this._seriesIndices,function(i){var n=this._componentsMap.get("series")[i];e.call(t,n,i)},this)},eachRawSeries:function(e,t){each(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,i){assertSeriesInitialized(this),each(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];r.subType===e&&t.call(i,r,n)},this)},eachRawSeriesByType:function(e,t,i){return each(this.getSeriesByType(e),t,i)},isSeriesFiltered:function(e){return assertSeriesInitialized(this),null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){assertSeriesInitialized(this),createSeriesIndices(this,filter(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;createSeriesIndices(this,t.get("series"));var i=[];t.each(function(e,t){i.push(t)}),ComponentModel.topologicalTravel(i,ComponentModel.getAllClassMainTypes(),function(i,n){each(t.get(i),function(t){("series"!==i||!isNotTargetSeries(t,e))&&t.restoreData()})})}});function isNotTargetSeries(e,t){if(t){var i=t.seiresIndex,n=t.seriesId,r=t.seriesName;return null!=i&&e.componentIndex!==i||null!=n&&e.id!==n||null!=r&&e.name!==r}}function mergeTheme(e,t){var i=e.color&&!e.colorLayer;each(t,function(t,n){"colorLayer"===n&&i||ComponentModel.hasClass(n)||("object"==typeof t?e[n]=e[n]?merge(e[n],t,!1):clone(t):null==e[n]&&(e[n]=t))})}function initBase(e){e=e,this.option={},this.option[OPTION_INNER_KEY]=1,this._componentsMap=createHashMap({series:[]}),this._seriesIndices,this._seriesIndicesMap,mergeTheme(e,this._theme.option),merge(e,globalDefault,!1),this.mergeOption(e)}function getComponentsByTypes(e,t){isArray(t)||(t=t?[t]:[]);var i={};return each(t,function(t){i[t]=(e.get(t)||[]).slice()}),i}function determineSubType(e,t,i){return t.type?t.type:i?i.subType:ComponentModel.determineSubType(e,t)}function createSeriesIndices(e,t){e._seriesIndicesMap=createHashMap(e._seriesIndices=map(t,function(e){return e.componentIndex})||[])}function filterBySubType(e,t){return t.hasOwnProperty("subType")?filter(e,function(e){return e.subType===t.subType}):e}function assertSeriesInitialized(e){}mixin(GlobalModel,colorPaletteMixin);var _default=GlobalModel;module.exports=_default;
//# sourceMappingURL=/sm/369b240e811286461b81fdf677d4ba705eb4d2217d34f9fcc9350d523e7538be.map