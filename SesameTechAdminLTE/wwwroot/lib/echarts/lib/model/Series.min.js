/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/lib/model/Series.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var _config=require("../config"),__DEV__=_config.__DEV__,zrUtil=require("zrender/lib/core/util"),env=require("zrender/lib/core/env"),_format=require("../util/format"),formatTime=_format.formatTime,encodeHTML=_format.encodeHTML,addCommas=_format.addCommas,getTooltipMarker=_format.getTooltipMarker,modelUtil=require("../util/model"),ComponentModel=require("./Component"),colorPaletteMixin=require("./mixin/colorPalette"),dataFormatMixin=require("../model/mixin/dataFormat"),_layout=require("../util/layout"),getLayoutParams=_layout.getLayoutParams,mergeLayoutParam=_layout.mergeLayoutParam,_task=require("../stream/task"),createTask=_task.createTask,_sourceHelper=require("../data/helper/sourceHelper"),prepareSource=_sourceHelper.prepareSource,getSource=_sourceHelper.getSource,_dataProvider=require("../data/helper/dataProvider"),retrieveRawValue=_dataProvider.retrieveRawValue,inner=modelUtil.makeInner(),SeriesModel=ComponentModel.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,a,r){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,a),prepareSource(this);var i=this.getInitialData(e,a);wrapData(i,this),this.dataTask.context.data=i,inner(this).dataBeforeProcessed=i,autoSeriesName(this)},mergeDefaultAndTheme:function(e,t){var a=this.layoutMode,r=a?getLayoutParams(e):{},i=this.subType;ComponentModel.hasClass(i)&&(i+="Series"),zrUtil.merge(e,t.getTheme().get(this.subType)),zrUtil.merge(e,this.getDefaultOption()),modelUtil.defaultEmphasis(e,"label",["show"]),this.fillDataTextStyle(e.data),a&&mergeLayoutParam(e,r,a)},mergeOption:function(e,t){e=zrUtil.merge(this.option,e,!0),this.fillDataTextStyle(e.data);var a=this.layoutMode;a&&mergeLayoutParam(this.option,e,a),prepareSource(this);var r=this.getInitialData(e,t);wrapData(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,inner(this).dataBeforeProcessed=r,autoSeriesName(this)},fillDataTextStyle:function(e){if(e&&!zrUtil.isTypedArray(e))for(var t=["show"],a=0;a<e.length;a++)e[a]&&e[a].label&&modelUtil.defaultEmphasis(e[a],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=getCurrentTask(this);if(t){var a=t.context.data;return null==e?a:a.getLinkedData(e)}return inner(this).data},setData:function(e){var t=getCurrentTask(this);if(t){var a=t.context;a.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),a.outputData=e,t!==this.dataTask&&(a.data=e)}inner(this).data=e},getSource:function(){return getSource(this)},getRawData:function(){return inner(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,a,r){var i=this,o="html"===(r=r||"html")?"<br/>":"\n",n="richText"===r,s={},l=0;function u(e){return{renderMode:r,content:encodeHTML(addCommas(e)),style:s}}var d=this.getData(),m=d.mapDimension("defaultedTooltip",!0),c=m.length,h=this.getRawValue(e),g=zrUtil.isArray(h),p=d.getItemVisual(e,"color");zrUtil.isObject(p)&&p.colorStops&&(p=(p.colorStops[0]||{}).color),p=p||"transparent";var f=(c>1||g&&!c?function(a){var o=zrUtil.reduce(a,function(e,t,a){var r=d.getDimensionInfo(a);return e|(r&&!1!==r.tooltip&&null!=r.displayName)},0),u=[];function c(e,a){var m=d.getDimensionInfo(a);if(m&&!1!==m.otherDims.tooltip){var c=m.type,h="sub"+i.seriesIndex+"at"+l,g=getTooltipMarker({color:p,type:"subItem",renderMode:r,markerId:h}),f="string"==typeof g?g:g.content,T=(o?f+encodeHTML(m.displayName||"-")+": ":"")+encodeHTML("ordinal"===c?e+"":"time"===c?t?"":formatTime("yyyy/MM/dd hh:mm:ss",e):addCommas(e));T&&u.push(T),n&&(s[h]=p,++l)}}m.length?zrUtil.each(m,function(t){c(retrieveRawValue(d,e,t),t)}):zrUtil.each(a,c);var h=o?n?"\n":"<br/>":"",g=h+u.join(h||", ");return{renderMode:r,content:g,style:s}}(h):u(c?retrieveRawValue(d,e,m[0]):g?h[0]:h)).content,T=i.seriesIndex+"at"+l,v=getTooltipMarker({color:p,type:"item",renderMode:r,markerId:T});s[T]=p,++l;var D=d.getName(e),y=this.name;modelUtil.isNameSpecified(this)||(y=""),y=y?encodeHTML(y)+(t?": ":o):"";var M="string"==typeof v?v:v.content;return{html:t?M+y+f:y+M+(D?encodeHTML(D)+": "+f:f),markers:s}},isAnimationEnabled:function(){if(env.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,a){var r=this.ecModel,i=colorPaletteMixin.getColorFromPalette.call(this,e,t,a);return i||(i=r.getColorFromPalette(e,t,a)),i},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function autoSeriesName(e){var t=e.name;modelUtil.isNameSpecified(e)||(e.name=getSeriesAutoName(e)||t)}function getSeriesAutoName(e){var t=e.getRawData(),a=t.mapDimension("seriesName",!0),r=[];return zrUtil.each(a,function(e){var a=t.getDimensionInfo(e);a.displayName&&r.push(a.displayName)}),r.join(" ")}function dataTaskCount(e){return e.model.getRawData().count()}function dataTaskReset(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(e,t){e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function wrapData(e,t){zrUtil.each(e.CHANGABLE_METHODS,function(a){e.wrapMethod(a,zrUtil.curry(onDataSelfChange,t))})}function onDataSelfChange(e){var t=getCurrentTask(e);t&&t.setOutputEnd(this.count())}function getCurrentTask(e){var t=(e.ecModel||{}).scheduler,a=t&&t.getPipeline(e.uid);if(a){var r=a.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(e.uid))}return r}}zrUtil.mixin(SeriesModel,dataFormatMixin),zrUtil.mixin(SeriesModel,colorPaletteMixin);var _default=SeriesModel;module.exports=_default;
//# sourceMappingURL=/sm/f79651587cecbd5f70b49df655558be1cc475a3714ddd77d913107536751de98.map