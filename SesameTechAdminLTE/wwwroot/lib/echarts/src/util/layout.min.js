/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/util/layout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import BoundingRect from"zrender/src/core/BoundingRect";import{parsePercent}from"./number";import*as formatUtil from"./format";var each=zrUtil.each;export var LOCATION_PARAMS=["left","right","top","bottom","width","height"];export var HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(t,r,e,a,i){var o=0,n=0;null==a&&(a=1/0),null==i&&(i=1/0);var c=0;r.eachChild(function(h,s){var l,u,p=h.position,N=h.getBoundingRect(),f=r.childAt(s+1),g=f&&f.getBoundingRect();if("horizontal"===t){var m=N.width+(g?-g.x+N.x:0);(l=o+m)>a||h.newline?(o=0,l=m,n+=c+e,c=N.height):c=Math.max(c,N.height)}else{var x=N.height+(g?-g.y+N.y:0);(u=n+x)>i||h.newline?(o+=c+e,n=0,u=x,c=N.width):c=Math.max(c,N.width)}h.newline||(p[0]=o,p[1]=n,"horizontal"===t?o=l+e:n=u+e)})}export var box=boxLayout;export var vbox=zrUtil.curry(boxLayout,"vertical");export var hbox=zrUtil.curry(boxLayout,"horizontal");export function getAvailableSize(t,r,e){var a=r.width,i=r.height,o=parsePercent(t.x,a),n=parsePercent(t.y,i),c=parsePercent(t.x2,a),h=parsePercent(t.y2,i);return(isNaN(o)||isNaN(parseFloat(t.x)))&&(o=0),(isNaN(c)||isNaN(parseFloat(t.x2)))&&(c=a),(isNaN(n)||isNaN(parseFloat(t.y)))&&(n=0),(isNaN(h)||isNaN(parseFloat(t.y2)))&&(h=i),e=formatUtil.normalizeCssArray(e||0),{width:Math.max(c-o-e[1]-e[3],0),height:Math.max(h-n-e[0]-e[2],0)}}export function getLayoutRect(t,r,e){e=formatUtil.normalizeCssArray(e||0);var a=r.width,i=r.height,o=parsePercent(t.left,a),n=parsePercent(t.top,i),c=parsePercent(t.right,a),h=parsePercent(t.bottom,i),s=parsePercent(t.width,a),l=parsePercent(t.height,i),u=e[2]+e[0],p=e[1]+e[3],N=t.aspect;switch(isNaN(s)&&(s=a-c-p-o),isNaN(l)&&(l=i-h-u-n),null!=N&&(isNaN(s)&&isNaN(l)&&(N>a/i?s=.8*a:l=.8*i),isNaN(s)&&(s=N*l),isNaN(l)&&(l=s/N)),isNaN(o)&&(o=a-c-s-p),isNaN(n)&&(n=i-h-l-u),t.left||t.right){case"center":o=a/2-s/2-e[3];break;case"right":o=a-s-p}switch(t.top||t.bottom){case"middle":case"center":n=i/2-l/2-e[0];break;case"bottom":n=i-l-u}o=o||0,n=n||0,isNaN(s)&&(s=a-p-o-(c||0)),isNaN(l)&&(l=i-u-n-(h||0));var f=new BoundingRect(o+e[3],n+e[0],s,l);return f.margin=e,f}export function positionElement(t,r,e,a,i){var o=!i||!i.hv||i.hv[0],n=!i||!i.hv||i.hv[1],c=i&&i.boundingMode||"all";if(o||n){var h;if("raw"===c)h="group"===t.type?new BoundingRect(0,0,+r.width||0,+r.height||0):t.getBoundingRect();else if(h=t.getBoundingRect(),t.needLocalTransform()){var s=t.getLocalTransform();(h=h.clone()).applyTransform(s)}r=getLayoutRect(zrUtil.defaults({width:h.width,height:h.height},r),e,a);var l=t.position,u=o?r.x-h.x:0,p=n?r.y-h.y:0;t.attr("position","raw"===c?[u,p]:[l[0]+u,l[1]+p])}}export function sizeCalculable(t,r){return null!=t[HV_NAMES[r][0]]||null!=t[HV_NAMES[r][1]]&&null!=t[HV_NAMES[r][2]]}export function mergeLayoutParam(t,r,e){!zrUtil.isObject(e)&&(e={});var a=e.ignoreSize;!zrUtil.isArray(a)&&(a=[a,a]);var i=n(HV_NAMES[0],0),o=n(HV_NAMES[1],1);function n(e,i){var o={},n=0,s={},l=0;if(each(e,function(r){s[r]=t[r]}),each(e,function(t){c(r,t)&&(o[t]=s[t]=r[t]),h(o,t)&&n++,h(s,t)&&l++}),a[i])return h(r,e[1])?s[e[2]]=null:h(r,e[2])&&(s[e[1]]=null),s;if(2!==l&&n){if(n>=2)return o;for(var u=0;u<e.length;u++){var p=e[u];if(!c(o,p)&&c(t,p)){o[p]=t[p];break}}return o}return s}function c(t,r){return t.hasOwnProperty(r)}function h(t,r){return null!=t[r]&&"auto"!==t[r]}function s(t,r,e){each(t,function(t){r[t]=e[t]})}s(HV_NAMES[0],t,i),s(HV_NAMES[1],t,o)}export function getLayoutParams(t){return copyLayoutParams({},t)}export function copyLayoutParams(t,r){return r&&t&&each(LOCATION_PARAMS,function(e){r.hasOwnProperty(e)&&(t[e]=r[e])}),t}
//# sourceMappingURL=/sm/43d7aa963b81002fba2de303b339cba8a22f98bbc86eaffa3ab4bacdf863e51c.map