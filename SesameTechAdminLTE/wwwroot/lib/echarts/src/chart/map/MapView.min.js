/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/map/MapView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as echarts from"../../echarts";import*as zrUtil from"zrender/src/core/util";import*as graphic from"../../util/graphic";import MapDraw from"../../component/helper/MapDraw";var HIGH_DOWN_PROP="__seriesMapHighDown",RECORD_VERSION_PROP="__seriesMapCallKey";export default echarts.extendChartView({type:"map",render:function(e,t,r,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(o=this._mapDraw)&&a.add(o.group);else if(e.needsDrawMap){var o=this._mapDraw||new MapDraw(r,!0);a.add(o.group),o.draw(e,t,r,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,r)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,r){var i=e.originalData,a=this.group;i.each(i.mapDimension("value"),function(t,r){if(!isNaN(t)){var o=i.getItemLayout(r);if(o&&o.point){var l=o.point,n=o.offset,s=new graphic.Circle({style:{fill:e.getData().getVisual("color")},shape:{cx:l[0]+9*n,cy:l[1],r:3},silent:!0,z2:8+(n?0:graphic.Z2_EMPHASIS_LIFT+1)});if(!n){var m=e.mainSeries.getData(),p=i.getName(r),h=m.indexOfName(p),g=i.getItemModel(r),_=g.getModel("label"),d=g.getModel("emphasis.label"),c=m.getItemGraphicEl(h),D=zrUtil.retrieve2(e.getFormattedLabel(h,"normal"),p),u=zrUtil.retrieve2(e.getFormattedLabel(h,"emphasis"),D),w=c[HIGH_DOWN_PROP],f=Math.random();if(!w){w=c[HIGH_DOWN_PROP]={};var R=zrUtil.curry(onRegionHighDown,!0),v=zrUtil.curry(onRegionHighDown,!1);c.on("mouseover",R).on("mouseout",v).on("emphasis",R).on("normal",v)}c[RECORD_VERSION_PROP]=f,zrUtil.extend(w,{recordVersion:f,circle:s,labelModel:_,hoverLabelModel:d,emphasisText:u,normalText:D}),enterRegionHighDown(w,!1)}a.add(s)}}})}});function onRegionHighDown(e){var t=this[HIGH_DOWN_PROP];t&&t.recordVersion===this[RECORD_VERSION_PROP]&&enterRegionHighDown(t,e)}function enterRegionHighDown(e,t){var r=e.circle,i=e.labelModel,a=e.hoverLabelModel,o=e.emphasisText,l=e.normalText;t?(r.style.extendFrom(graphic.setTextStyle({},a,{text:a.get("show")?o:null},{isRectText:!0,useInsideStyle:!1},!0)),r.__mapOriginalZ2=r.z2,r.z2+=graphic.Z2_EMPHASIS_LIFT):(graphic.setTextStyle(r.style,i,{text:i.get("show")?l:null,textPosition:i.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),r.dirty(!1),null!=r.__mapOriginalZ2&&(r.z2=r.__mapOriginalZ2,r.__mapOriginalZ2=null))}
//# sourceMappingURL=/sm/de23264e5d8234fff60c31b824a3d2f9976fce83f21a11203e2ecf2b67b7409b.map