/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/heatmap/HeatmapLayer.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";var GRADIENT_LEVELS=256;function Heatmap(){var t=zrUtil.createCanvas();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Heatmap.prototype={update:function(t,a,i,e,r,h){var s=this._getBrush(),n=this._getGradient(t,r,"inRange"),o=this._getGradient(t,r,"outOfRange"),l=this.pointSize+this.blurSize,g=this.canvas,u=g.getContext("2d"),d=t.length;g.width=a,g.height=i;for(var p=0;p<d;++p){var c=t[p],v=c[0],f=c[1],m=e(c[2]);u.globalAlpha=m,u.drawImage(s,v-l,f-l)}if(!g.width||!g.height)return g;for(var z=u.getImageData(0,0,g.width,g.height),_=z.data,S=0,w=_.length,b=this.minOpacity,C=this.maxOpacity-b;S<w;){m=_[S+3]/256;var x=4*Math.floor(m*(GRADIENT_LEVELS-1));if(m>0){var y=h(m)?n:o;m>0&&(m=m*C+b),_[S++]=y[x],_[S++]=y[x+1],_[S++]=y[x+2],_[S++]=y[x+3]*m*256}else S+=4}return u.putImageData(z,0,0),g},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=zrUtil.createCanvas()),a=this.pointSize+this.blurSize,i=2*a;t.width=i,t.height=i;var e=t.getContext("2d");return e.clearRect(0,0,i,i),e.shadowOffsetX=i,e.shadowBlur=this.blurSize,e.shadowColor="#000",e.beginPath(),e.arc(-a,a,this.pointSize,0,2*Math.PI,!0),e.closePath(),e.fill(),t},_getGradient:function(t,a,i){for(var e=this._gradientPixels,r=e[i]||(e[i]=new Uint8ClampedArray(1024)),h=[0,0,0,0],s=0,n=0;n<256;n++)a[i](n/255,!0,h),r[s++]=h[0],r[s++]=h[1],r[s++]=h[2],r[s++]=h[3];return r}};export default Heatmap;
//# sourceMappingURL=/sm/82d175d9e34a948c0e77fba4945dbc267aa7e6813752f52034f358d7d91afa3e.map