/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/candlestick/candlestickLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{subPixelOptimize}from"../../util/graphic";import createRenderPlanner from"../helper/createRenderPlanner";import{parsePercent}from"../../util/number";import{retrieve2}from"zrender/src/core/util";var LargeArr="undefined"!=typeof Float32Array?Float32Array:Array;export default{seriesType:"candlestick",plan:createRenderPlanner(),reset:function(e){var t=e.coordinateSystem,r=e.getData(),a=calculateCandleWidth(e,r),n=0,i=1,o=["x","y"],l=r.mapDimension(o[n]),u=r.mapDimension(o[i],!0),s=u[0],g=u[1],c=u[2],p=u[3];if(r.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),!(null==l||u.length<4))return{progress:e.pipelineContext.large?function(e,r){var a,o,u=new LargeArr(4*e.count),d=0,m=[],h=[];for(;null!=(o=e.next());){var N=r.get(l,o),f=r.get(s,o),x=r.get(g,o),P=r.get(c,o),v=r.get(p,o);isNaN(N)||isNaN(P)||isNaN(v)?(u[d++]=NaN,d+=3):(u[d++]=getSign(r,o,f,x,g),m[n]=N,m[i]=P,a=t.dataToPoint(m,null,h),u[d++]=a?a[0]:NaN,u[d++]=a?a[1]:NaN,m[i]=v,a=t.dataToPoint(m,null,h),u[d++]=a?a[1]:NaN)}r.setLayout("largePoints",u)}:function(e,r){var o;for(;null!=(o=e.next());){var u=r.get(l,o),d=r.get(s,o),m=r.get(g,o),h=r.get(c,o),N=r.get(p,o),f=Math.min(d,m),x=Math.max(d,m),P=W(f,u),v=W(x,u),y=W(h,u),b=W(N,u),M=[];A(M,v,0),A(M,P,1),M.push(L(b),L(v),L(y),L(P)),r.setItemLayout(o,{sign:getSign(r,o,d,m,g),initBaseline:d>m?v[i]:P[i],ends:M,brushRect:z(h,N,u)})}function W(e,r){var a=[];return a[n]=r,a[i]=e,isNaN(r)||isNaN(e)?[NaN,NaN]:t.dataToPoint(a)}function A(e,t,r){var i=t.slice(),o=t.slice();i[n]=subPixelOptimize(i[n]+a/2,1,!1),o[n]=subPixelOptimize(o[n]-a/2,1,!0),r?e.push(i,o):e.push(o,i)}function z(e,t,r){var o=W(e,r),l=W(t,r);return o[n]-=a/2,l[n]-=a/2,{x:o[0],y:o[1],width:i?a:l[0]-o[0],height:i?l[1]-o[1]:a}}function L(e){return e[n]=subPixelOptimize(e[n],1),e}}}}};function getSign(e,t,r,a,n){return r>a?-1:r<a?1:t>0?e.get(n,t-1)<=a?1:-1:1}function calculateCandleWidth(e,t){var r,a=e.getBaseAxis(),n="category"===a.type?a.getBandWidth():(r=a.getExtent(),Math.abs(r[1]-r[0])/t.count()),i=parsePercent(retrieve2(e.get("barMaxWidth"),n),n),o=parsePercent(retrieve2(e.get("barMinWidth"),1),n),l=e.get("barWidth");return null!=l?parsePercent(l,n):Math.max(Math.min(n/2,i),o)}
//# sourceMappingURL=/sm/31fa2e85c50a10a12b5c93193d09887ac2e9057781161756705e7734192d17a2.map