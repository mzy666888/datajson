/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/candlestick/CandlestickView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import ChartView from"../../view/Chart";import*as graphic from"../../util/graphic";import Path from"zrender/src/graphic/Path";import{createClipPath}from"../helper/createClipPathFromCoordSys";var NORMAL_ITEM_STYLE_PATH=["itemStyle"],EMPHASIS_ITEM_STYLE_PATH=["emphasis","itemStyle"],SKIP_PROPS=["color","color0","borderColor","borderColor0"],CandlestickView=ChartView.extend({type:"candlestick",render:function(e,t,r){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,r){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,r,a){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),r=this._data,a=this.group,o=t.getLayout("isSimpleBox"),i=e.get("clip",!0),n=e.coordinateSystem,l=n.getArea&&n.getArea();this._data||a.removeAll(),t.diff(r).add(function(r){if(t.hasValue(r)){var n,s=t.getItemLayout(r);if(i&&isNormalBoxClipped(l,s))return;n=createNormalBox(s,r,!0),graphic.initProps(n,{shape:{points:s.ends}},e,r),setBoxCommon(n,t,r,o),a.add(n),t.setItemGraphicEl(r,n)}}).update(function(n,s){var m=r.getItemGraphicEl(s);if(t.hasValue(n)){var c=t.getItemLayout(n);i&&isNormalBoxClipped(l,c)?a.remove(m):(m?graphic.updateProps(m,{shape:{points:c.ends}},e,n):m=createNormalBox(c,n),setBoxCommon(m,t,n,o),a.add(m),t.setItemGraphicEl(n,m))}else a.remove(m)}).remove(function(e){var t=r.getItemGraphicEl(e);t&&a.remove(t)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),createLarge(e,this.group);var t=e.get("clip",!0)?createClipPath(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var r,a=t.getData(),o=a.getLayout("isSimpleBox");null!=(r=e.next());){var i;setBoxCommon(i=createNormalBox(a.getItemLayout(r),r),a,r,o),i.incremental=!0,this.group.add(i)}},_incrementalRenderLarge:function(e,t){createLarge(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:zrUtil.noop}),NormalBoxPath=Path.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var r=t.points;this.__simpleBox?(e.moveTo(r[4][0],r[4][1]),e.lineTo(r[6][0],r[6][1])):(e.moveTo(r[0][0],r[0][1]),e.lineTo(r[1][0],r[1][1]),e.lineTo(r[2][0],r[2][1]),e.lineTo(r[3][0],r[3][1]),e.closePath(),e.moveTo(r[4][0],r[4][1]),e.lineTo(r[5][0],r[5][1]),e.moveTo(r[6][0],r[6][1]),e.lineTo(r[7][0],r[7][1]))}});function createNormalBox(e,t,r){var a=e.ends;return new NormalBoxPath({shape:{points:r?transInit(a,e):a},z2:100})}function isNormalBoxClipped(e,t){for(var r=!0,a=0;a<t.ends.length;a++)if(e.contain(t.ends[a][0],t.ends[a][1])){r=!1;break}return r}function setBoxCommon(e,t,r,a){var o=t.getItemModel(r),i=o.getModel(NORMAL_ITEM_STYLE_PATH),n=t.getItemVisual(r,"color"),l=t.getItemVisual(r,"borderColor")||n,s=i.getItemStyle(SKIP_PROPS);e.useStyle(s),e.style.strokeNoScale=!0,e.style.fill=n,e.style.stroke=l,e.__simpleBox=a;var m=o.getModel(EMPHASIS_ITEM_STYLE_PATH).getItemStyle();graphic.setHoverStyle(e,m)}function transInit(e,t){return zrUtil.map(e,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var LargeBoxPath=Path.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var r=t.points,a=0;a<r.length;)if(this.__sign===r[a++]){var o=r[a++];e.moveTo(o,r[a++]),e.lineTo(o,r[a++])}else a+=3}});function createLarge(e,t,r){var a=e.getData(),o=a.getLayout("largePoints"),i=new LargeBoxPath({shape:{points:o},__sign:1});t.add(i);var n=new LargeBoxPath({shape:{points:o},__sign:-1});t.add(n),setLargeStyle(1,i,e,a),setLargeStyle(-1,n,e,a),r&&(i.incremental=!0,n.incremental=!0)}function setLargeStyle(e,t,r,a){var o=e>0?"P":"N",i=a.getVisual("borderColor"+o)||a.getVisual("color"+o),n=r.getModel(NORMAL_ITEM_STYLE_PATH).getItemStyle(SKIP_PROPS);t.useStyle(n),t.style.fill=null,t.style.stroke=i}export default CandlestickView;
//# sourceMappingURL=/sm/088397a3e03ade44c4c59fafba1697758e9d9b757095e5894917402c7cfcec5f.map