/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/pie/labelLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as textContain from"zrender/src/contain/text";var RADIAN=Math.PI/180;function adjustSingleSide(e,t,n,i,r,a,o){function l(t,n,i,r){for(var a=t;a<n;a++)if(e[a].y+=i,a>t&&a+1<n&&e[a+1].y>e[a].y+e[a].height)return void g(a,i/2);g(n-1,i/2)}function g(t,n){for(var i=t;i>=0&&(e[i].y-=n,!(i>0&&e[i].y>e[i-1].y+e[i-1].height));i--);}function s(e,t,n,i,r,a){for(var o=t?Number.MAX_VALUE:0,l=0,g=e.length;l<g;l++){var s=Math.abs(e[l].y-i),h=e[l].len,f=e[l].len2,u=s<r+h?Math.sqrt((r+h+f)*(r+h+f)-s*s):Math.abs(e[l].x-n);t&&u>=o&&(u=o-10),!t&&u<=o&&(u=o+10),e[l].x=n+u*a,o=u}}e.sort(function(e,t){return e.y-t.y});for(var h,f=0,u=e.length,v=[],c=[],d=0;d<u;d++)(h=e[d].y-f)<0&&l(d,u,-h),f=e[d].y+e[d].height;o-f<0&&g(u-1,f-o);for(d=0;d<u;d++)e[d].y>=n?c.push(e[d]):v.push(e[d]);s(v,!1,t,n,i,r),s(c,!0,t,n,i,r)}function avoidOverlap(e,t,n,i,r,a){for(var o=[],l=[],g=0;g<e.length;g++)isPositionCenter(e[g])||(e[g].x<t?o.push(e[g]):l.push(e[g]));adjustSingleSide(l,t,n,i,1,r,a),adjustSingleSide(o,t,n,i,-1,r,a);for(g=0;g<e.length;g++)if(!isPositionCenter(e[g])){var s=e[g].linePoints;if(s){var h=s[1][0]-s[2][0];e[g].x<t?s[2][0]=e[g].x+3:s[2][0]=e[g].x-3,s[1][1]=s[2][1]=e[g].y,s[1][0]=s[2][0]+h}}}function isPositionCenter(e){return"center"===e.position}export default function(e,t,n,i,r){var a,o,l=e.getData(),g=[],s=!1,h=(e.get("minShowLabelAngle")||0)*RADIAN;l.each(function(n){var i=l.getItemLayout(n),r=l.getItemModel(n),f=r.getModel("label"),u=f.get("position")||r.get("emphasis.label.position"),v=r.getModel("labelLine"),c=v.get("length"),d=v.get("length2");if(!(i.angle<h)){var y,p,x,b,m=(i.startAngle+i.endAngle)/2,M=Math.cos(m),A=Math.sin(m);a=i.cx,o=i.cy;var P="inside"===u||"inner"===u;if("center"===u)y=i.cx,p=i.cy,b="center";else{var I=(P?(i.r+i.r0)/2*M:i.r*M)+a,S=(P?(i.r+i.r0)/2*A:i.r*A)+o;if(y=I+3*M,p=S+3*A,!P){var L=I+M*(c+t-i.r),C=S+A*(c+t-i.r),N=L+(M<0?-1:1)*d;y=N+(M<0?-5:5),p=C,x=[[I,S],[L,C],[N,C]]}b=P?"center":M>0?"left":"right"}var j,D=f.getFont(),O=f.get("rotate");j="number"==typeof O?O*(Math.PI/180):O?M<0?-m+Math.PI:-m:0;var R=e.getFormattedLabel(n,"normal")||l.getName(n),F=textContain.getBoundingRect(R,D,b,"top");s=!!j,i.label={x:y,y:p,position:u,height:F.height,len:c,len2:d,linePoints:x,textAlign:b,verticalAlign:"middle",rotation:j,inside:P},P||g.push(i.label)}}),!s&&e.get("avoidLabelOverlap")&&avoidOverlap(g,a,o,t,n,i)}
//# sourceMappingURL=/sm/73a15fad00e4485b09c0a63fa00bb85207dacc86a3e667c45b899ca7be52b6f9.map