/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/pie/pieLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{parsePercent,linearMap}from"../../util/number";import labelLayout from"./labelLayout";import*as zrUtil from"zrender/src/core/util";var PI2=2*Math.PI,RADIAN=Math.PI/180;export default function(e,t,a,r){t.eachSeriesByType(e,function(e){var t=e.getData(),r=t.mapDimension("value"),n=e.get("center"),i=e.get("radius");zrUtil.isArray(i)||(i=[0,i]),zrUtil.isArray(n)||(n=[n,n]);var l=a.getWidth(),s=a.getHeight(),c=Math.min(l,s),g=parsePercent(n[0],l),o=parsePercent(n[1],s),u=parsePercent(i[0],c/2),N=parsePercent(i[1],c/2),A=-e.get("startAngle")*RADIAN,m=e.get("minAngle")*RADIAN,f=0;t.each(r,function(e){!isNaN(e)&&f++});var I=t.getSum(r),p=Math.PI/(I||f)*2,y=e.get("clockwise"),P=e.get("roseType"),h=e.get("stillShowZeroSum"),v=t.getDataExtent(r);v[0]=0;var d=PI2,L=0,D=A,M=y?1:-1;if(t.each(r,function(e,a){var r;if(isNaN(e))t.setItemLayout(a,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:y,cx:g,cy:o,r0:u,r:P?NaN:N});else{(r="area"!==P?0===I&&h?p:e*p:PI2/f)<m?(r=m,d-=m):L+=e;var n=D+M*r;t.setItemLayout(a,{angle:r,startAngle:D,endAngle:n,clockwise:y,cx:g,cy:o,r0:u,r:P?linearMap(e,v,[u,N]):N}),D=n}}),d<PI2&&f)if(d<=.001){var b=PI2/f;t.each(r,function(e,a){if(!isNaN(e)){var r=t.getItemLayout(a);r.angle=b,r.startAngle=A+M*a*b,r.endAngle=A+M*(a+1)*b}})}else p=d/L,D=A,t.each(r,function(e,a){if(!isNaN(e)){var r=t.getItemLayout(a),n=r.angle===m?m:e*p;r.startAngle=D,r.endAngle=D+M*n,D+=M*n}});labelLayout(e,N,l,s)})}
//# sourceMappingURL=/sm/bc2e5e6c3f80afba697557fb3abd675352cf7bbc265a0621d3240564c7a269c7.map