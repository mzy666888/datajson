/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/tree/layoutHelper.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as layout from"../../util/layout";export function init(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r,i,o=[e];r=o.pop();)if(i=r.children,r.isExpand&&i.length)for(var t=i.length-1;t>=0;t--){var d=i[t];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:t,thread:null},o.push(d)}}export function firstWalk(e,r){var i=e.isExpand?e.children:[],o=e.parentNode.children,t=e.hierNode.i?o[e.hierNode.i-1]:null;if(i.length){executeShifts(e);var d=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)/2;t?(e.hierNode.prelim=t.hierNode.prelim+r(e,t),e.hierNode.modifier=e.hierNode.prelim-d):e.hierNode.prelim=d}else t&&(e.hierNode.prelim=t.hierNode.prelim+r(e,t));e.parentNode.hierNode.defaultAncestor=apportion(e,t,e.parentNode.hierNode.defaultAncestor||o[0],r)}export function secondWalk(e){var r=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:r},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}export function separation(e){return arguments.length?e:defaultSeparation}export function radialCoordinate(e,r){var i={};return e-=Math.PI/2,i.x=r*Math.cos(e),i.y=r*Math.sin(e),i}export function getViewRect(e,r){return layout.getLayoutRect(e.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function executeShifts(e){for(var r=e.children,i=r.length,o=0,t=0;--i>=0;){var d=r[i];d.hierNode.prelim+=o,d.hierNode.modifier+=o,t+=d.hierNode.change,o+=d.hierNode.shift+t}}function apportion(e,r,i,o){if(r){for(var t=e,d=e,n=d.parentNode.children[0],h=r,a=t.hierNode.modifier,N=d.hierNode.modifier,f=n.hierNode.modifier,l=h.hierNode.modifier;h=nextRight(h),d=nextLeft(d),h&&d;){t=nextRight(t),n=nextLeft(n),t.hierNode.ancestor=e;var p=h.hierNode.prelim+l-d.hierNode.prelim-N+o(h,d);p>0&&(moveSubtree(nextAncestor(h,e,i),e,p),N+=p,a+=p),l+=h.hierNode.modifier,N+=d.hierNode.modifier,a+=t.hierNode.modifier,f+=n.hierNode.modifier}h&&!nextRight(t)&&(t.hierNode.thread=h,t.hierNode.modifier+=l-a),d&&!nextLeft(n)&&(n.hierNode.thread=d,n.hierNode.modifier+=N-f,i=e)}return i}function nextRight(e){var r=e.children;return r.length&&e.isExpand?r[r.length-1]:e.hierNode.thread}function nextLeft(e){var r=e.children;return r.length&&e.isExpand?r[0]:e.hierNode.thread}function nextAncestor(e,r,i){return e.hierNode.ancestor.parentNode===r.parentNode?e.hierNode.ancestor:i}function moveSubtree(e,r,i){var o=i/(r.hierNode.i-e.hierNode.i);r.hierNode.change-=o,r.hierNode.shift+=i,r.hierNode.modifier+=i,r.hierNode.prelim+=i,e.hierNode.change+=o}function defaultSeparation(e,r){return e.parentNode===r.parentNode?1:2}
//# sourceMappingURL=/sm/77c0cf0ed4753f33f95a1b617d8632f7c010344e23b63419cfa6716a267fde65.map