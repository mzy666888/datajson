/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/tree/treeLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{eachAfter,eachBefore}from"./traversalHelper";import{init,firstWalk,secondWalk,separation as sep,radialCoordinate,getViewRect}from"./layoutHelper";export default function(e,t){e.eachSeriesByType("tree",function(e){commonLayout(e,t)})}function commonLayout(e,t){var a=getViewRect(e,t);e.layoutInfo=a;var o=e.get("layout"),r=0,i=0,n=null;"radial"===o?(r=2*Math.PI,i=Math.min(a.height,a.width)/2,n=sep(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(r=a.width,i=a.height,n=sep());var h=e.getData().tree.root,u=h.children[0];if(u){init(h),eachAfter(u,firstWalk,n),h.hierNode.modifier=-u.hierNode.prelim,eachBefore(u,secondWalk);var d=u,f=u,c=u;eachBefore(u,function(e){var t=e.getLayout().x;t<d.getLayout().x&&(d=e),t>f.getLayout().x&&(f=e),e.depth>c.depth&&(c=e)});var p=d===f?1:n(d,f)/2,y=p-d.getLayout().x,l=0,L=0,g=0,s=0;if("radial"===o)l=r/(f.getLayout().x+p+y),L=i/(c.depth-1||1),eachBefore(u,function(e){g=(e.getLayout().x+y)*l,s=(e.depth-1)*L;var t=radialCoordinate(g,s);e.setLayout({x:t.x,y:t.y,rawX:g,rawY:s},!0)});else{var x=e.getOrient();"RL"===x||"LR"===x?(L=i/(f.getLayout().x+p+y),l=r/(c.depth-1||1),eachBefore(u,function(e){s=(e.getLayout().x+y)*L,g="LR"===x?(e.depth-1)*l:r-(e.depth-1)*l,e.setLayout({x:g,y:s},!0)})):"TB"!==x&&"BT"!==x||(l=r/(f.getLayout().x+p+y),L=i/(c.depth-1||1),eachBefore(u,function(e){g=(e.getLayout().x+y)*l,s="TB"===x?(e.depth-1)*L:i-(e.depth-1)*L,e.setLayout({x:g,y:s},!0)}))}}}
//# sourceMappingURL=/sm/6de827afc5b2c64df0bec70576e1e48c6bb0dcd99a5d61cdab51ebe9cbddb3be.map