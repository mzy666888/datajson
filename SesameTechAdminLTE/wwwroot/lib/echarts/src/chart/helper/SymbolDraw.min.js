/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/helper/SymbolDraw.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as graphic from"../../util/graphic";import SymbolClz from"./Symbol";import{isObject}from"zrender/src/core/util";function SymbolDraw(e){this.group=new graphic.Group,this._symbolCtor=e||SymbolClz}var symbolDrawProto=SymbolDraw.prototype;function symbolNeedsDraw(e,t,o,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(o))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(o,"symbol")}function normalizeUpdateOpt(e){return null==e||isObject(e)||(e={isIgnore:e}),e||{}}function makeSeriesScope(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}symbolDrawProto.updateData=function(e,t){t=normalizeUpdateOpt(t);var o=this.group,r=e.hostModel,a=this._data,i=this._symbolCtor,s=makeSeriesScope(e);a||o.removeAll(),e.diff(a).add(function(r){var a=e.getItemLayout(r);if(symbolNeedsDraw(e,a,r,t)){var l=new i(e,r,s);l.attr("position",a),e.setItemGraphicEl(r,l),o.add(l)}}).update(function(l,n){var m=a.getItemGraphicEl(n),p=e.getItemLayout(l);symbolNeedsDraw(e,p,l,t)?(m?(m.updateData(e,l,s),graphic.updateProps(m,{position:p},r)):(m=new i(e,l)).attr("position",p),o.add(m),e.setItemGraphicEl(l,m)):o.remove(m)}).remove(function(e){var t=a.getItemGraphicEl(e);t&&t.fadeOut(function(){o.remove(t)})}).execute(),this._data=e},symbolDrawProto.isPersistent=function(){return!0},symbolDrawProto.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,o){var r=e.getItemLayout(o);t.attr("position",r)})},symbolDrawProto.incrementalPrepareUpdate=function(e){this._seriesScope=makeSeriesScope(e),this._data=null,this.group.removeAll()},symbolDrawProto.incrementalUpdate=function(e,t,o){function r(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}o=normalizeUpdateOpt(o);for(var a=e.start;a<e.end;a++){var i=t.getItemLayout(a);if(symbolNeedsDraw(t,i,a,o)){var s=new this._symbolCtor(t,a,this._seriesScope);s.traverse(r),s.attr("position",i),this.group.add(s),t.setItemGraphicEl(a,s)}}},symbolDrawProto.remove=function(e){var t=this.group,o=this._data;o&&e?o.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)})}):t.removeAll()};export default SymbolDraw;
//# sourceMappingURL=/sm/e6c4ec64394fc2d05e7c15451ae7658e0ad6ebbb2214b1002ae92936ee4d8df5.map