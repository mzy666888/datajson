/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/helper/Symbol.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import{createSymbol}from"../../util/symbol";import*as graphic from"../../util/graphic";import{parsePercent}from"../../util/number";import{getDefaultLabel}from"./labelHelper";function SymbolClz(t,e,l){graphic.Group.call(this),this.updateData(t,e,l)}var symbolProto=SymbolClz.prototype,getSymbolSize=SymbolClz.getSymbolSize=function(t,e){var l=t.getItemVisual(e,"symbolSize");return l instanceof Array?l.slice():[+l,+l]};function getScale(t){return[t[0]/2,t[1]/2]}function driftSymbol(t,e){this.parent.drift(t,e)}symbolProto._createSymbol=function(t,e,l,o,a){this.removeAll();var i=e.getItemVisual(l,"color"),s=createSymbol(t,-1,-1,2,2,i,a);s.attr({z2:100,culling:!0,scale:getScale(o)}),s.drift=driftSymbol,this._symbolType=t,this.add(s)},symbolProto.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},symbolProto.getSymbolPath=function(){return this.childAt(0)},symbolProto.getScale=function(){return this.childAt(0).scale},symbolProto.highlight=function(){this.childAt(0).trigger("emphasis")},symbolProto.downplay=function(){this.childAt(0).trigger("normal")},symbolProto.setZ=function(t,e){var l=this.childAt(0);l.zlevel=t,l.z=e},symbolProto.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},symbolProto.updateData=function(t,e,l){this.silent=!1;var o=t.getItemVisual(e,"symbol")||"circle",a=t.hostModel,i=getSymbolSize(t,e),s=o!==this._symbolType;if(s){var r=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(o,t,e,i,r)}else{(n=this.childAt(0)).silent=!1,graphic.updateProps(n,{scale:getScale(i)},a,e)}if(this._updateCommon(t,e,i,l),s){var n=this.childAt(0),c=l&&l.fadeIn,m={scale:n.scale.slice()};c&&(m.style={opacity:n.style.opacity}),n.scale=[0,0],c&&(n.style.opacity=0),graphic.initProps(n,m,a,e)}this._seriesModel=a};var normalStyleAccessPath=["itemStyle"],emphasisStyleAccessPath=["emphasis","itemStyle"],normalLabelAccessPath=["label"],emphasisLabelAccessPath=["emphasis","label"];function highDownOnUpdate(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var l=this.__symbolOriginalScale,o=l[1]/l[0],a={scale:[Math.max(1.1*l[0],l[0]+3),Math.max(1.1*l[1],l[1]+3*o)]};this.animateTo(a,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}symbolProto._updateCommon=function(t,e,l,o){var a=this.childAt(0),i=t.hostModel,s=t.getItemVisual(e,"color");"image"!==a.type?a.useStyle({strokeNoScale:!0}):a.setStyle({opacity:null,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var r=o&&o.itemStyle,n=o&&o.hoverItemStyle,c=o&&o.symbolRotate,m=o&&o.symbolOffset,h=o&&o.labelModel,y=o&&o.hoverLabelModel,u=o&&o.hoverAnimation,b=o&&o.cursorStyle;if(!o||t.hasItemOption){var p=o&&o.itemModel?o.itemModel:t.getItemModel(e);r=p.getModel(normalStyleAccessPath).getItemStyle(["color"]),n=p.getModel(emphasisStyleAccessPath).getItemStyle(),c=p.getShallow("symbolRotate"),m=p.getShallow("symbolOffset"),h=p.getModel(normalLabelAccessPath),y=p.getModel(emphasisLabelAccessPath),u=p.getShallow("hoverAnimation"),b=p.getShallow("cursor")}else n=zrUtil.extend({},n);var g=a.style;a.attr("rotation",(c||0)*Math.PI/180||0),m&&a.attr("position",[parsePercent(m[0],l[0]),parsePercent(m[1],l[1])]),b&&a.attr("cursor",b),a.setColor(s,o&&o.symbolInnerColor),a.setStyle(r);var d=t.getItemVisual(e,"opacity");null!=d&&(g.opacity=d);var S=t.getItemVisual(e,"liftZ"),f=a.__z2Origin;null!=S?null==f&&(a.__z2Origin=a.z2,a.z2+=S):null!=f&&(a.z2=f,a.__z2Origin=null);var v=o&&o.useNameLabel;graphic.setLabelStyle(g,n,h,y,{labelFetcher:i,labelDataIndex:e,defaultText:function(e,l){return v?t.getName(e):getDefaultLabel(t,e)},isRectText:!0,autoColor:s}),a.__symbolOriginalScale=getScale(l),a.hoverStyle=n,a.highDownOnUpdate=u&&i.isAnimationEnabled()?highDownOnUpdate:null,graphic.setHoverStyle(a)},symbolProto.fadeOut=function(t,e){var l=this.childAt(0);this.silent=l.silent=!0,(!e||!e.keepLabel)&&(l.style.text=null),graphic.updateProps(l,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},zrUtil.inherits(SymbolClz,graphic.Group);export default SymbolClz;
//# sourceMappingURL=/sm/b593fdf078b6f11fbbad5871e49a00fe3907b16de51c81c1e83ccfa70e1aab1b.map