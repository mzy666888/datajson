/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/helper/LargeLineDraw.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as graphic from"../../util/graphic";import IncrementalDisplayable from"zrender/src/graphic/IncrementalDisplayable";import*as lineContain from"zrender/src/contain/line";import*as quadraticContain from"zrender/src/contain/quadratic";var LargeLineShape=graphic.extendShape({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,n){var r=n.segs,t=n.curveness;if(n.polyline)for(var a=0;a<r.length;){var i=r[a++];if(i>0){e.moveTo(r[a++],r[a++]);for(var o=1;o<i;o++)e.lineTo(r[a++],r[a++])}}else for(a=0;a<r.length;){var l=r[a++],s=r[a++],c=r[a++],u=r[a++];if(e.moveTo(l,s),t>0){var h=(l+c)/2-(s-u)*t,p=(s+u)/2-(c-l)*t;e.quadraticCurveTo(h,p,c,u)}else e.lineTo(c,u)}},findDataIndex:function(e,n){var r=this.shape,t=r.segs,a=r.curveness;if(r.polyline)for(var i=0,o=0;o<t.length;){var l=t[o++];if(l>0)for(var s=t[o++],c=t[o++],u=1;u<l;u++){var h=t[o++],p=t[o++];if(lineContain.containStroke(s,c,h,p))return i}i++}else for(i=0,o=0;o<t.length;){s=t[o++],c=t[o++],h=t[o++],p=t[o++];if(a>0){var g=(s+h)/2-(c-p)*a,m=(c+p)/2-(h-s)*a;if(quadraticContain.containStroke(s,c,g,m,h,p))return i}else if(lineContain.containStroke(s,c,h,p))return i;i++}return-1}});function LargeLineDraw(){this.group=new graphic.Group}var largeLineProto=LargeLineDraw.prototype;largeLineProto.isPersistent=function(){return!this._incremental},largeLineProto.updateData=function(e){this.group.removeAll();var n=new LargeLineShape({rectHover:!0,cursor:"default"});n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e),this.group.add(n),this._incremental=null},largeLineProto.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>5e5?(this._incremental||(this._incremental=new IncrementalDisplayable({silent:!0})),this.group.add(this._incremental)):this._incremental=null},largeLineProto.incrementalUpdate=function(e,n){var r=new LargeLineShape;r.setShape({segs:n.getLayout("linesPoints")}),this._setCommon(r,n,!!this._incremental),this._incremental?this._incremental.addDisplayable(r,!0):(r.rectHover=!0,r.cursor="default",r.__startIndex=e.start,this.group.add(r))},largeLineProto.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},largeLineProto._setCommon=function(e,n,r){var t=n.hostModel;e.setShape({polyline:t.get("polyline"),curveness:t.get("lineStyle.curveness")}),e.useStyle(t.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=n.getVisual("color");a&&e.setStyle("stroke",a),e.setStyle("fill"),r||(e.seriesIndex=t.seriesIndex,e.on("mousemove",function(n){e.dataIndex=null;var r=e.findDataIndex(n.offsetX,n.offsetY);r>0&&(e.dataIndex=r+e.__startIndex)}))},largeLineProto._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};export default LargeLineDraw;
//# sourceMappingURL=/sm/b1a596fe081419447fcf9d4856aa0c56456625891fd456d8dc4203c9e3339477.map