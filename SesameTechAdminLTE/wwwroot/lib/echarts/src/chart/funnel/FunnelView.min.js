/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/funnel/FunnelView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as graphic from"../../util/graphic";import*as zrUtil from"zrender/src/core/util";import ChartView from"../../view/Chart";function FunnelPiece(e,t){graphic.Group.call(this);var i=new graphic.Polygon,o=new graphic.Polyline,l=new graphic.Text;this.add(i),this.add(o),this.add(l),this.highDownOnUpdate=function(e,t){"emphasis"===t?(o.ignore=o.hoverIgnore,l.ignore=l.hoverIgnore):(o.ignore=o.normalIgnore,l.ignore=l.normalIgnore)},this.updateData(e,t,!0)}var funnelPieceProto=FunnelPiece.prototype,opacityAccessPath=["itemStyle","opacity"];funnelPieceProto.updateData=function(e,t,i){var o=this.childAt(0),l=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t),n=e.getItemModel(t).get(opacityAccessPath);n=null==n?1:n,o.useStyle({}),i?(o.setShape({points:r.points}),o.setStyle({opacity:0}),graphic.initProps(o,{style:{opacity:n}},l,t)):graphic.updateProps(o,{style:{opacity:n},shape:{points:r.points}},l,t);var s=a.getModel("itemStyle"),h=e.getItemVisual(t,"color");o.setStyle(zrUtil.defaults({lineJoin:"round",fill:h},s.getItemStyle(["opacity"]))),o.hoverStyle=s.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),graphic.setHoverStyle(this)},funnelPieceProto._updateLabel=function(e,t){var i=this.childAt(1),o=this.childAt(2),l=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t).label,n=e.getItemVisual(t,"color");graphic.updateProps(i,{shape:{points:r.linePoints||r.linePoints}},l,t),graphic.updateProps(o,{style:{x:r.x,y:r.y}},l,t),o.attr({rotation:r.rotation,origin:[r.x,r.y],z2:10});var s=a.getModel("label"),h=a.getModel("emphasis.label"),g=a.getModel("labelLine"),p=a.getModel("emphasis.labelLine");n=e.getItemVisual(t,"color");graphic.setLabelStyle(o.style,o.hoverStyle={},s,h,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:n,useInsideStyle:!!r.inside},{textAlign:r.textAlign,textVerticalAlign:r.verticalAlign}),o.ignore=o.normalIgnore=!s.get("show"),o.hoverIgnore=!h.get("show"),i.ignore=i.normalIgnore=!g.get("show"),i.hoverIgnore=!p.get("show"),i.setStyle({stroke:n}),i.setStyle(g.getModel("lineStyle").getLineStyle()),i.hoverStyle=p.getModel("lineStyle").getLineStyle()},zrUtil.inherits(FunnelPiece,graphic.Group);var FunnelView=ChartView.extend({type:"funnel",render:function(e,t,i){var o=e.getData(),l=this._data,a=this.group;o.diff(l).add(function(e){var t=new FunnelPiece(o,e);o.setItemGraphicEl(e,t),a.add(t)}).update(function(e,t){var i=l.getItemGraphicEl(t);i.updateData(o,e),a.add(i),o.setItemGraphicEl(e,i)}).remove(function(e){var t=l.getItemGraphicEl(e);a.remove(t)}).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});export default FunnelView;
//# sourceMappingURL=/sm/88b211b0563a8949ce77ab16628b629841c19619279c05c99c34984d078be3da.map