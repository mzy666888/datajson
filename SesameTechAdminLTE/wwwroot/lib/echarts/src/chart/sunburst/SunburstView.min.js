/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/sunburst/SunburstView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import ChartView from"../../view/Chart";import SunburstPiece from"./SunburstPiece";import DataDiffer from"../../data/DataDiffer";var ROOT_TO_NODE_ACTION="sunburstRootToNode",SunburstView=ChartView.extend({type:"sunburst",init:function(){},render:function(e,i,t,r){var o=this;this.seriesModel=e,this.api=t,this.ecModel=i;var n=e.getData(),c=n.tree.root,a=e.getViewRoot(),l=this.group,u=e.get("renderLabelForZeroData"),s=[];a.eachNode(function(e){s.push(e)});var h=this._oldChildren||[];if(function(t,r){if(0===t.length&&0===r.length)return;function o(e){return e.getId()}function a(o,a){var s=null==o?null:t[o],h=null==a?null:r[a];!function(t,r){u||!t||t.getValue()||(t=null);if(t!==c&&r!==c)if(r&&r.piece)t?(r.piece.updateData(!1,t,"normal",e,i),n.setItemGraphicEl(t.dataIndex,r.piece)):function(e){if(!e)return;e.piece&&(l.remove(e.piece),e.piece=null)}(r);else if(t){var o=new SunburstPiece(t,e,i);l.add(o),n.setItemGraphicEl(t.dataIndex,o)}}(s,h)}new DataDiffer(r,t,o,o).add(a).update(a).remove(zrUtil.curry(a,null)).execute()}(s,h),function(t,r){if(r.depth>0){o.virtualPiece?o.virtualPiece.updateData(!1,t,"normal",e,i):(o.virtualPiece=new SunburstPiece(t,e,i),l.add(o.virtualPiece)),r.piece._onclickEvent&&r.piece.off("click",r.piece._onclickEvent);var n=function(e){o._rootToNode(r.parentNode)};r.piece._onclickEvent=n,o.virtualPiece.on("click",n)}else o.virtualPiece&&(l.remove(o.virtualPiece),o.virtualPiece=null)}(c,a),r&&r.highlight&&r.highlight.piece){var d=e.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(d)}else if(r&&r.unhighlight){var f=this.virtualPiece;!f&&c.children.length&&(f=c.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=s},dispose:function(){},_initEvents:function(){var e=this,i=function(i){var t=!1;e.seriesModel.getViewRoot().eachNode(function(r){if(!t&&r.piece&&r.piece.childAt(0)===i.target){var o=r.getModel().get("nodeClick");if("rootToNode"===o)e._rootToNode(r);else if("link"===o){var n=r.getModel(),c=n.get("link");if(c){var a=n.get("target",!0)||"_blank";window.open(c,a)}}t=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",i),this.group._onclickEvent=i},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,i){var t=i.getData().getItemLayout(0);if(t){var r=e[0]-t.cx,o=e[1]-t.cy,n=Math.sqrt(r*r+o*o);return n<=t.r&&n>=t.r0}}});export default SunburstView;
//# sourceMappingURL=/sm/7d311e1642a95e732cb15dadca4f639f4f1ef0b83d341e230658427cffe7e428.map