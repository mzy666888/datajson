/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/sunburst/sunburstLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{parsePercent}from"../../util/number";import*as zrUtil from"zrender/src/core/util";var RADIAN=Math.PI/180;export default function(e,t,r,n){t.eachSeriesByType(e,function(e){var t=e.get("center"),n=e.get("radius");zrUtil.isArray(n)||(n=[0,n]),zrUtil.isArray(t)||(t=[t,t]);var i=r.getWidth(),a=r.getHeight(),l=Math.min(i,a),c=parsePercent(t[0],i),o=parsePercent(t[1],a),g=parsePercent(n[0],l/2),u=parsePercent(n[1],l/2),s=-e.get("startAngle")*RADIAN,h=e.get("minAngle")*RADIAN,d=e.getData().tree.root,f=e.getViewRoot(),p=f.depth,A=e.get("sort");null!=A&&initChildren(f,A);var v=0;zrUtil.each(f.children,function(e){!isNaN(e.getValue())&&v++});var P=f.getValue(),y=Math.PI/(P||v)*2,m=f.depth>0,I=f.height-(m?-1:1),z=(u-g)/(I||1),U=e.get("clockwise"),V=e.get("stillShowZeroSum"),w=U?1:-1,x=function(e,t){if(e){var r=t;if(e!==d){var n=e.getValue(),i=0===P&&V?y:n*y;i<h&&(i=h),r=t+w*i;var a=e.depth-p-(m?-1:1),u=g+z*a,s=g+z*(a+1),f=e.getModel();null!=f.get("r0")&&(u=parsePercent(f.get("r0"),l/2)),null!=f.get("r")&&(s=parsePercent(f.get("r"),l/2)),e.setLayout({angle:i,startAngle:t,endAngle:r,clockwise:U,cx:c,cy:o,r0:u,r:s})}if(e.children&&e.children.length){var A=0;zrUtil.each(e.children,function(e){A+=x(e,t+A)})}return r-t}};if(m){var M=g,N=g+z,D=2*Math.PI;d.setLayout({angle:D,startAngle:s,endAngle:s+D,clockwise:U,cx:c,cy:o,r0:M,r:N})}x(f,s)})}function initChildren(e,t){var r=e.children||[];e.children=sort(r,t),r.length&&zrUtil.each(e.children,function(e){initChildren(e,t)})}function sort(e,t){if("function"==typeof t)return e.sort(t);var r="asc"===t;return e.sort(function(e,t){var n=(e.getValue()-t.getValue())*(r?1:-1);return 0===n?(e.dataIndex-t.dataIndex)*(r?-1:1):n})}
//# sourceMappingURL=/sm/ad6ced01363cb226c0b5a9fc195a10284304a8e4298128b489ba8cb9c6856222.map