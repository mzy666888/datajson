/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/treemap/treemapVisual.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import VisualMapping from"../../visual/VisualMapping";import*as zrColor from"zrender/src/tool/color";import*as zrUtil from"zrender/src/core/util";var isArray=zrUtil.isArray,ITEM_STYLE_NORMAL="itemStyle";export default{seriesType:"treemap",reset:function(l,e,r,a){var o=l.getData().tree,t=o.root,i=l.getModel(ITEM_STYLE_NORMAL);t.isRemoved()||travelTree(t,{},zrUtil.map(o.levelModels,function(l){return l?l.get(ITEM_STYLE_NORMAL):null}),i,l.getViewRoot().getAncestors(),l)}};function travelTree(l,e,r,a,o,t){var i=l.getModel(),n=l.getLayout();if(n&&!n.invisible&&n.isInView){var u,g=l.getModel(ITEM_STYLE_NORMAL),s=buildVisuals(g,e,r[l.depth],a),c=g.get("borderColor"),p=g.get("borderColorSaturation");null!=p&&(c=calculateBorderColor(p,u=calculateColor(s,l))),l.setVisual("borderColor",c);var d=l.viewChildren;if(d&&d.length){var f=buildVisualMapping(l,i,n,g,s,d);zrUtil.each(d,function(l,e){(l.depth>=o.length||l===o[l.depth])&&travelTree(l,mapVisual(i,s,l,e,f,t),r,a,o,t)})}else u=calculateColor(s,l),l.setVisual("color",u)}}function buildVisuals(l,e,r,a){var o=zrUtil.extend({},e);return zrUtil.each(["color","colorAlpha","colorSaturation"],function(t){var i=l.get(t,!0);null==i&&r&&(i=r[t]),null==i&&(i=e[t]),null==i&&(i=a.get(t)),null!=i&&(o[t]=i)}),o}function calculateColor(l){var e=getValueVisualDefine(l,"color");if(e){var r=getValueVisualDefine(l,"colorAlpha"),a=getValueVisualDefine(l,"colorSaturation");return a&&(e=zrColor.modifyHSL(e,null,null,a)),r&&(e=zrColor.modifyAlpha(e,r)),e}}function calculateBorderColor(l,e){return null!=e?zrColor.modifyHSL(e,null,null,l):null}function getValueVisualDefine(l,e){var r=l[e];if(null!=r&&"none"!==r)return r}function buildVisualMapping(l,e,r,a,o,t){if(t&&t.length){var i=getRangeVisual(e,"color")||null!=o.color&&"none"!==o.color&&(getRangeVisual(e,"colorAlpha")||getRangeVisual(e,"colorSaturation"));if(i){var n=e.get("visualMin"),u=e.get("visualMax"),g=r.dataExtent.slice();null!=n&&n<g[0]&&(g[0]=n),null!=u&&u>g[1]&&(g[1]=u);var s=e.get("colorMappingBy"),c={type:i.name,dataExtent:g,visual:i.range};"color"!==c.type||"index"!==s&&"id"!==s?c.mappingMethod="linear":(c.mappingMethod="category",c.loop=!0);var p=new VisualMapping(c);return p.__drColorMappingBy=s,p}}}function getRangeVisual(l,e){var r=l.get(e);return isArray(r)&&r.length?{name:e,range:r}:null}function mapVisual(l,e,r,a,o,t){var i=zrUtil.extend({},e);if(o){var n=o.type,u="color"===n&&o.__drColorMappingBy,g="index"===u?a:"id"===u?t.mapIdToIndex(r.getId()):r.getValue(l.get("visualDimension"));i[n]=o.mapValueToVisual(g)}return i}
//# sourceMappingURL=/sm/abe6de64ff86486e5589550efbd90d5bdef8735a55506354137061974e5d1331.map