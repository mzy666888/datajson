/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/themeRiver/ThemeRiverView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as echarts from"../../echarts";import{Polygon}from"../line/poly";import*as graphic from"../../util/graphic";import{bind,extend}from"zrender/src/core/util";import DataDiffer from"../../data/DataDiffer";export default echarts.extendChartView({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,i){var a=e.getData(),r=this.group,o=e.getLayerSeries(),s=a.getLayout("layoutInfo"),n=s.rect,h=s.boundaryGap;function d(e){return e.name}r.attr("position",[0,n.y+h[0]]);var l=new DataDiffer(this._layersSeries||[],o,d,d),p={};function g(t,i,s){var n=this._layers;if("remove"!==t){for(var h,d,l,g=[],c=[],y=o[i].indices,m=0;m<y.length;m++){var u=a.getItemLayout(y[m]),f=u.x,v=u.y0,x=u.y;g.push([f,v]),c.push([f,v+x]),h=a.getItemVisual(y[m],"color")}var S=a.getItemLayout(y[0]),w=a.getItemModel(y[m-1]),P=w.getModel("label"),b=P.get("margin");if("add"===t){var D=p[i]=new graphic.Group;d=new Polygon({shape:{points:g,stackedOnPoints:c,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),l=new graphic.Text({style:{x:S.x-b,y:S.y0+S.y/2}}),D.add(d),D.add(l),r.add(D),d.setClipPath(createGridClipShape(d.getBoundingRect(),e,function(){d.removeClipPath()}))}else{D=n[s];d=D.childAt(0),l=D.childAt(1),r.add(D),p[i]=D,graphic.updateProps(d,{shape:{points:g,stackedOnPoints:c}},e),graphic.updateProps(l,{style:{x:S.x-b,y:S.y0+S.y/2}},e)}var I=w.getModel("emphasis.itemStyle"),C=w.getModel("itemStyle");graphic.setTextStyle(l.style,P,{text:P.get("show")?e.getFormattedLabel(y[m-1],"normal")||a.getName(y[m-1]):null,textVerticalAlign:"middle"}),d.setStyle(extend({fill:h},C.getItemStyle(["color"]))),graphic.setHoverStyle(d,I.getItemStyle())}else r.remove(n[i])}l.add(bind(g,this,"add")).update(bind(g,this,"update")).remove(bind(g,this,"remove")).execute(),this._layersSeries=o,this._layers=p},dispose:function(){}});function createGridClipShape(e,t,i){var a=new graphic.Rect({shape:{x:e.x-10,y:e.y-10,width:0,height:e.height+20}});return graphic.initProps(a,{shape:{width:e.width+20,height:e.height+20}},t,i),a}
//# sourceMappingURL=/sm/aa383ccd73990b3666f762aaf3eab672482fcfac7b3c9ef030f687b454a32df2.map