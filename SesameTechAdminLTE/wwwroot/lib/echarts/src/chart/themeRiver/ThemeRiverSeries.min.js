/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/themeRiver/ThemeRiverSeries.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import SeriesModel from"../../model/Series";import createDimensions from"../../data/helper/createDimensions";import{getDimensionTypeByAxis}from"../../data/helper/dimensionHelper";import List from"../../data/List";import*as zrUtil from"zrender/src/core/util";import{groupData}from"../../util/model";import{encodeHTML}from"../../util/format";var DATA_NAME_INDEX=2,ThemeRiverSeries=SeriesModel.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){ThemeRiverSeries.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(e){var t=e.length,i=groupData(e,function(e){return e[2]}),n=[];i.buckets.each(function(e,t){n.push({name:t,dataList:e})});for(var a=n.length,r=-1,s=-1,o=0;o<a;++o){var l=n[o].dataList.length;l>r&&(r=l,s=o)}for(var m=0;m<a;++m)if(m!==s)for(var u=n[m].name,d=0;d<r;++d){for(var f=n[s].dataList[d][0],g=n[m].dataList.length,p=-1,c=0;c<g;++c){if(n[m].dataList[c][0]===f){p=c;break}}-1===p&&(e[t]=[],e[t][0]=f,e[t][1]=0,e[t][2]=u,t++)}return e},getInitialData:function(e,t){for(var i=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),n=zrUtil.filter(e.data,function(e){return void 0!==e[2]}),a=this.fixData(n||[]),r=[],s=this.nameMap=zrUtil.createHashMap(),o=0,l=0;l<a.length;++l)r.push(a[l][DATA_NAME_INDEX]),s.get(a[l][DATA_NAME_INDEX])||(s.set(a[l][DATA_NAME_INDEX],o),o++);var m=createDimensions(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),u=new List(m,this);return u.initData(a),u},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),i=[],n=0;n<t;++n)i[n]=n;var a=e.mapDimension("single"),r=groupData(i,function(t){return e.get("name",t)}),s=[];return r.buckets.each(function(t,i){t.sort(function(t,i){return e.get(a,t)-e.get(a,i)}),s.push({name:i,indices:t})}),s},getAxisTooltipData:function(e,t,i){zrUtil.isArray(e)||(e=e?[e]:[]);for(var n,a=this.getData(),r=this.getLayerSeries(),s=[],o=r.length,l=0;l<o;++l){for(var m=Number.MAX_VALUE,u=-1,d=r[l].indices.length,f=0;f<d;++f){var g=a.get(e[0],r[l].indices[f]),p=Math.abs(g-t);p<=m&&(n=g,m=p,u=r[l].indices[f])}s.push(u)}return{dataIndices:s,nestestValue:n}},formatTooltip:function(e){var t=this.getData(),i=t.getName(e),n=t.get(t.mapDimension("value"),e);return(isNaN(n)||null==n)&&(n="-"),encodeHTML(i+" : "+n)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});export default ThemeRiverSeries;
//# sourceMappingURL=/sm/f2bf269e9cfc8e6c6fcb17796c3069943cd2d8c2bda6a092384dab55cd8834aa.map