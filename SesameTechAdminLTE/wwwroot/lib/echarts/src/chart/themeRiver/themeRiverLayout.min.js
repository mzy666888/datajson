/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/themeRiver/themeRiverLayout.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import*as numberUtil from"../../util/number";export default function(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),r=e.coordinateSystem,i={},n=r.getRect();i.rect=n;var a=e.get("boundaryGap"),o=r.getAxis();(i.boundaryGap=a,"horizontal"===o.orient)?(a[0]=numberUtil.parsePercent(a[0],n.height),a[1]=numberUtil.parsePercent(a[1],n.height),themeRiverLayout(t,e,n.height-a[0]-a[1])):(a[0]=numberUtil.parsePercent(a[0],n.width),a[1]=numberUtil.parsePercent(a[1],n.width),themeRiverLayout(t,e,n.width-a[0]-a[1]));t.setLayout("layoutInfo",i)})}function themeRiverLayout(e,t,r){if(e.count())for(var i,n=t.coordinateSystem,a=t.getLayerSeries(),o=e.mapDimension("single"),u=e.mapDimension("value"),m=zrUtil.map(a,function(t){return zrUtil.map(t.indices,function(t){var r=n.dataToPoint(e.get(o,t));return r[1]=e.get(u,t),r})}),s=computeBaseline(m),c=s.y0,l=r/s.max,y=a.length,h=a[0].indices.length,f=0;f<h;++f){i=c[f]*l,e.setItemLayout(a[0].indices[f],{layerIndex:0,x:m[0][f][0],y0:i,y:m[0][f][1]*l});for(var p=1;p<y;++p)i+=m[p-1][f][1]*l,e.setItemLayout(a[p].indices[f],{layerIndex:p,x:m[p][f][0],y0:i,y:m[p][f][1]*l})}}function computeBaseline(e){for(var t=e.length,r=e[0].length,i=[],n=[],a=0,o={},u=0;u<r;++u){for(var m=0,s=0;m<t;++m)s+=e[m][u][1];s>a&&(a=s),i.push(s)}for(var c=0;c<r;++c)n[c]=(a-i[c])/2;a=0;for(var l=0;l<r;++l){var y=i[l]+n[l];y>a&&(a=y)}return o.y0=n,o.max=a,o}
//# sourceMappingURL=/sm/075a352f144c58b28f2b7a1d7a615c9876b30a927148b54821be161cf07aa1aa.map