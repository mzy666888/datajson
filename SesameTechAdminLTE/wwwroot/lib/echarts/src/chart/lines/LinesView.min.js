/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/lines/LinesView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import*as echarts from"../../echarts";import LineDraw from"../helper/LineDraw";import EffectLine from"../helper/EffectLine";import Line from"../helper/Line";import Polyline from"../helper/Polyline";import EffectPolyline from"../helper/EffectPolyline";import LargeLineDraw from"../helper/LargeLineDraw";import linesLayout from"./linesLayout";import{createClipPath}from"../helper/createClipPathFromCoordSys";export default echarts.extendChartView({type:"lines",init:function(){},render:function(e,t,i){var r=e.getData(),a=this._updateLineDraw(r,e),n=e.get("zlevel"),l=e.get("effect.trailLength"),o=i.getZr(),s="svg"===o.painter.getType();if(s||o.painter.getLayer(n).clear(!0),null==this._lastZlevel||s||o.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&l){if(__DEV__){var h=!1;t.eachSeries(function(t){t!==e&&t.get("zlevel")===n&&(h=!0)}),h&&console.warn("Lines with trail effect should have an individual zlevel")}s||o.configLayer(n,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})}a.updateData(r);var f=e.get("clip",!0)&&createClipPath(e.coordinateSystem,!1,e);f?this.group.setClipPath(f):this.group.removeClipPath(),this._lastZlevel=n,this._finished=!0},incrementalPrepareRender:function(e,t,i){var r=e.getData();this._updateLineDraw(r,e).incrementalPrepareUpdate(r),this._clearLayer(i),this._finished=!1},incrementalRender:function(e,t,i){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,i){var r=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var n=linesLayout.reset(e);n.progress&&n.progress({start:0,end:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(i)},_updateLineDraw:function(e,t){var i=this._lineDraw,r=this._showEffect(t),a=!!t.get("polyline"),n=t.pipelineContext.large;return __DEV__&&r&&n&&console.warn("Large lines not support effect"),i&&r===this._hasEffet&&a===this._isPolyline&&n===this._isLargeDraw||(i&&i.remove(),i=this._lineDraw=n?new LargeLineDraw:new LineDraw(a?r?EffectPolyline:Polyline:r?EffectLine:Line),this._hasEffet=r,this._isPolyline=a,this._isLargeDraw=n,this.group.removeAll()),this.group.add(i.group),i},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});
//# sourceMappingURL=/sm/650e52e171f6df5600154c123c97d27bd509b1b3c14861784f5584392dfdbca5.map