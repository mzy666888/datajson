/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/chart/lines/LinesSeries.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import SeriesModel from"../../model/Series";import List from"../../data/List";import{concatArray,mergeAll,map}from"zrender/src/core/util";import{encodeHTML}from"../../util/format";import CoordinateSystem from"../../CoordinateSystem";var Uint32Arr="undefined"==typeof Uint32Array?Array:Uint32Array,Float64Arr="undefined"==typeof Float64Array?Array:Float64Array;function compatEc2(t){var o=t.data;o&&o[0]&&o[0][0]&&o[0][0].coord&&(__DEV__&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),t.data=map(o,function(t){var o={coords:[t[0].coord,t[1].coord]};return t[0].name&&(o.fromName=t[0].name),t[1].name&&(o.toName=t[1].name),mergeAll([o,t[0],t[1]])}))}var LinesSeries=SeriesModel.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],compatEc2(t);var o=this._processFlatCoordsArray(t.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(t.data=new Float32Array(o.count)),LinesSeries.superApply(this,"init",arguments)},mergeOption:function(t){if(t.data=t.data||[],compatEc2(t),t.data){var o=this._processFlatCoordsArray(t.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(t.data=new Float32Array(o.count))}LinesSeries.superApply(this,"mergeOption",arguments)},appendData:function(t){var o=this._processFlatCoordsArray(t.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),t.data=new Float32Array(o.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var o=this.getData().getItemModel(t),r=o.option instanceof Array?o.option:o.getShallow("coords");if(__DEV__&&!(r instanceof Array&&r.length>0&&r[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(r)+". Lines must have 2d coords array in data item.");return r},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,o){if(this._flatCoordsOffset){for(var r=this._flatCoordsOffset[2*t],e=this._flatCoordsOffset[2*t+1],a=0;a<e;a++)o[a]=o[a]||[],o[a][0]=this._flatCoords[r+2*a],o[a][1]=this._flatCoords[r+2*a+1];return e}var s=this._getCoordsFromItemModel(t);for(a=0;a<s.length;a++)o[a]=o[a]||[],o[a][0]=s[a][0],o[a][1]=s[a][1];return s.length},_processFlatCoordsArray:function(t){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),"number"==typeof t[0]){for(var r=t.length,e=new Uint32Arr(r),a=new Float64Arr(r),s=0,n=0,i=0,l=0;l<r;){i++;var f=t[l++];e[n++]=s+o,e[n++]=f;for(var d=0;d<f;d++){var c=t[l++],h=t[l++];if(a[s++]=c,a[s++]=h,l>r&&__DEV__)throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(e.buffer,0,n),flatCoords:a,count:i}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,o){if(__DEV__&&!CoordinateSystem.get(t.coordinateSystem))throw new Error("Unkown coordinate system "+t.coordinateSystem);var r=new List(["value"],this);return r.hasItemOption=!1,r.initData(t.data,[],function(t,o,e,a){if(t instanceof Array)return NaN;r.hasItemOption=!0;var s=t.value;return null!=s?s instanceof Array?s[a]:s:void 0}),r},formatTooltip:function(t){var o=this.getData().getItemModel(t),r=o.get("name");if(r)return r;var e=o.get("fromName"),a=o.get("toName"),s=[];return null!=e&&s.push(e),null!=a&&s.push(a),encodeHTML(s.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});export default LinesSeries;
//# sourceMappingURL=/sm/4a5fcc5f5a466371415d747fe6ab0a96ad95535ae3b446226796e45f2faa04a7.map