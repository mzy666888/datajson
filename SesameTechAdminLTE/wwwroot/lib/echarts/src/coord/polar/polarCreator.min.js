/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/coord/polar/polarCreator.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import*as zrUtil from"zrender/src/core/util";import Polar from"./Polar";import{parsePercent}from"../../util/number";import{createScaleByModel,niceScaleExtent}from"../../coord/axisHelper";import CoordinateSystem from"../../CoordinateSystem";import{getStackedDimension}from"../../data/helper/dataStackHelper";import"./PolarModel";function resizePolar(e,t,r){var a=t.get("center"),n=r.getWidth(),o=r.getHeight();e.cx=parsePercent(a[0],n),e.cy=parsePercent(a[1],o);var i=e.getRadiusAxis(),s=Math.min(n,o)/2,l=t.get("radius");null==l?l=[0,"100%"]:zrUtil.isArray(l)||(l=[0,l]),l=[parsePercent(l[0],s),parsePercent(l[1],s)],i.inverse?i.setExtent(l[1],l[0]):i.setExtent(l[0],l[1])}function updatePolarScale(e,t){var r=this,a=r.getAngleAxis(),n=r.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),n.scale.setExtent(1/0,-1/0),e.eachSeries(function(e){if(e.coordinateSystem===r){var t=e.getData();zrUtil.each(t.mapDimension("radius",!0),function(e){n.scale.unionExtentFromData(t,getStackedDimension(t,e))}),zrUtil.each(t.mapDimension("angle",!0),function(e){a.scale.unionExtentFromData(t,getStackedDimension(t,e))})}}),niceScaleExtent(a.scale,a.model),niceScaleExtent(n.scale,n.model),"category"===a.type&&!a.onBand){var o=a.getExtent(),i=360/a.scale.count();a.inverse?o[1]+=i:o[1]-=i,a.setExtent(o[0],o[1])}}function setAxis(e,t){if(e.type=t.get("type"),e.scale=createScaleByModel(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var r=t.get("startAngle");e.setExtent(r,r+(e.inverse?-360:360))}t.axis=e,e.model=t}var polarCreator={dimensions:Polar.prototype.dimensions,create:function(e,t){var r=[];return e.eachComponent("polar",function(e,a){var n=new Polar(a);n.update=updatePolarScale;var o=n.getRadiusAxis(),i=n.getAngleAxis(),s=e.findAxisModel("radiusAxis"),l=e.findAxisModel("angleAxis");setAxis(o,s),setAxis(i,l),resizePolar(n,e,t),r.push(n),e.coordinateSystem=n,n.model=e}),e.eachSeries(function(t){if("polar"===t.get("coordinateSystem")){var r=e.queryComponents({mainType:"polar",index:t.get("polarIndex"),id:t.get("polarId")})[0];if(__DEV__&&!r)throw new Error('Polar "'+zrUtil.retrieve(t.get("polarIndex"),t.get("polarId"),0)+'" not found');t.coordinateSystem=r.coordinateSystem}}),r}};CoordinateSystem.register("polar",polarCreator);
//# sourceMappingURL=/sm/afb05874e680ebe8d3037ea0d5246389de7217e6d3e9667cfd3b4e1fa15c6f7d.map