/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/coord/geo/geoCreator.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import*as echarts from"../../echarts";import*as zrUtil from"zrender/src/core/util";import Geo from"./Geo";import*as layout from"../../util/layout";import*as numberUtil from"../../util/number";import geoSourceManager from"./geoSourceManager";import mapDataStorage from"./mapDataStorage";function resizeGeo(e,t){var o=e.get("boundingCoords");if(null!=o){var r=o[0],a=o[1];isNaN(r[0])||isNaN(r[1])||isNaN(a[0])||isNaN(a[1])?__DEV__&&console.error("Invalid boundingCoords"):this.setBoundingRect(r[0],r[1],a[0]-r[0],a[1]-r[1])}var i,n=this.getBoundingRect(),s=e.get("layoutCenter"),g=e.get("layoutSize"),c=t.getWidth(),l=t.getHeight(),m=n.width/n.height*this.aspectScale,u=!1;if(s&&g&&(s=[numberUtil.parsePercent(s[0],c),numberUtil.parsePercent(s[1],l)],g=numberUtil.parsePercent(g,Math.min(c,l)),isNaN(s[0])||isNaN(s[1])||isNaN(g)?__DEV__&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):u=!0),u){var h={};m>1?(h.width=g,h.height=g/m):(h.height=g,h.width=g*m),h.y=s[1]-h.height/2,h.x=s[0]-h.width/2}else(i=e.getBoxLayoutParams()).aspect=m,h=layout.getLayoutRect(i,{width:c,height:l});this.setViewRect(h.x,h.y,h.width,h.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function setGeoCoords(e,t){zrUtil.each(t.get("geoCoord"),function(t,o){e.addGeoCoord(o,t)})}var geoCreator={dimensions:Geo.prototype.dimensions,create:function(e,t){var o=[];e.eachComponent("geo",function(e,r){var a=e.get("map"),i=e.get("aspectScale"),n=!0,s=mapDataStorage.retrieveMap(a);s&&s[0]&&"svg"===s[0].type?(null==i&&(i=1),n=!1):null==i&&(i=.75);var g=new Geo(a+r,a,e.get("nameMap"),n);g.aspectScale=i,g.zoomLimit=e.get("scaleLimit"),o.push(g),setGeoCoords(g,e),e.coordinateSystem=g,g.model=e,g.resize=resizeGeo,g.resize(e,t)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=o[t]}});var r={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();r[t]=r[t]||[],r[t].push(e)}}),zrUtil.each(r,function(e,r){var a=zrUtil.map(e,function(e){return e.get("nameMap")}),i=new Geo(r,r,zrUtil.mergeAll(a));i.zoomLimit=zrUtil.retrieve.apply(null,zrUtil.map(e,function(e){return e.get("scaleLimit")})),o.push(i),i.resize=resizeGeo,i.aspectScale=e[0].get("aspectScale"),i.resize(e[0],t),zrUtil.each(e,function(e){e.coordinateSystem=i,setGeoCoords(i,e)})}),o},getFilledRegions:function(e,t,o){for(var r=(e||[]).slice(),a=zrUtil.createHashMap(),i=0;i<r.length;i++)a.set(r[i].name,r[i]);var n=geoSourceManager.load(t,o);return zrUtil.each(n.regions,function(e){var t=e.name;!a.get(t)&&r.push({name:t})}),r}};echarts.registerCoordinateSystem("geo",geoCreator);export default geoCreator;
//# sourceMappingURL=/sm/813f112b460d46d43bbcbd2c4bb2a8b42123dbb104bfb3c996c69db420511f7a.map