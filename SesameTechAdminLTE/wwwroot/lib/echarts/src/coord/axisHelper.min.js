/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/coord/axisHelper.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../config";import*as zrUtil from"zrender/src/core/util";import OrdinalScale from"../scale/Ordinal";import IntervalScale from"../scale/Interval";import Scale from"../scale/Scale";import*as numberUtil from"../util/number";import{prepareLayoutBarSeries,makeColumnLayout,retrieveColumnLayout}from"../layout/barGrid";import BoundingRect from"zrender/src/core/BoundingRect";import"../scale/Time";import"../scale/Log";export function getScaleExtent(e,t){var a,r,n,l=e.type,o=t.getMin(),i=t.getMax(),u=null!=o,c=null!=i,s=e.getExtent();"ordinal"===l?a=t.getCategories().length:(r=t.get("boundaryGap"),zrUtil.isArray(r)||(r=[r||0,r||0]),"boolean"==typeof r[0]&&(__DEV__&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),r=[0,0]),r[0]=numberUtil.parsePercent(r[0],1),r[1]=numberUtil.parsePercent(r[1],1),n=s[1]-s[0]||Math.abs(s[0])),null==o&&(o="ordinal"===l?a?0:NaN:s[0]-r[0]*n),null==i&&(i="ordinal"===l?a?a-1:NaN:s[1]+r[1]*n),"dataMin"===o?o=s[0]:"function"==typeof o&&(o=o({min:s[0],max:s[1]})),"dataMax"===i?i=s[1]:"function"==typeof i&&(i=i({min:s[0],max:s[1]})),(null==o||!isFinite(o))&&(o=NaN),(null==i||!isFinite(i))&&(i=NaN),e.setBlank(zrUtil.eqNaN(o)||zrUtil.eqNaN(i)||"ordinal"===l&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(o>0&&i>0&&!u&&(o=0),o<0&&i<0&&!c&&(i=0));var g=t.ecModel;if(g&&"time"===l){var m,f=prepareLayoutBarSeries("bar",g);if(zrUtil.each(f,function(e){m|=e.getBaseAxis()===t.axis}),m){var p=makeColumnLayout(f),x=adjustScaleForOverflow(o,i,t,p);o=x.min,i=x.max}}return[o,i]}function adjustScaleForOverflow(e,t,a,r){var n=a.axis.getExtent(),l=n[1]-n[0],o=retrieveColumnLayout(r,a.axis);if(void 0===o)return{min:e,max:t};var i=1/0;zrUtil.each(o,function(e){i=Math.min(e.offset,i)});var u=-1/0;zrUtil.each(o,function(e){u=Math.max(e.offset+e.width,u)}),i=Math.abs(i),u=Math.abs(u);var c=i+u,s=t-e,g=s/(1-(i+u)/l)-s;return{min:e-=g*(i/c),max:t+=g*(u/c)}}export function niceScaleExtent(e,t){var a=getScaleExtent(e,t),r=null!=t.getMin(),n=null!=t.getMax(),l=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var o=e.type;e.setExtent(a[0],a[1]),e.niceExtent({splitNumber:l,fixMin:r,fixMax:n,minInterval:"interval"===o||"time"===o?t.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?t.get("maxInterval"):null});var i=t.get("interval");null!=i&&e.setInterval&&e.setInterval(i)}export function createScaleByModel(e,t){if(t=t||e.get("type"))switch(t){case"category":return new OrdinalScale(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new IntervalScale;default:return(Scale.getClass(t)||IntervalScale).create(e)}}export function ifAxisCrossZero(e){var t=e.scale.getExtent(),a=t[0],r=t[1];return!(a>0&&r>0||a<0&&r<0)}export function makeLabelFormatter(e){var t,a=e.getLabelModel().get("formatter"),r="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof a?(t=a,a=function(a){return a=e.scale.getLabel(a),t.replace("{value}",null!=a?a:"")}):"function"==typeof a?function(t,n){return null!=r&&(n=t-r),a(getAxisRawValue(e,t),n)}:function(t){return e.scale.getLabel(t)}}export function getAxisRawValue(e,t){return"category"===e.type?e.scale.getLabel(t):t}export function estimateLabelUnionRect(e){var t=e.model,a=e.scale;if(t.get("axisLabel.show")&&!a.isBlank()){var r,n,l="category"===e.type,o=a.getExtent();n=l?a.count():(r=a.getTicks()).length;var i,u=e.getLabelModel(),c=makeLabelFormatter(e),s=1;n>40&&(s=Math.ceil(n/40));for(var g=0;g<n;g+=s){var m=c(r?r[g]:o[0]+g),f=rotateTextRect(u.getTextRect(m),u.get("rotate")||0);i?i.union(f):i=f}return i}}function rotateTextRect(e,t){var a=t*Math.PI/180,r=e.plain(),n=r.width,l=r.height,o=n*Math.cos(a)+l*Math.sin(a),i=n*Math.sin(a)+l*Math.cos(a);return new BoundingRect(r.x,r.y,o,i)}export function getOptionCategoryInterval(e){var t=e.get("interval");return null==t?"auto":t}export function shouldShowAllLabels(e){return"category"===e.type&&0===getOptionCategoryInterval(e.getLabelModel())}
//# sourceMappingURL=/sm/e3e1428a087f2fbc9a796bbb757244fae1e0c6a95c72ecc0fef91097de5cb659.map