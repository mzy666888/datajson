/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/data/helper/completeDimensions.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{createHashMap,each,isString,defaults,extend,isObject,clone}from"zrender/src/core/util";import{normalizeToArray}from"../../util/model";import{guessOrdinal}from"./sourceHelper";import Source from"../Source";import{OTHER_DIMENSIONS}from"./dimensionHelper";function completeDimensions(e,n,r){Source.isInstance(n)||(n=Source.seriesDataToSource(n)),r=r||{},e=(e||[]).slice();for(var o=(r.dimsDef||[]).slice(),t=createHashMap(r.encodeDef),a=createHashMap(),i=createHashMap(),l=[],m=getDimCount(n,e,o,r.dimCount),s=0;s<m;s++){var u=o[s]=extend({},isObject(o[s])?o[s]:{name:o[s]}),c=u.name,d=l[s]={otherDims:{}};null!=c&&null==a.get(c)&&(d.name=d.displayName=c,a.set(c,s)),null!=u.type&&(d.type=u.type),null!=u.displayName&&(d.displayName=u.displayName)}t.each(function(e,n){if(1===(e=normalizeToArray(e).slice()).length&&!isString(e[0])&&e[0]<0)t.set(n,!1);else{var r=t.set(n,[]);each(e,function(e,o){isString(e)&&(e=a.get(e)),null!=e&&e<m&&(r[o]=e,g(l[e],n,o))})}});var f=0;function g(e,n,r){null!=OTHER_DIMENSIONS.get(n)?e.otherDims[n]=r:(e.coordDim=n,e.coordDimIndex=r,i.set(n,!0))}each(e,function(e,n){var r,o,a;if(isString(e))r=e,e={};else{r=e.name;var i=e.ordinalMeta;e.ordinalMeta=null,(e=clone(e)).ordinalMeta=i,o=e.dimsDef,a=e.otherDims,e.name=e.coordDim=e.coordDimIndex=e.dimsDef=e.otherDims=null}if(!1!==(m=t.get(r))){var m;if(!(m=normalizeToArray(m)).length)for(var s=0;s<(o&&o.length||1);s++){for(;f<l.length&&null!=l[f].coordDim;)f++;f<l.length&&m.push(f++)}each(m,function(n,t){var i=l[n];if(g(defaults(i,e),r,t),null==i.name&&o){var m=o[t];!isObject(m)&&(m={name:m}),i.name=i.displayName=m.name,i.defaultTooltip=m.defaultTooltip}a&&defaults(i.otherDims,a)})}});var p=r.generateCoord,D=r.generateCoordCount,h=null!=D;D=p?D||1:0;for(var v=p||"value",y=0;y<m;y++){null==(d=l[y]=l[y]||{}).coordDim&&(d.coordDim=genName(v,i,h),d.coordDimIndex=0,(!p||D<=0)&&(d.isExtraCoord=!0),D--),null==d.name&&(d.name=genName(d.coordDim,a)),null==d.type&&guessOrdinal(n,y,d.name)&&(d.type="ordinal")}return l}function getDimCount(e,n,r,o){var t=Math.max(e.dimensionsDetectCount||1,n.length,r.length,o||0);return each(n,function(e){var n=e.dimsDef;n&&(t=Math.max(t,n.length))}),t}function genName(e,n,r){if(r||null!=n.get(e)){for(var o=0;null!=n.get(e+o);)o++;e+=o}return n.set(e,!0),e}export default completeDimensions;
//# sourceMappingURL=/sm/4b54f47afd0363c30ad82b5edae2e9c7decf98fc67c8ba63f08dad5da6114441.map