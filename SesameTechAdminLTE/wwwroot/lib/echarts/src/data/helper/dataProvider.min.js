/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/data/helper/dataProvider.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import{isTypedArray,extend,assert,each,isObject}from"zrender/src/core/util";import{getDataItemValue,isDataItemOption}from"../../util/model";import{parseDate}from"../../util/number";import Source from"../Source";import{SOURCE_FORMAT_TYPED_ARRAY,SOURCE_FORMAT_ARRAY_ROWS,SOURCE_FORMAT_ORIGINAL,SOURCE_FORMAT_OBJECT_ROWS}from"./sourceType";export function DefaultDataProvider(t,e){Source.isInstance(t)||(t=Source.seriesDataToSource(t)),this._source=t;var r=this._data=t.data,a=t.sourceFormat;if(a===SOURCE_FORMAT_TYPED_ARRAY){if(__DEV__&&null==e)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=e,this._data=r}var n=providerMethods[a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+t.seriesLayoutBy:a];__DEV__&&assert(n,"Invalide sourceFormat: "+a),extend(this,n)}var providerProto=DefaultDataProvider.prototype;providerProto.pure=!1,providerProto.persistent=!0,providerProto.getSource=function(){return this._source};var providerMethods={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:appendDataSimply},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],r=this._data,a=0;a<r.length;a++){var n=r[a];e.push(n?n[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},keyedColumns:{pure:!0,count:function(){var t=this._source.dimensionsDefine[0].name,e=this._data[t];return e?e.length:0},getItem:function(t){for(var e=[],r=this._source.dimensionsDefine,a=0;a<r.length;a++){var n=this._data[r[a].name];e.push(n?n[t]:null)}return e},appendData:function(t){var e=this._data;each(t,function(t,r){for(var a=e[r]||(e[r]=[]),n=0;n<(t||[]).length;n++)a.push(t[n])})}},original:{count:countSimply,getItem:getItemSimply,appendData:appendDataSimply},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){t-=this._offset,e=e||[];for(var r=this._dimSize*t,a=0;a<this._dimSize;a++)e[a]=this._data[r+a];return e},appendData:function(t){__DEV__&&assert(isTypedArray(t),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}};function countSimply(){return this._data.length}function getItemSimply(t){return this._data[t]}function appendDataSimply(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}var rawValueGetters={arrayRows:getRawValueSimply,objectRows:function(t,e,r,a){return null!=r?t[a]:t},keyedColumns:getRawValueSimply,original:function(t,e,r,a){var n=getDataItemValue(t);return null!=r&&n instanceof Array?n[r]:n},typedArray:getRawValueSimply};function getRawValueSimply(t,e,r,a){return null!=r?t[r]:t}export var defaultDimValueGetters={arrayRows:getDimValueSimply,objectRows:function(t,e,r,a){return converDataValue(t[e],this._dimensionInfos[e])},keyedColumns:getDimValueSimply,original:function(t,e,r,a){var n=t&&(null==t.value?t:t.value);return!this._rawData.pure&&isDataItemOption(t)&&(this.hasItemOption=!0),converDataValue(n instanceof Array?n[a]:n,this._dimensionInfos[e])},typedArray:function(t,e,r,a){return t[a]}};function getDimValueSimply(t,e,r,a){return converDataValue(t[a],this._dimensionInfos[e])}function converDataValue(t,e){var r=e&&e.type;if("ordinal"===r){var a=e&&e.ordinalMeta;return a?a.parseAndCollect(t):t}return"time"===r&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+parseDate(t)),null==t||""===t?NaN:+t}export function retrieveRawValue(t,e,r){if(t){var a=t.getRawDataItem(e);if(null!=a){var n,i,o=t.getProvider().getSource().sourceFormat,u=t.getDimensionInfo(r);return u&&(n=u.name,i=u.index),rawValueGetters[o](a,e,i,n)}}}export function retrieveRawAttr(t,e,r){if(t){var a=t.getProvider().getSource().sourceFormat;if(a===SOURCE_FORMAT_ORIGINAL||a===SOURCE_FORMAT_OBJECT_ROWS){var n=t.getRawDataItem(e);return a!==SOURCE_FORMAT_ORIGINAL||isObject(n)||(n=null),n?n[r]:void 0}}}
//# sourceMappingURL=/sm/0330a0eb7d01e9b93c9da76c81d23332852081e1473cc5a9bd11ed15a2928728.map