/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/data/Graph.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../config";import*as zrUtil from"zrender/src/core/util";import{enableClassCheck}from"../util/clazz";function generateNodeKey(e){return"_EC_"+e}var Graph=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},graphProto=Graph.prototype;function Node(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==t?-1:t}function Edge(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}graphProto.type="graph",graphProto.isDirected=function(){return this._directed},graphProto.addNode=function(e,t){e=null==e?""+t:""+e;var n=this._nodesMap;if(!n[generateNodeKey(e)]){var d=new Node(e,t);return d.hostGraph=this,this.nodes.push(d),n[generateNodeKey(e)]=d,d}__DEV__&&console.error("Graph nodes have duplicate name or id")},graphProto.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},graphProto.getNodeById=function(e){return this._nodesMap[generateNodeKey(e)]},graphProto.addEdge=function(e,t,n){var d=this._nodesMap,a=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),Node.isInstance(e)||(e=d[generateNodeKey(e)]),Node.isInstance(t)||(t=d[generateNodeKey(t)]),e&&t){var r=e.id+"-"+t.id;if(!a[r]){var i=new Edge(e,t,n);return i.hostGraph=this,this._directed&&(e.outEdges.push(i),t.inEdges.push(i)),e.edges.push(i),e!==t&&t.edges.push(i),this.edges.push(i),a[r]=i,i}}},graphProto.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},graphProto.getEdge=function(e,t){Node.isInstance(e)&&(e=e.id),Node.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},graphProto.eachNode=function(e,t){for(var n=this.nodes,d=n.length,a=0;a<d;a++)n[a].dataIndex>=0&&e.call(t,n[a],a)},graphProto.eachEdge=function(e,t){for(var n=this.edges,d=n.length,a=0;a<d;a++)n[a].dataIndex>=0&&n[a].node1.dataIndex>=0&&n[a].node2.dataIndex>=0&&e.call(t,n[a],a)},graphProto.breadthFirstTraverse=function(e,t,n,d){if(Node.isInstance(t)||(t=this._nodesMap[generateNodeKey(t)]),t){for(var a="out"===n?"outEdges":"in"===n?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!e.call(d,t,null))for(var i=[t];i.length;){var o=i.shift(),s=o[a];for(r=0;r<s.length;r++){var h=s[r],g=h.node1===o?h.node2:h.node1;if(!g.__visited){if(e.call(d,g,o))return;i.push(g),g.__visited=!0}}}}},graphProto.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,d=this.edges,a=0,r=n.length;a<r;a++)n[a].dataIndex=-1;for(a=0,r=e.count();a<r;a++)n[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(e){var n=d[t.getRawIndex(e)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0});for(a=0,r=d.length;a<r;a++)d[a].dataIndex=-1;for(a=0,r=t.count();a<r;a++)d[t.getRawIndex(a)].dataIndex=a},graphProto.clone=function(){for(var e=new Graph(this._directed),t=this.nodes,n=this.edges,d=0;d<t.length;d++)e.addNode(t[d].id,t[d].dataIndex);for(d=0;d<n.length;d++){var a=n[d];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},Node.prototype={constructor:Node,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},Edge.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)};var createGraphDataProxyMixin=function(e,t){return{getValue:function(n){var d=this[e][t];return d.get(d.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,d){this.dataIndex>=0&&this[e][t].setItemVisual(this.dataIndex,n,d)},getVisual:function(n,d){return this[e][t].getItemVisual(this.dataIndex,n,d)},setLayout:function(n,d){this.dataIndex>=0&&this[e][t].setItemLayout(this.dataIndex,n,d)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}};zrUtil.mixin(Node,createGraphDataProxyMixin("hostGraph","data")),zrUtil.mixin(Edge,createGraphDataProxyMixin("hostGraph","edgeData")),Graph.Node=Node,Graph.Edge=Edge,enableClassCheck(Node),enableClassCheck(Edge);export default Graph;
//# sourceMappingURL=/sm/0d7d4016e8e89ed110801d98ff5798b1260e90331ffdbe58a0f0395a6ea653f5.map