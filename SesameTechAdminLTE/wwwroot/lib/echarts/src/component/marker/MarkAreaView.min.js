/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/marker/MarkAreaView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import*as colorUtil from"zrender/src/tool/color";import List from"../../data/List";import*as numberUtil from"../../util/number";import*as graphic from"../../util/graphic";import*as markerHelper from"./markerHelper";import MarkerView from"./MarkerView";var markAreaTransform=function(e,t,r,a){var i=markerHelper.dataTransform(e,a[0]),o=markerHelper.dataTransform(e,a[1]),n=zrUtil.retrieve,l=i.coord,s=o.coord;l[0]=n(l[0],-1/0),l[1]=n(l[1],-1/0),s[0]=n(s[0],1/0),s[1]=n(s[1],1/0);var m=zrUtil.mergeAll([{},i,o]);return m.coord=[i.coord,o.coord],m.x0=i.x,m.y0=i.y,m.x1=o.x,m.y1=o.y,m};function isInifinity(e){return!isNaN(e)&&!isFinite(e)}function ifMarkLineHasOnlyDim(e,t,r,a){var i=1-e;return isInifinity(t[i])&&isInifinity(r[i])}function markAreaFilter(e,t){var r=t.coord[0],a=t.coord[1];return!("cartesian2d"!==e.type||!r||!a||!ifMarkLineHasOnlyDim(1,r,a,e)&&!ifMarkLineHasOnlyDim(0,r,a,e))||(markerHelper.dataFilter(e,{coord:r,x:t.x0,y:t.y0})||markerHelper.dataFilter(e,{coord:a,x:t.x1,y:t.y1}))}function getSingleMarkerEndPoint(e,t,r,a,i){var o,n=a.coordinateSystem,l=e.getItemModel(t),s=numberUtil.parsePercent(l.get(r[0]),i.getWidth()),m=numberUtil.parsePercent(l.get(r[1]),i.getHeight());if(isNaN(s)||isNaN(m)){if(a.getMarkerPosition)o=a.getMarkerPosition(e.getValues(r,t));else{var u=[d=e.get(r[0],t),g=e.get(r[1],t)];n.clampData&&n.clampData(u,u),o=n.dataToPoint(u,!0)}if("cartesian2d"===n.type){var c=n.getAxis("x"),p=n.getAxis("y"),d=e.get(r[0],t),g=e.get(r[1],t);isInifinity(d)?o[0]=c.toGlobalCoord(c.getExtent()["x0"===r[0]?0:1]):isInifinity(g)&&(o[1]=p.toGlobalCoord(p.getExtent()["y0"===r[1]?0:1]))}isNaN(s)||(o[0]=s),isNaN(m)||(o[1]=m)}else o=[s,m];return o}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];function createList(e,t,r){var a,i;e?(a=zrUtil.map(e&&e.dimensions,function(e){var r=t.getData(),a=r.getDimensionInfo(r.mapDimension(e))||{};return zrUtil.defaults({name:e},a)}),i=new List(zrUtil.map(["x0","y0","x1","y1"],function(e,t){return{name:e,type:a[t%2].type}}),r)):i=new List(a=[{name:"value",type:"float"}],r);var o=zrUtil.map(r.get("data"),zrUtil.curry(markAreaTransform,t,e,r));e&&(o=zrUtil.filter(o,zrUtil.curry(markAreaFilter,e)));var n=e?function(e,t,r,a){return e.coord[Math.floor(a/2)][a%2]}:function(e){return e.value};return i.initData(o,null,n),i.hasItemOption=!0,i}MarkerView.extend({type:"markArea",updateTransform:function(e,t,r){t.eachSeries(function(e){var t=e.markAreaModel;if(t){var a=t.getData();a.each(function(t){var i=zrUtil.map(dimPermutations,function(i){return getSingleMarkerEndPoint(a,t,i,e,r)});a.setItemLayout(t,i),a.getItemGraphicEl(t).setShape("points",i)})}},this)},renderSeries:function(e,t,r,a){var i=e.coordinateSystem,o=e.id,n=e.getData(),l=this.markerGroupMap,s=l.get(o)||l.set(o,{group:new graphic.Group});this.group.add(s.group),s.__keep=!0;var m=createList(i,e,t);t.setData(m),m.each(function(t){m.setItemLayout(t,zrUtil.map(dimPermutations,function(r){return getSingleMarkerEndPoint(m,t,r,e,a)})),m.setItemVisual(t,{color:n.getVisual("color")})}),m.diff(s.__data).add(function(e){var t=new graphic.Polygon({shape:{points:m.getItemLayout(e)}});m.setItemGraphicEl(e,t),s.group.add(t)}).update(function(e,r){var a=s.__data.getItemGraphicEl(r);graphic.updateProps(a,{shape:{points:m.getItemLayout(e)}},t,e),s.group.add(a),m.setItemGraphicEl(e,a)}).remove(function(e){var t=s.__data.getItemGraphicEl(e);s.group.remove(t)}).execute(),m.eachItemGraphicEl(function(e,r){var a=m.getItemModel(r),i=a.getModel("label"),o=a.getModel("emphasis.label"),n=m.getItemVisual(r,"color");e.useStyle(zrUtil.defaults(a.getModel("itemStyle").getItemStyle(),{fill:colorUtil.modifyAlpha(n,.4),stroke:n})),e.hoverStyle=a.getModel("emphasis.itemStyle").getItemStyle(),graphic.setLabelStyle(e.style,e.hoverStyle,i,o,{labelFetcher:t,labelDataIndex:r,defaultText:m.getName(r)||"",isRectText:!0,autoColor:n}),graphic.setHoverStyle(e,{}),e.dataModel=t}),s.__data=m,s.group.silent=t.get("silent")||e.get("silent")}});
//# sourceMappingURL=/sm/6a475be5e49b5829116e4f03b52cdca6b31a4838ceab89217a82bceab239f22c.map