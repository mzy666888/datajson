/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/visualMap/VisualMapModel.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as echarts from"../../echarts";import*as zrUtil from"zrender/src/core/util";import env from"zrender/src/core/env";import visualDefault from"../../visual/visualDefault";import VisualMapping from"../../visual/VisualMapping";import*as visualSolution from"../../visual/visualSolution";import*as modelUtil from"../../util/model";import*as numberUtil from"../../util/number";var mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=zrUtil.isArray,each=zrUtil.each,asc=numberUtil.asc,linearMap=numberUtil.linearMap,noop=zrUtil.noop,VisualMapModel=echarts.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(t,i)},optionUpdated:function(t,e){var i=this.option;env.canvasSupported||(i.realtime=!1),!e&&visualSolution.replaceVisualOption(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=zrUtil.bind(t,this),this.controllerVisuals=visualSolution.createVisualMappings(this.option.controller,e,t),this.targetVisuals=visualSolution.createVisualMappings(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,i){e.push(i)}):e=modelUtil.normalizeToArray(t),e},eachTargetSeries:function(t,e){zrUtil.each(this.getTargetSeriesIndices(),function(i){t.call(e,this.ecModel.getSeriesByIndex(i))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(i){i===t&&(e=!0)}),e},formatValueText:function(t,e,i){var n,a,o=this.option,l=o.precision,r=this.dataBound,s=o.formatter;return i=i||["<",">"],zrUtil.isArray(t)&&(t=t.slice(),n=!0),a=e?t:n?[u(t[0]),u(t[1])]:u(t),zrUtil.isString(s)?s.replace("{value}",n?a[0]:a).replace("{value2}",n?a[1]:a):zrUtil.isFunction(s)?n?s(t[0],t[1]):s(t):n?t[0]===r[0]?i[0]+" "+a[1]:t[1]===r[1]?i[1]+" "+a[0]:a[0]+" - "+a[1]:a;function u(t){return t===r[0]?"min":t===r[1]?"max":(+t).toFixed(Math.min(l,20))}},resetExtent:function(){var t=this.option,e=asc([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension,i=t.dimensions;if(null!=e||i.length){if(null!=e)return t.getDimension(e);for(var n=t.dimensions,a=n.length-1;a>=0;a--){var o=n[a];if(!t.getDimensionInfo(o).isCalculationCoord)return o}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var t=this.ecModel,e=this.option,i={inRange:e.inRange,outOfRange:e.outOfRange},n=e.target||(e.target={}),a=e.controller||(e.controller={});zrUtil.merge(n,i),zrUtil.merge(a,i);var o=this.isCategory();function l(i){isArray(e.color)&&!i.inRange&&(i.inRange={color:e.color.slice().reverse()}),i.inRange=i.inRange||{color:t.get("gradientColor")},each(this.stateList,function(t){var e=i[t];if(zrUtil.isString(e)){var n=visualDefault.get(e,"active",o);n?(i[t]={},i[t][e]=n):delete i[t]}},this)}l.call(this,n),l.call(this,a),function(t,e,i){var n=t[e],a=t[i];n&&!a&&(a=t[i]={},each(n,function(t,e){if(VisualMapping.isValidType(e)){var i=visualDefault.get(e,"inactive",o);null!=i&&(a[e]=i,"color"!==e||a.hasOwnProperty("opacity")||a.hasOwnProperty("colorAlpha")||(a.opacity=[0,0]))}}))}.call(this,n,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,i=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,n=this.get("inactiveColor");each(this.stateList,function(a){var l=this.itemSize,r=t[a];r||(r=t[a]={color:o?n:[n]}),null==r.symbol&&(r.symbol=e&&zrUtil.clone(e)||(o?"roundRect":["roundRect"])),null==r.symbolSize&&(r.symbolSize=i&&zrUtil.clone(i)||(o?l[0]:[l[0],l[0]])),r.symbol=mapVisual(r.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var s=r.symbolSize;if(null!=s){var u=-1/0;eachVisual(s,function(t){t>u&&(u=t)}),r.symbolSize=mapVisual(s,function(t){return linearMap(t,[0,u],[0,l[0]],!0)})}},this)}.call(this,a)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:noop,getValueState:noop,getVisualMeta:noop});export default VisualMapModel;
//# sourceMappingURL=/sm/b9b683a10159ad23f8e76ee4cd686b3212322cd8c74d63bb416eb9c348602987.map