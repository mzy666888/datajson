/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/visualMap/PiecewiseView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import VisualMapView from"./VisualMapView";import*as graphic from"../../util/graphic";import{createSymbol}from"../../util/symbol";import*as layout from"../../util/layout";import*as helper from"./helper";var PiecewiseVisualMapView=VisualMapView.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,i=t.get("textGap"),a=t.textStyleModel,l=a.getFont(),r=a.getTextColor(),o=this._getItemAlign(),n=t.itemSize,s=this._getViewData(),c=s.endsText,d=zrUtil.retrieve(t.get("showLabel",!0),!c);c&&this._renderEndsText(e,c[0],n,d,o),zrUtil.each(s.viewPieceList,function(a){var s=a.piece,c=new graphic.Group;c.onclick=zrUtil.bind(this._onItemClick,this,s),this._enableHoverLink(c,a.indexInModelPieceList);var p=t.getRepresentValue(s);if(this._createItemSymbol(c,p,[0,0,n[0],n[1]]),d){var h=this.visualMapModel.getValueState(p);c.add(new graphic.Text({style:{x:"right"===o?-i:n[0]+i,y:n[1]/2,text:s.text,textVerticalAlign:"middle",textAlign:o,textFont:l,textFill:r,opacity:"outOfRange"===h?.5:1}}))}e.add(c)},this),c&&this._renderEndsText(e,c[1],n,d,o),layout.box(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function i(e){var i=this.visualMapModel;i.option.hoverLink&&this.api.dispatchAction({type:e,batch:helper.makeHighDownBatch(i.findTargetDataIndices(t),i)})}e.on("mouseover",zrUtil.bind(i,this,"highlight")).on("mouseout",zrUtil.bind(i,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return helper.getItemAlign(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},_renderEndsText:function(e,t,i,a,l){if(t){var r=new graphic.Group,o=this.visualMapModel.textStyleModel;r.add(new graphic.Text({style:{x:a?"right"===l?i[0]:0:i[0]/2,y:i[1]/2,textVerticalAlign:"middle",textAlign:a?l:"center",text:t,textFont:o.getFont(),textFill:o.getTextColor()}})),e.add(r)}},_getViewData:function(){var e=this.visualMapModel,t=zrUtil.map(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),i=e.get("text"),a=e.get("orient"),l=e.get("inverse");return("horizontal"===a?l:!l)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},_createItemSymbol:function(e,t,i){e.add(createSymbol(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,i=t.option,a=zrUtil.clone(i.selected),l=t.getSelectedMapKey(e);"single"===i.selectedMode?(a[l]=!0,zrUtil.each(a,function(e,t){a[t]=t===l})):a[l]=!a[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}});export default PiecewiseVisualMapView;
//# sourceMappingURL=/sm/7961a9086c7fa55cbe09195a8e5f7a4f911d45753b5114a3acb8999094930e90.map