/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/legend/LegendView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../../config";import*as echarts from"../../echarts";import*as zrUtil from"zrender/src/core/util";import{createSymbol}from"../../util/symbol";import*as graphic from"../../util/graphic";import{makeBackground}from"../helper/listComponent";import*as layoutUtil from"../../util/layout";var curry=zrUtil.curry,each=zrUtil.each,Group=graphic.Group;export default echarts.extendComponentView({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new Group),this._backgroundEl,this.group.add(this._selectorGroup=new Group),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,r){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var o=e.get("align"),n=e.get("orient");o&&"auto"!==o||(o="right"===e.get("left")&&"vertical"===n?"right":"left");var a=e.get("selector",!0),l=e.get("selectorPosition",!0);!a||l&&"auto"!==l||(l="horizontal"===n?"end":"start"),this.renderInner(o,e,t,r,a,n,l);var s=e.getBoxLayoutParams(),c={width:r.getWidth(),height:r.getHeight()},g=e.get("padding"),u=layoutUtil.getLayoutRect(s,c,g),d=this.layoutInner(e,o,u,i,a,l),h=layoutUtil.getLayoutRect(zrUtil.defaults({width:d.width,height:d.height},s),c,g);this.group.attr("position",[h.x-d.x,h.y-d.y]),this.group.add(this._backgroundEl=makeBackground(d,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,r,i,o,n,a){var l=this.getContentGroup(),s=zrUtil.createHashMap(),c=t.get("selectedMode"),g=[];r.eachRawSeries(function(e){!e.get("legendHoverLink")&&g.push(e.id)}),each(t.getData(),function(o,n){var a=o.get("name");if(this.newlineDisabled||""!==a&&"\n"!==a){var u=r.getSeriesByName(a)[0];if(!s.get(a)){if(u){var d=u.getData(),h=d.getVisual("color"),p=d.getVisual("borderColor");"function"==typeof h&&(h=h(u.getDataParams(0))),"function"==typeof p&&(p=p(u.getDataParams(0)));var m=d.getVisual("legendSymbol")||"roundRect",y=d.getVisual("symbol");this._createItem(a,n,o,t,m,y,e,h,p,c).on("click",curry(dispatchSelectAction,a,i)).on("mouseover",curry(dispatchHighlightAction,u.name,null,i,g)).on("mouseout",curry(dispatchDownplayAction,u.name,null,i,g)),s.set(a,!0)}else r.eachRawSeries(function(r){if(!s.get(a)&&r.legendDataProvider){var l=r.legendDataProvider(),u=l.indexOfName(a);if(u<0)return;var d=l.getItemVisual(u,"color"),h=l.getItemVisual(u,"borderColor");this._createItem(a,n,o,t,"roundRect",null,e,d,h,c).on("click",curry(dispatchSelectAction,a,i)).on("mouseover",curry(dispatchHighlightAction,null,a,i,g)).on("mouseout",curry(dispatchDownplayAction,null,a,i,g)),s.set(a,!0)}},this);__DEV__&&(s.get(a)||console.warn(a+" series not exists. Legend data should be same with series name or data name."))}}else l.add(new Group({newline:!0}))},this),o&&this._createSelector(o,t,i,n,a)},_createSelector:function(e,t,r,i,o){var n=this.getSelectorGroup();each(e,function(e){!function(e){var i=e.type,o=new graphic.Text({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});n.add(o);var a=t.getModel("selectorLabel"),l=t.getModel("emphasis.selectorLabel");graphic.setLabelStyle(o.style,o.hoverStyle={},a,l,{defaultText:e.title,isRectText:!1}),graphic.setHoverStyle(o)}(e)})},_createItem:function(e,t,r,i,o,n,a,l,s,c){var g=i.get("itemWidth"),u=i.get("itemHeight"),d=i.get("inactiveColor"),h=i.get("inactiveBorderColor"),p=i.get("symbolKeepAspect"),m=i.getModel("itemStyle"),y=i.isSelected(e),f=new Group,v=r.getModel("textStyle"),S=r.get("icon"),x=r.getModel("tooltip"),b=x.parentModel,w=createSymbol(o=S||o,0,0,g,u,y?l:d,null==p||p);if(f.add(setSymbolStyle(w,o,m,s,h,y)),!S&&n&&(n!==o||"none"===n)){var _=.8*u;"none"===n&&(n="circle");var G=createSymbol(n,(g-_)/2,(u-_)/2,_,_,y?l:d,null==p||p);f.add(setSymbolStyle(G,n,m,s,h,y))}var A="left"===a?g+5:-5,I=a,D=i.get("formatter"),R=e;"string"==typeof D&&D?R=D.replace("{name}",null!=e?e:""):"function"==typeof D&&(R=D(e)),f.add(new graphic.Text({style:graphic.setTextStyle({},v,{text:R,x:A,y:u/2,textFill:y?v.getTextColor():d,textAlign:I,textVerticalAlign:"middle"})}));var C=new graphic.Rect({shape:f.getBoundingRect(),invisible:!0,tooltip:x.get("show")?zrUtil.extend({content:e,formatter:b.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:i.componentIndex,name:e,$vars:["name"]}},x.option):null});return f.add(C),f.eachChild(function(e){e.silent=!0}),C.silent=!c,this.getContentGroup().add(f),graphic.setHoverStyle(f),f.__legendDataIndex=t,f},layoutInner:function(e,t,r,i,o,n){var a=this.getContentGroup(),l=this.getSelectorGroup();layoutUtil.box(e.get("orient"),a,e.get("itemGap"),r.width,r.height);var s=a.getBoundingRect(),c=[-s.x,-s.y];if(o){layoutUtil.box("horizontal",l,e.get("selectorItemGap",!0));var g=l.getBoundingRect(),u=[-g.x,-g.y],d=e.get("selectorButtonGap",!0),h=e.getOrient().index,p=0===h?"width":"height",m=0===h?"height":"width",y=0===h?"y":"x";"end"===n?u[h]+=s[p]+d:c[h]+=g[p]+d,u[1-h]+=s[m]/2-g[m]/2,l.attr("position",u),a.attr("position",c);var f={x:0,y:0};return f[p]=s[p]+d+g[p],f[m]=Math.max(s[m],g[m]),f[y]=Math.min(0,g[y]+u[1-h]),f}return a.attr("position",c),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function setSymbolStyle(e,t,r,i,o,n){var a;return"line"!==t&&t.indexOf("empty")<0?(a=r.getItemStyle(),e.style.stroke=i,n||(a.stroke=o)):a=r.getItemStyle(["borderWidth","borderColor"]),e.setStyle(a)}function dispatchSelectAction(e,t){t.dispatchAction({type:"legendToggleSelect",name:e})}function dispatchHighlightAction(e,t,r,i){var o=r.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:i})}function dispatchDownplayAction(e,t,r,i){var o=r.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:i})}
//# sourceMappingURL=/sm/25a1bc0bf790137ba7189508b4c2b5fe4f786c698fb15f2a7b1b46446a285e71.map