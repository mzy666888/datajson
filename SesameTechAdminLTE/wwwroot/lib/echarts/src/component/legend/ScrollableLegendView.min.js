/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/legend/ScrollableLegendView.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import*as graphic from"../../util/graphic";import*as layoutUtil from"../../util/layout";import LegendView from"./LegendView";var Group=graphic.Group,WH=["width","height"],XY=["x","y"],ScrollableLegendView=LegendView.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){ScrollableLegendView.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group),this._showController},resetInner:function(){ScrollableLegendView.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,r,i,o,a){var l=this;ScrollableLegendView.superCall(this,"renderInner",e,t,n,r,i,o,a);var g=this._controllerGroup,p=t.get("pageIconSize",!0);zrUtil.isArray(p)||(p=[p,p]),c("pagePrev",0);var u=t.getModel("pageTextStyle");function c(e,n){var i=e+"DataIndex",o=graphic.createIcon(t.get("pageIcons",!0)[t.getOrient().name][n],{onclick:zrUtil.bind(l._pageGo,l,i,t,r)},{x:-p[0]/2,y:-p[1]/2,width:p[0],height:p[1]});o.name=e,g.add(o)}g.add(new graphic.Text({name:"pageText",style:{textFill:u.getTextColor(),font:u.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),c("pageNext",1)},layoutInner:function(e,t,n,r,i,o){var a=this.getSelectorGroup(),l=e.getOrient().index,g=WH[l],p=XY[l],u=WH[1-l],c=XY[1-l];i&&layoutUtil.box("horizontal",a,e.get("selectorItemGap",!0));var s=e.get("selectorButtonGap",!0),d=a.getBoundingRect(),h=[-d.x,-d.y],x=zrUtil.clone(n);i&&(x[g]=n[g]-d[g]-s);var I=this._layoutContentAndController(e,r,x,l,g,u,c);if(i){if("end"===o)h[l]+=I[g]+s;else{var f=d[g]+s;h[l]-=f,I[p]-=f}I[g]+=d[g]+s,h[1-l]+=I[c]+I[u]/2-d[u]/2,I[u]=Math.max(I[u],d[u]),I[c]=Math.min(I[c],d[c]+h[1-l]),a.attr("position",h)}return I},_layoutContentAndController:function(e,t,n,r,i,o,a){var l=this.getContentGroup(),g=this._containerGroup,p=this._controllerGroup;layoutUtil.box(e.get("orient"),l,e.get("itemGap"),r?n.width:null,r?null:n.height),layoutUtil.box("horizontal",p,e.get("pageButtonItemGap",!0));var u=l.getBoundingRect(),c=p.getBoundingRect(),s=this._showController=u[i]>n[i],d=[-u.x,-u.y];t||(d[r]=l.position[r]);var h=[0,0],x=[-c.x,-c.y],I=zrUtil.retrieve2(e.get("pageButtonGap",!0),e.get("itemGap",!0));s&&("end"===e.get("pageButtonPosition",!0)?x[r]+=n[i]-c[i]:h[r]+=c[i]+I);x[1-r]+=u[o]/2-c[o]/2,l.attr("position",d),g.attr("position",h),p.attr("position",x);var f={x:0,y:0};if(f[i]=s?n[i]:u[i],f[o]=Math.max(u[o],c[o]),f[a]=Math.min(0,c[a]+x[1-r]),g.__rectSize=n[i],s){var _={x:0,y:0};_[i]=Math.max(n[i]-c[i]-I,0),_[o]=f[o],g.setClipPath(new graphic.Rect({shape:_})),g.__rectSize=_[i]}else p.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var v=this._getPageInfo(e);return null!=v.pageIndex&&graphic.updateProps(l,{position:v.contentPosition},!!s&&e),this._updatePageInfoView(e,v),f},_pageGo:function(e,t,n){var r=this._getPageInfo(t)[e];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;zrUtil.each(["pagePrev","pageNext"],function(r){var i=null!=t[r+"DataIndex"],o=n.childOfName(r);o&&(o.setStyle("fill",i?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),o.cursor=i?"pointer":"default")});var r=n.childOfName("pageText"),i=e.get("pageFormatter"),o=t.pageIndex,a=null!=o?o+1:0,l=t.pageCount;r&&i&&r.setStyle("text",zrUtil.isString(i)?i.replace("{current}",a).replace("{total}",l):i({current:a,total:l}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),r=this._containerGroup.__rectSize,i=e.getOrient().index,o=WH[i],a=XY[i],l=this._findTargetItemIndex(t),g=n.children(),p=g[l],u=g.length,c=u?1:0,s={contentPosition:n.position.slice(),pageCount:c,pageIndex:c-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return s;var d=_(p);s.contentPosition[i]=-d.s;for(var h=l+1,x=d,I=d,f=null;h<=u;++h)(!(f=_(g[h]))&&I.e>x.s+r||f&&!v(f,x.s))&&(x=I.i>x.i?I:f)&&(null==s.pageNextDataIndex&&(s.pageNextDataIndex=x.i),++s.pageCount),I=f;for(h=l-1,x=d,I=d,f=null;h>=-1;--h)(f=_(g[h]))&&v(I,f.s)||!(x.i<I.i)||(I=x,null==s.pagePrevDataIndex&&(s.pagePrevDataIndex=x.i),++s.pageCount,++s.pageIndex),x=f;return s;function _(e){if(e){var t=e.getBoundingRect(),n=t[a]+e.position[i];return{s:n,e:n+t[o],i:e.__legendDataIndex}}}function v(e,t){return e.e>=t&&e.s<=t+r}},_findTargetItemIndex:function(e){var t,n,r=this.getContentGroup();return this._showController&&r.eachChild(function(r,i){var o=r.__legendDataIndex;null==n&&null!=o&&(n=i),o===e&&(t=i)}),null!=t?t:n}});export default ScrollableLegendView;
//# sourceMappingURL=/sm/e6d1954cef7b25de3183f1c208730d380f29265721b41524cec4f668c98f8ef4.map