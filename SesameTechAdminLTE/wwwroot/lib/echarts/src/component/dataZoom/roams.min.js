/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/dataZoom/roams.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as zrUtil from"zrender/src/core/util";import RoamController from"../../component/helper/RoamController";import*as throttleUtil from"../../util/throttle";var ATTR="\0_ec_dataZoom_roams";export function register(o,t){var e=giveStore(o),r=t.dataZoomId,n=t.coordId;zrUtil.each(e,function(o,e){var a=o.dataZoomInfos;a[r]&&zrUtil.indexOf(t.allCoordIds,n)<0&&(delete a[r],o.count--)}),cleanStore(e);var a=e[n];a||((a=e[n]={coordId:n,dataZoomInfos:{},count:0}).controller=createController(o,a),a.dispatchAction=zrUtil.curry(dispatchAction,o)),!a.dataZoomInfos[r]&&a.count++,a.dataZoomInfos[r]=t;var l=mergeControllerParams(a.dataZoomInfos);a.controller.enable(l.controlType,l.opt),a.controller.setPointerChecker(t.containsPoint),throttleUtil.createOrUpdate(a,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}export function unregister(o,t){var e=giveStore(o);zrUtil.each(e,function(o){o.controller.dispose();var e=o.dataZoomInfos;e[t]&&(delete e[t],o.count--)}),cleanStore(e)}export function generateCoordId(o){return o.type+"\0_"+o.id}function giveStore(o){var t=o.getZr();return t[ATTR]||(t[ATTR]={})}function createController(o,t){var e=new RoamController(o.getZr());return zrUtil.each(["pan","zoom","scrollMove"],function(o){e.on(o,function(e){var r=[];zrUtil.each(t.dataZoomInfos,function(n){if(e.isAvailableBehavior(n.dataZoomModel.option)){var a=(n.getRange||{})[o],l=a&&a(t.controller,e);!n.dataZoomModel.get("disabled",!0)&&l&&r.push({dataZoomId:n.dataZoomId,start:l[0],end:l[1]})}}),r.length&&t.dispatchAction(r)})}),e}function cleanStore(o){zrUtil.each(o,function(t,e){t.count||(t.controller.dispose(),delete o[e])})}function dispatchAction(o,t){o.dispatchAction({type:"dataZoom",batch:t})}function mergeControllerParams(o){var t,e={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return zrUtil.each(o,function(o){var n=o.dataZoomModel,a=!n.get("disabled",!0)&&(!n.get("zoomLock",!0)||"move");e["type_"+a]>e["type_"+t]&&(t=a),r&=n.get("preventDefaultMouseMove",!0)}),{controlType:t,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}
//# sourceMappingURL=/sm/171b5993832138a4a983329fe0564d4ea28ebce9059ecbd50b5d2c7e020b6a1c.map