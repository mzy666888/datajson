/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/component/toolbox/feature/DataZoom.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as echarts from"../../../echarts";import*as zrUtil from"zrender/src/core/util";import BrushController from"../../helper/BrushController";import BrushTargetManager from"../../helper/BrushTargetManager";import*as history from"../../dataZoom/history";import sliderMove from"../../helper/sliderMove";import lang from"../../../lang";import*as featureManager from"../featureManager";import"../../dataZoomSelect";var dataZoomLang=lang.toolbox.dataZoom,each=zrUtil.each,DATA_ZOOM_ID_BASE="\0_ec_\0toolbox-dataZoom_";function DataZoom(t,o,e){(this._brushController=new BrushController(e.getZr())).on("brush",zrUtil.bind(this._onBrush,this)).mount(),this._isZoomActive}DataZoom.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:zrUtil.clone(dataZoomLang.title)};var proto=DataZoom.prototype;proto.render=function(t,o,e,r){this.model=t,this.ecModel=o,this.api=e,updateZoomBtnStatus(t,o,this,r,e),updateBackBtnStatus(t,o)},proto.onclick=function(t,o,e){handlers[e].call(this)},proto.remove=function(t,o){this._brushController.unmount()},proto.dispose=function(t,o){this._brushController.dispose()};var handlers={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(history.pop(this.ecModel))}};function retrieveAxisSetting(t){var o={};return zrUtil.each(["xAxisIndex","yAxisIndex"],function(e){o[e]=t[e],null==o[e]&&(o[e]="all"),(!1===o[e]||"none"===o[e])&&(o[e]=[])}),o}function updateBackBtnStatus(t,o){t.setIconStatus("back",history.count(o)>1?"emphasis":"normal")}function updateZoomBtnStatus(t,o,e,r,a){var i=e._isZoomActive;r&&"takeGlobalCursor"===r.type&&(i="dataZoomSelect"===r.key&&r.dataZoomSelectActive),e._isZoomActive=i,t.setIconStatus("zoom",i?"emphasis":"normal");var n=new BrushTargetManager(retrieveAxisSetting(t.option),o,{include:["grid"]});e._brushController.setPanels(n.makePanelOpts(a,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!i&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}proto._onBrush=function(t,o){if(o.isEnd&&t.length){var e={},r=this.ecModel;this._brushController.updateCovers([]),new BrushTargetManager(retrieveAxisSetting(this.model.option),r,{include:["grid"]}).matchOutputRanges(t,r,function(t,o,e){if("cartesian2d"===e.type){var r=t.brushType;"rect"===r?(a("x",e,o[0]),a("y",e,o[1])):a({lineX:"x",lineY:"y"}[r],e,o)}}),history.push(r,e),this._dispatchZoomAction(e)}function a(t,o,a){var i=o.getAxis(t),n=i.model,s=function(t,o,e){var r;return e.eachComponent({mainType:"dataZoom",subType:"select"},function(e){e.getAxisModel(t,o.componentIndex)&&(r=e)}),r}(t,n,r),l=s.findRepresentativeAxisProxy(n).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(a=sliderMove(0,a.slice(),i.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(e[s.id]={dataZoomId:s.id,startValue:a[0],endValue:a[1]})}},proto._dispatchZoomAction=function(t){var o=[];each(t,function(t,e){o.push(zrUtil.clone(t))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},featureManager.register("dataZoom",DataZoom),echarts.registerPreprocessor(function(t){if(t){var o=t.dataZoom||(t.dataZoom=[]);zrUtil.isArray(o)||(t.dataZoom=o=[o]);var e=t.toolbox;if(e&&(zrUtil.isArray(e)&&(e=e[0]),e&&e.feature)){var r=e.feature.dataZoom;a("xAxis",r),a("yAxis",r)}}function a(e,r){if(r){var a=e+"Index",i=r[a];null==i||"all"===i||zrUtil.isArray(i)||(i=!1===i||"none"===i?[]:[i]),function(o,e){var r=t[o];zrUtil.isArray(r)||(r=r?[r]:[]);each(r,e)}(e,function(t,n){if(null==i||"all"===i||-1!==zrUtil.indexOf(i,n)){var s={type:"select",$fromToolbox:!0,filterMode:r.filterMode||"filter",id:DATA_ZOOM_ID_BASE+e+n};s[a]=n,o.push(s)}})}}});export default DataZoom;
//# sourceMappingURL=/sm/78ef46307794ad691bf5034a18f08e08b0f11919e6e8097209a023ccf1d1a15d.map