/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/echarts@4.5.0/src/model/Series.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{__DEV__}from"../config";import*as zrUtil from"zrender/src/core/util";import env from"zrender/src/core/env";import{formatTime,encodeHTML,addCommas,getTooltipMarker}from"../util/format";import*as modelUtil from"../util/model";import ComponentModel from"./Component";import colorPaletteMixin from"./mixin/colorPalette";import dataFormatMixin from"../model/mixin/dataFormat";import{getLayoutParams,mergeLayoutParam}from"../util/layout";import{createTask}from"../stream/task";import{prepareSource,getSource}from"../data/helper/sourceHelper";import{retrieveRawValue}from"../data/helper/dataProvider";var inner=modelUtil.makeInner(),SeriesModel=ComponentModel.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(t,e,a,r){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,a),prepareSource(this);var o=this.getInitialData(t,a);wrapData(o,this),this.dataTask.context.data=o,__DEV__&&zrUtil.assert(o,"getInitialData returned invalid data."),inner(this).dataBeforeProcessed=o,autoSeriesName(this)},mergeDefaultAndTheme:function(t,e){var a=this.layoutMode,r=a?getLayoutParams(t):{},o=this.subType;ComponentModel.hasClass(o)&&(o+="Series"),zrUtil.merge(t,e.getTheme().get(this.subType)),zrUtil.merge(t,this.getDefaultOption()),modelUtil.defaultEmphasis(t,"label",["show"]),this.fillDataTextStyle(t.data),a&&mergeLayoutParam(t,r,a)},mergeOption:function(t,e){t=zrUtil.merge(this.option,t,!0),this.fillDataTextStyle(t.data);var a=this.layoutMode;a&&mergeLayoutParam(this.option,t,a),prepareSource(this);var r=this.getInitialData(t,e);wrapData(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,inner(this).dataBeforeProcessed=r,autoSeriesName(this)},fillDataTextStyle:function(t){if(t&&!zrUtil.isTypedArray(t))for(var e=["show"],a=0;a<t.length;a++)t[a]&&t[a].label&&modelUtil.defaultEmphasis(t[a],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=getCurrentTask(this);if(e){var a=e.context.data;return null==t?a:a.getLinkedData(t)}return inner(this).data},setData:function(t){var e=getCurrentTask(this);if(e){var a=e.context;a.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),a.outputData=t,e!==this.dataTask&&(a.data=t)}inner(this).data=t},getSource:function(){return getSource(this)},getRawData:function(){return inner(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,a,r){var o=this,i="html"===(r=r||"html")?"<br/>":"\n",n="richText"===r,s={},l=0;function u(t){return{renderMode:r,content:encodeHTML(addCommas(t)),style:s}}var d=this.getData(),m=d.mapDimension("defaultedTooltip",!0),c=m.length,h=this.getRawValue(t),p=zrUtil.isArray(h),f=d.getItemVisual(t,"color");zrUtil.isObject(f)&&f.colorStops&&(f=(f.colorStops[0]||{}).color),f=f||"transparent";var g=(c>1||p&&!c?function(a){var i=zrUtil.reduce(a,function(t,e,a){var r=d.getDimensionInfo(a);return t|(r&&!1!==r.tooltip&&null!=r.displayName)},0),u=[];function c(t,a){var m=d.getDimensionInfo(a);if(m&&!1!==m.otherDims.tooltip){var c=m.type,h="sub"+o.seriesIndex+"at"+l,p=getTooltipMarker({color:f,type:"subItem",renderMode:r,markerId:h}),g="string"==typeof p?p:p.content,T=(i?g+encodeHTML(m.displayName||"-")+": ":"")+encodeHTML("ordinal"===c?t+"":"time"===c?e?"":formatTime("yyyy/MM/dd hh:mm:ss",t):addCommas(t));T&&u.push(T),n&&(s[h]=f,++l)}}m.length?zrUtil.each(m,function(e){c(retrieveRawValue(d,t,e),e)}):zrUtil.each(a,c);var h=i?n?"\n":"<br/>":"",p=h+u.join(h||", ");return{renderMode:r,content:p,style:s}}(h):u(c?retrieveRawValue(d,t,m[0]):p?h[0]:h)).content,T=o.seriesIndex+"at"+l,D=getTooltipMarker({color:f,type:"item",renderMode:r,markerId:T});s[T]=f,++l;var v=d.getName(t),y=this.name;modelUtil.isNameSpecified(this)||(y=""),y=y?encodeHTML(y)+(e?": ":i):"";var M="string"==typeof D?D:D.content;return{html:e?M+y+g:y+M+(v?encodeHTML(v)+": "+g:g),markers:s}},isAnimationEnabled:function(){if(env.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,a){var r=this.ecModel,o=colorPaletteMixin.getColorFromPalette.call(this,t,e,a);return o||(o=r.getColorFromPalette(t,e,a)),o},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function autoSeriesName(t){var e=t.name;modelUtil.isNameSpecified(t)||(t.name=getSeriesAutoName(t)||e)}function getSeriesAutoName(t){var e=t.getRawData(),a=e.mapDimension("seriesName",!0),r=[];return zrUtil.each(a,function(t){var a=e.getDimensionInfo(t);a.displayName&&r.push(a.displayName)}),r.join(" ")}function dataTaskCount(t){return t.model.getRawData().count()}function dataTaskReset(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(t,e){t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function wrapData(t,e){zrUtil.each(t.CHANGABLE_METHODS,function(a){t.wrapMethod(a,zrUtil.curry(onDataSelfChange,e))})}function onDataSelfChange(t){var e=getCurrentTask(t);e&&e.setOutputEnd(this.count())}function getCurrentTask(t){var e=(t.ecModel||{}).scheduler,a=e&&e.getPipeline(t.uid);if(a){var r=a.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(t.uid))}return r}}zrUtil.mixin(SeriesModel,dataFormatMixin),zrUtil.mixin(SeriesModel,colorPaletteMixin);export default SeriesModel;
//# sourceMappingURL=/sm/9062d863facffb758860cc88aa9252ed37d6b346328963506f0862d176833b75.map